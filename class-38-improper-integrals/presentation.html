<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 38: Improper Integrals | AP Calculus BC</title>
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            --theme-color: #d4a028;
            --theme-light: #fef3c7;
            --theme-dark: #b8860b;
        }
        .unit-badge {
            background: var(--theme-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .formula-box {
            background: var(--theme-light);
            border-left: 4px solid var(--theme-color);
            padding: 1.5rem 2rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
            font-size: 1.75rem;
        }
        .example-box {
            background: #f8fafc;
            border: 2px solid var(--theme-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
        }
        .column {
            padding: 1rem;
        }
        .type-box {
            background: white;
            border: 2px solid var(--theme-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }
        .type-box h3 {
            color: var(--theme-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        .converge {
            color: #059669;
            font-weight: bold;
        }
        .diverge {
            color: #dc2626;
            font-weight: bold;
        }
        .viz-container {
            width: 100%;
            max-width: 700px;
            height: 400px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Title Slide -->
        <div class="slide slide-title active" data-slide="0" data-title="Improper Integrals">
            <div class="slide-content">
                <span class="unit-badge">Unit 6: Integration</span>
                <h1>Improper Integrals</h1>
                <h2>Class 38 | CED Topic 6.13</h2>
                <p style="font-size: 1.25rem; color: #64748b; margin-top: 2rem;">
                    Integrating to Infinity (and Beyond)
                </p>
            </div>
        </div>

        <!-- Warm-Up -->
        <div class="slide slide-statement" data-slide="1" data-title="Warm-Up">
            <div class="slide-content">
                <h2>Warm-Up</h2>
                <p style="font-size: 1.5rem; margin-bottom: 1.5rem;">
                    Consider the region under \( y = \frac{1}{x^2} \) from \( x = 1 \) to infinity.
                </p>
                <p style="font-size: 1.75rem;">
                    Does this region have finite area?
                </p>
                <p style="font-size: 1.5rem; color: #64748b; margin-top: 2rem;">
                    The curve never reaches zero... but the area might still be finite!
                </p>
            </div>
        </div>

        <!-- What Makes an Integral Improper -->
        <div class="slide slide-content" data-slide="2" data-title="Improper Types">
            <div class="slide-content">
                <h2>What Makes an Integral "Improper"?</h2>
                <div class="two-column">
                    <div class="type-box">
                        <h3>Type 1: Infinite Limits</h3>
                        <p style="font-size: 1.5rem;">
                            \( \displaystyle\int_1^{\infty} \frac{1}{x^2} \, dx \)
                        </p>
                        <p style="font-size: 1.25rem; color: #64748b; margin-top: 1rem;">
                            One or both limits are \( \pm\infty \)
                        </p>
                    </div>
                    <div class="type-box">
                        <h3>Type 2: Discontinuous Integrand</h3>
                        <p style="font-size: 1.5rem;">
                            \( \displaystyle\int_0^{1} \frac{1}{\sqrt{x}} \, dx \)
                        </p>
                        <p style="font-size: 1.25rem; color: #64748b; margin-top: 1rem;">
                            Integrand is unbounded on interval
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Type 1 Definition -->
        <div class="slide slide-statement" data-slide="3" data-title="Type 1 Definition">
            <div class="slide-content">
                <h2>Type 1: Infinite Upper Limit</h2>
                <div class="formula-box" style="font-size: 2rem;">
                    \( \displaystyle\int_a^{\infty} f(x) \, dx = \lim_{b \to \infty} \int_a^{b} f(x) \, dx \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem;">
                    If the limit exists and is finite, the integral <span class="converge">converges</span>.<br>
                    Otherwise, it <span class="diverge">diverges</span>.
                </p>
            </div>
        </div>

        <!-- Type 1 Example -->
        <div class="slide slide-content" data-slide="4" data-title="Type 1 Example">
            <div class="slide-content">
                <h2>Example: \( \displaystyle\int_1^{\infty} \frac{1}{x^2} \, dx \)</h2>
                <p style="font-size: 1.5rem;">Apply the definition:</p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( \lim_{b \to \infty} \int_1^{b} \frac{1}{x^2} \, dx = \lim_{b \to \infty} \left[ -\frac{1}{x} \right]_1^{b} \)
                </div>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( = \lim_{b \to \infty} \left( -\frac{1}{b} + 1 \right) = 0 + 1 = 1 \)
                </div>
                <p style="font-size: 1.75rem; margin-top: 1.5rem;">
                    The integral <span class="converge">converges to 1</span>.
                </p>
            </div>
        </div>

        <!-- Visualization -->
        <div class="slide slide-visual" data-slide="5" data-title="Visualization">
            <div class="slide-content">
                <h2>Visualizing Convergence</h2>
                <div class="viz-container" id="convergence-viz"></div>
                <p style="font-size: 1.25rem; color: #64748b; margin-top: 1rem;">
                    Area under \( y = 1/x^2 \) from 1 to ∞ equals exactly 1
                </p>
            </div>
        </div>

        <!-- Divergent Example -->
        <div class="slide slide-content" data-slide="6" data-title="Divergent Example">
            <div class="slide-content">
                <h2>Example: \( \displaystyle\int_1^{\infty} \frac{1}{x} \, dx \)</h2>
                <p style="font-size: 1.5rem;">Apply the definition:</p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( \lim_{b \to \infty} \int_1^{b} \frac{1}{x} \, dx = \lim_{b \to \infty} [\ln x]_1^{b} \)
                </div>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( = \lim_{b \to \infty} (\ln b - \ln 1) = \lim_{b \to \infty} \ln b = \infty \)
                </div>
                <p style="font-size: 1.75rem; margin-top: 1.5rem;">
                    The integral <span class="diverge">diverges</span>.
                </p>
            </div>
        </div>

        <!-- p-integral Theorem -->
        <div class="slide slide-statement" data-slide="7" data-title="p-Integral">
            <div class="slide-content">
                <h2>The p-Integral Test</h2>
                <div class="formula-box" style="font-size: 2rem; text-align: center;">
                    \( \displaystyle\int_1^{\infty} \frac{1}{x^p} \, dx \)
                </div>
                <div class="two-column" style="margin-top: 2rem;">
                    <div style="text-align: center;">
                        <p style="font-size: 1.75rem;" class="converge">Converges if \( p > 1 \)</p>
                    </div>
                    <div style="text-align: center;">
                        <p style="font-size: 1.75rem;" class="diverge">Diverges if \( p \leq 1 \)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Both Limits Infinite -->
        <div class="slide slide-content" data-slide="8" data-title="Both Infinite">
            <div class="slide-content">
                <h2>Both Limits Infinite</h2>
                <div class="formula-box">
                    \( \displaystyle\int_{-\infty}^{\infty} f(x) \, dx = \int_{-\infty}^{c} f(x) \, dx + \int_{c}^{\infty} f(x) \, dx \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 1.5rem;">
                    <strong>Both</strong> integrals must converge for the whole integral to converge.
                </p>
                <p style="font-size: 1.5rem; margin-top: 1rem;">
                    The choice of \(c\) doesn't matter (often use \(c = 0\)).
                </p>
            </div>
        </div>

        <!-- Type 2 Definition -->
        <div class="slide slide-statement" data-slide="9" data-title="Type 2 Definition">
            <div class="slide-content">
                <h2>Type 2: Discontinuous Integrand</h2>
                <p style="font-size: 1.5rem; margin-bottom: 1rem;">
                    If \( f(x) \) is discontinuous at \( x = a \):
                </p>
                <div class="formula-box" style="font-size: 2rem;">
                    \( \displaystyle\int_a^{b} f(x) \, dx = \lim_{t \to a^+} \int_t^{b} f(x) \, dx \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem; color: #64748b;">
                    Similarly for discontinuity at \( b \) or interior point.
                </p>
            </div>
        </div>

        <!-- Type 2 Example -->
        <div class="slide slide-content" data-slide="10" data-title="Type 2 Example">
            <div class="slide-content">
                <h2>Example: \( \displaystyle\int_0^{1} \frac{1}{\sqrt{x}} \, dx \)</h2>
                <p style="font-size: 1.5rem;">Discontinuous at \( x = 0 \):</p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( \lim_{t \to 0^+} \int_t^{1} x^{-1/2} \, dx = \lim_{t \to 0^+} [2\sqrt{x}]_t^{1} \)
                </div>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( = \lim_{t \to 0^+} (2 - 2\sqrt{t}) = 2 - 0 = 2 \)
                </div>
                <p style="font-size: 1.75rem; margin-top: 1.5rem;">
                    The integral <span class="converge">converges to 2</span>.
                </p>
            </div>
        </div>

        <!-- Interior Discontinuity -->
        <div class="slide slide-content" data-slide="11" data-title="Interior Discontinuity">
            <div class="slide-content">
                <h2>Discontinuity Inside the Interval</h2>
                <p style="font-size: 1.5rem;">
                    \( \displaystyle\int_{-1}^{1} \frac{1}{x^2} \, dx \) — discontinuous at \( x = 0 \)
                </p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( = \int_{-1}^{0} \frac{1}{x^2} \, dx + \int_{0}^{1} \frac{1}{x^2} \, dx \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 1rem;">
                    Check: \( \displaystyle\int_{0}^{1} \frac{1}{x^2} \, dx = \lim_{t \to 0^+} [-\frac{1}{x}]_t^1 = -1 + \infty = \infty \)
                </p>
                <p style="font-size: 1.75rem; margin-top: 1rem;">
                    The integral <span class="diverge">diverges</span>.
                </p>
            </div>
        </div>

        <!-- Comparison Test -->
        <div class="slide slide-content" data-slide="12" data-title="Comparison Test">
            <div class="slide-content">
                <h2>Comparison Test for Improper Integrals</h2>
                <p style="font-size: 1.5rem;">
                    If \( 0 \leq f(x) \leq g(x) \) for all \( x \geq a \):
                </p>
                <div class="example-box" style="font-size: 1.5rem;">
                    <p>• If \( \int_a^{\infty} g(x) \, dx \) <span class="converge">converges</span>, then \( \int_a^{\infty} f(x) \, dx \) <span class="converge">converges</span></p>
                    <p style="margin-top: 1rem;">• If \( \int_a^{\infty} f(x) \, dx \) <span class="diverge">diverges</span>, then \( \int_a^{\infty} g(x) \, dx \) <span class="diverge">diverges</span></p>
                </div>
            </div>
        </div>

        <!-- Comparison Example -->
        <div class="slide slide-content" data-slide="13" data-title="Comparison Example">
            <div class="slide-content">
                <h2>Example: Comparison Test</h2>
                <p style="font-size: 1.5rem;">
                    Does \( \displaystyle\int_1^{\infty} e^{-x^2} \, dx \) converge?
                </p>
                <p style="font-size: 1.5rem; margin-top: 1rem;">
                    For \( x \geq 1 \): \( x^2 \geq x \), so \( e^{-x^2} \leq e^{-x} \)
                </p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( \int_1^{\infty} e^{-x} \, dx = [-e^{-x}]_1^{\infty} = 0 + e^{-1} = \frac{1}{e} \) <span class="converge">(converges)</span>
                </div>
                <p style="font-size: 1.5rem; margin-top: 1rem;">
                    Since \( e^{-x^2} \leq e^{-x} \) and \( \int e^{-x} \) converges,
                </p>
                <p style="font-size: 1.75rem; margin-top: 0.5rem;">
                    \( \int_1^{\infty} e^{-x^2} \, dx \) also <span class="converge">converges</span>.
                </p>
            </div>
        </div>

        <!-- Practice 1 -->
        <div class="slide slide-exercise" data-slide="14" data-title="Practice 1">
            <div class="slide-content">
                <h2>Practice Problem 1</h2>
                <p style="font-size: 1.75rem; margin-bottom: 2rem;">
                    Evaluate: \( \displaystyle\int_2^{\infty} \frac{1}{x \ln^2 x} \, dx \)
                </p>
                <div class="example-box">
                    <p style="font-size: 1.5rem;"><strong>Hint:</strong> Use substitution \( u = \ln x \)</p>
                </div>
            </div>
        </div>

        <!-- Practice 2 -->
        <div class="slide slide-exercise" data-slide="15" data-title="Practice 2">
            <div class="slide-content">
                <h2>Practice Problem 2</h2>
                <p style="font-size: 1.75rem; margin-bottom: 2rem;">
                    Determine if this integral converges or diverges:
                </p>
                <p style="font-size: 1.75rem;">
                    \( \displaystyle\int_0^{1} \frac{1}{x^{2/3}} \, dx \)
                </p>
                <p style="font-size: 1.5rem; color: #64748b; margin-top: 2rem;">
                    Hint: This is Type 2 — discontinuous at \( x = 0 \)
                </p>
            </div>
        </div>

        <!-- Practice 3 -->
        <div class="slide slide-exercise" data-slide="16" data-title="Practice 3">
            <div class="slide-content">
                <h2>Practice Problem 3</h2>
                <p style="font-size: 1.75rem; margin-bottom: 2rem;">
                    Use the Comparison Test to determine convergence:
                </p>
                <p style="font-size: 1.75rem;">
                    \( \displaystyle\int_1^{\infty} \frac{1}{x^3 + 1} \, dx \)
                </p>
                <p style="font-size: 1.5rem; color: #64748b; margin-top: 2rem;">
                    Compare to \( \frac{1}{x^3} \)
                </p>
            </div>
        </div>

        <!-- Exit Ticket -->
        <div class="slide slide-statement" data-slide="17" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    1. What makes an integral "improper"?
                </p>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    2. For what values of \( p \) does \( \int_1^{\infty} \frac{1}{x^p} \, dx \) converge?
                </p>
                <p style="font-size: 1.5rem;">
                    3. Evaluate \( \displaystyle\int_0^{\infty} e^{-2x} \, dx \)
                </p>
            </div>
        </div>

        <!-- Closing -->
        <div class="slide slide-title" data-slide="18" data-title="Closing">
            <div class="slide-content">
                <h2>Key Takeaways</h2>
                <p style="font-size: 1.5rem; text-align: left; max-width: 800px; margin: 0 auto;">
                    • Improper integrals have infinite limits or discontinuous integrands<br><br>
                    • Evaluate as a limit of proper integrals<br><br>
                    • p-integral: \( \int_1^{\infty} \frac{1}{x^p} \) converges iff \( p > 1 \)<br><br>
                    • Comparison Test: bound by known convergent/divergent integrals<br><br>
                    • Always check for hidden discontinuities!
                </p>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Navigation -->
    <div class="nav-arrows">
        <button class="nav-arrow" id="prevBtn">←</button>
        <span class="slide-counter"><span id="currentSlide">1</span>/<span id="totalSlides">19</span></span>
        <button class="nav-arrow" id="nextBtn">→</button>
    </div>

    <script src="../shared/presentation.js"></script>
    <script>
        // Convergence visualization
        function drawConvergenceViz() {
            const container = document.getElementById('convergence-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 30, bottom: 50, left: 60 };
            const innerWidth = width - margin.left - margin.right;
            const innerHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const xScale = d3.scaleLinear().domain([0, 6]).range([0, innerWidth]);
            const yScale = d3.scaleLinear().domain([0, 1.2]).range([innerHeight, 0]);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${innerHeight})`)
                .call(d3.axisBottom(xScale))
                .style('font-size', '1rem');

            g.append('g')
                .call(d3.axisLeft(yScale))
                .style('font-size', '1rem');

            // Function y = 1/x^2
            const f = x => x > 0.1 ? 1 / (x * x) : 10;
            const line = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(f(d)));

            const xVals = d3.range(0.5, 6, 0.05);

            // Shaded area from 1 to infinity (approximated to 6)
            const areaData = d3.range(1, 6, 0.05);
            const area = d3.area()
                .x(d => xScale(d))
                .y0(innerHeight)
                .y1(d => yScale(f(d)));

            g.append('path')
                .datum(areaData)
                .attr('fill', '#fef3c7')
                .attr('stroke', 'none')
                .attr('opacity', 0.8)
                .attr('d', area);

            // Curve
            g.append('path')
                .datum(xVals)
                .attr('fill', 'none')
                .attr('stroke', '#d4a028')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Labels
            g.append('text')
                .attr('x', innerWidth / 2)
                .attr('y', innerHeight + 40)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('x');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('x', -innerHeight / 2)
                .attr('y', -45)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('y = 1/x²');

            // Area label
            g.append('text')
                .attr('x', xScale(2.5))
                .attr('y', yScale(0.3))
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.5rem')
                .attr('fill', '#b8860b')
                .text('Area = 1');
        }

        // Trigger on slide change
        const originalGoToSlide = window.Presentation.goToSlide;
        window.Presentation.goToSlide = function(n) {
            originalGoToSlide(n);
            if (n === 5) setTimeout(drawConvergenceViz, 300);
        };

        // Draw if starting on visualization slide
        if (window.Presentation.currentSlide === 5) {
            setTimeout(drawConvergenceViz, 300);
        }
    </script>
</body>
</html>
