<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 61: Taylor Polynomials | AP Calculus BC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --theme-color: #4f46e5;
            --theme-color-light: #6366f1;
            --color-function: #60a5fa;
            --color-polynomial: #4f46e5;
            --color-tangent: #fbbf24;
            --color-integral: #22c55e;
        }

        /* BC-Only Badge */
        .bc-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--theme-color), var(--theme-color-light));
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 0.5rem;
            vertical-align: middle;
        }

        /* Formula Box */
        .formula-box {
            background: var(--bg-secondary);
            border: 3px solid #d4a028;
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem auto;
            max-width: 800px;
            text-align: center;
        }

        .formula-box .formula-main {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .formula-box .formula-expanded {
            font-size: 1.5rem;
            color: var(--text-secondary);
        }

        /* Derivative Table */
        .derivative-table {
            width: 100%;
            max-width: 600px;
            margin: 1rem auto;
            border-collapse: collapse;
            font-size: 1.25rem;
        }

        .derivative-table th,
        .derivative-table td {
            padding: 0.75rem 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .derivative-table th {
            background: var(--bg-secondary);
            font-family: var(--font-display);
            font-weight: 600;
        }

        .derivative-table .pattern {
            color: var(--theme-color);
            font-weight: 600;
        }

        /* Step List */
        .step-list {
            list-style: none;
            margin: 1rem 0;
            padding: 0;
        }

        .step-list li {
            padding: 0.75rem 0;
            font-size: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .step-list li::before {
            content: counter(step);
            counter-increment: step;
            background: var(--theme-color);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .step-list {
            counter-reset: step;
        }

        /* Visualization Controls */
        .viz-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .viz-controls label {
            font-size: 1.25rem;
            font-family: var(--font-display);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .viz-controls select,
        .viz-controls input[type="range"] {
            font-size: 1.1rem;
            padding: 0.25rem 0.5rem;
        }

        .viz-controls input[type="range"] {
            width: 150px;
            height: 8px;
            -webkit-appearance: none;
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        .viz-controls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--theme-color);
            border-radius: 50%;
            cursor: pointer;
        }

        .viz-controls .value-display {
            font-family: var(--font-mono);
            color: var(--theme-color);
            min-width: 3rem;
        }

        /* Calculation Steps */
        .calc-steps {
            text-align: left;
            max-width: 700px;
            margin: 1rem auto;
        }

        .calc-steps .step {
            padding: 0.5rem 0;
            font-size: 1.5rem;
        }

        .calc-steps .result {
            color: var(--theme-color);
            font-weight: 600;
            font-size: 1.75rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid var(--bg-tertiary);
        }

        .check-mark {
            color: var(--color-integral);
        }

        /* Exercise prompts */
        .exercise-problems {
            text-align: left;
            max-width: 700px;
            margin: 1rem auto;
        }

        .exercise-problems li {
            padding: 0.75rem 0;
            font-size: 1.5rem;
        }

        /* Animation buttons */
        .animation-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .animation-controls button {
            background: var(--theme-color);
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            font-size: 1.25rem;
            font-family: var(--font-display);
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .animation-controls button:hover {
            background: var(--theme-color-light);
        }

        .animation-controls button:disabled {
            background: var(--bg-tertiary);
            cursor: not-allowed;
        }

        /* Degree display */
        .degree-display {
            font-size: 1.5rem;
            font-family: var(--font-mono);
            color: var(--theme-color);
            text-align: center;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Slide 0: Title -->
        <div class="slide slide-title" data-slide="0" data-section="Opening" data-title="Taylor Polynomials">
            <div class="slide-content">
                <div class="unit-badge">Unit 10: Infinite Sequences and Series</div>
                <h1>Taylor Polynomials<span class="bc-badge">BC Only</span></h1>
                <p class="subtitle">Approximating Functions with Polynomials</p>
                <p class="meta">Class 61 | CED 10.11 | NCSSM</p>
            </div>
        </div>

        <!-- Slide 1: Opening Challenge -->
        <div class="slide slide-exercise" data-slide="1" data-section="Opening" data-title="Challenge">
            <div class="slide-content">
                <h2>Challenge</h2>
                <div class="prompt">
                    <p style="font-size: 2rem;">Calculate \(\cos(0.1)\) without a calculator</p>
                </div>
                <p class="caption" style="margin-top: 2rem; font-size: 1.5rem;">This is hard! Cosine is a <em>transcendental</em> function&mdash;no finite algebraic formula.</p>
            </div>
        </div>

        <!-- Slide 2: The Big Idea -->
        <div class="slide slide-statement" data-slide="2" data-section="Opening" data-title="The Big Idea">
            <div class="slide-content">
                <p class="statement">Polynomials are easy&mdash;they only require \(+\), \(-\), \(\times\)</p>
                <p class="secondary" style="margin-top: 2rem; font-size: 1.75rem;">What if we could approximate \(\cos(x)\) with a polynomial?</p>
                <p class="secondary" style="margin-top: 1.5rem; color: var(--theme-color); font-size: 1.5rem;">Goal: Find the polynomial that best approximates a function near a point</p>
            </div>
        </div>

        <!-- Slide 3: Why Polynomials? -->
        <div class="slide slide-list" data-slide="3" data-section="Motivation" data-title="Why Polynomials?">
            <div class="slide-content">
                <h2>Why Polynomial Approximations?</h2>
                <ul>
                    <li>Transcendental functions (\(\cos\), \(e^x\), \(\ln\)) can't be computed exactly</li>
                    <li>Polynomials only need addition, subtraction, multiplication</li>
                    <li>Easy to evaluate, differentiate, integrate</li>
                    <li>Calculators and computers use polynomial approximations!</li>
                </ul>
            </div>
        </div>

        <!-- Slide 4: The Strategy -->
        <div class="slide slide-statement" data-slide="4" data-section="Motivation" data-title="The Strategy">
            <div class="slide-content">
                <p class="statement">Strategy: Match the function and its derivatives at a point</p>
                <p style="font-size: 1.75rem; margin-top: 2rem;">Make \(P_n(a) = f(a)\), \(P_n'(a) = f'(a)\), \(P_n''(a) = f''(a)\), ...</p>
                <p class="caption" style="margin-top: 2rem;">The more derivatives we match, the better the approximation near \(x = a\)</p>
            </div>
        </div>

        <!-- Slide 5: Degree 0 -->
        <div class="slide slide-visual" data-slide="5" data-section="Building Taylor" data-title="Degree 0">
            <div class="slide-content">
                <h2>Degree 0: Match the Value</h2>
                <p style="font-size: 1.5rem;">Goal: \(P_0(a) = f(a)\) &rarr; Solution: \(P_0(x) = f(a)\) (a constant)</p>
                <div id="degree0-viz" class="visualization"></div>
                <p class="caption">Matches value at center, but ignores all slope/curvature information</p>
            </div>
        </div>

        <!-- Slide 6: Degree 1 -->
        <div class="slide slide-visual" data-slide="6" data-section="Building Taylor" data-title="Degree 1">
            <div class="slide-content">
                <h2>Degree 1: Match Value and Slope</h2>
                <p style="font-size: 1.5rem;">Goals: \(P_1(a) = f(a)\) and \(P_1'(a) = f'(a)\)</p>
                <p style="font-size: 1.5rem; color: var(--theme-color);">Solution: \(P_1(x) = f(a) + f'(a)(x-a)\)</p>
                <p style="font-size: 1.25rem; margin-top: 0.5rem;">This is the <strong>tangent line</strong> (linearization from Unit 4)!</p>
                <div id="degree1-viz" class="visualization"></div>
            </div>
        </div>

        <!-- Slide 7: Degree 2 -->
        <div class="slide slide-visual" data-slide="7" data-section="Building Taylor" data-title="Degree 2">
            <div class="slide-content">
                <h2>Degree 2: Add Curvature</h2>
                <div class="calc-steps">
                    <div class="step">Try: \(P_2(x) = f(a) + f'(a)(x-a) + c(x-a)^2\)</div>
                    <div class="step">Differentiate twice: \(P_2''(x) = 2c\)</div>
                    <div class="step">Match: \(2c = f''(a)\), so \(c = \dfrac{f''(a)}{2}\)</div>
                    <div class="result">$$P_2(x) = f(a) + f'(a)(x-a) + \frac{f''(a)}{2}(x-a)^2$$</div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Why the Factorial? -->
        <div class="slide slide-visual" data-slide="8" data-section="Building Taylor" data-title="Why Factorials?">
            <div class="slide-content">
                <h2>Why Factorials Appear</h2>
                <div class="calc-steps">
                    <div class="step">For \((x-a)^n\) with coefficient \(c_n\):</div>
                    <div class="step">Differentiating \(n\) times gives \(n! \cdot c_n\)</div>
                    <div class="step">We want this to equal \(f^{(n)}(a)\)</div>
                    <div class="result">$$c_n = \frac{f^{(n)}(a)}{n!}$$</div>
                </div>
                <p class="caption" style="margin-top: 1rem;">The \(n!\) comes from differentiating \((x-a)^n\) repeatedly</p>
            </div>
        </div>

        <!-- Slide 9: The Taylor Polynomial Formula -->
        <div class="slide slide-visual" data-slide="9" data-section="Formula" data-title="Taylor Formula">
            <div class="slide-content">
                <h2>The Taylor Polynomial Formula</h2>
                <div class="formula-box">
                    <div class="formula-main">$$P_n(x) = \sum_{k=0}^{n} \frac{f^{(k)}(a)}{k!}(x-a)^k$$</div>
                    <div class="formula-expanded">$$= f(a) + f'(a)(x-a) + \frac{f''(a)}{2!}(x-a)^2 + \cdots + \frac{f^{(n)}(a)}{n!}(x-a)^n$$</div>
                </div>
            </div>
        </div>

        <!-- Slide 10: Maclaurin Polynomials -->
        <div class="slide slide-two-part" data-slide="10" data-section="Formula" data-title="Maclaurin">
            <div class="slide-content">
                <p class="primary">A <strong>Maclaurin polynomial</strong> is a Taylor polynomial centered at \(a = 0\)</p>
                <p style="font-size: 2rem; margin: 1.5rem 0;">$$P_n(x) = \sum_{k=0}^{n} \frac{f^{(k)}(0)}{k!}x^k$$</p>
                <p class="secondary">Maclaurin = Taylor with \(a = 0\)</p>
                <p class="caption" style="margin-top: 1rem;">Same concept, just a special case with simpler notation</p>
            </div>
        </div>

        <!-- Slide 11: Example 1 - e^x -->
        <div class="slide slide-example" data-slide="11" data-section="Worked Examples" data-title="Example: e^x">
            <div class="slide-content">
                <h2>Example 1: \(e^x\) (Maclaurin)</h2>
                <div class="calc-steps">
                    <div class="step">Function: \(f(x) = e^x\)</div>
                    <div class="step">Derivatives: \(f^{(n)}(x) = e^x\) for all \(n\)</div>
                    <div class="step">At \(x = 0\): \(f^{(n)}(0) = e^0 = 1\) for all \(n\)</div>
                    <div class="result">$$P_n(x) = 1 + x + \frac{x^2}{2!} + \frac{x^3}{3!} + \cdots + \frac{x^n}{n!}$$</div>
                </div>
            </div>
        </div>

        <!-- Slide 12: Approximating e^0.1 -->
        <div class="slide slide-example" data-slide="12" data-section="Worked Examples" data-title="Approximate e^0.1">
            <div class="slide-content">
                <h2>Application: Approximate \(e^{0.1}\)</h2>
                <div class="calc-steps">
                    <div class="step">Using \(P_4(x)\):</div>
                    <div class="step">\(P_4(0.1) = 1 + 0.1 + \dfrac{0.01}{2} + \dfrac{0.001}{6} + \dfrac{0.0001}{24}\)</div>
                    <div class="step">\(= 1 + 0.1 + 0.005 + 0.000167 + 0.0000042\)</div>
                    <div class="step">\(\approx 1.1052\)</div>
                    <div class="result">Calculator gives \(e^{0.1} \approx 1.10517\) <span class="check-mark">&#10003;</span></div>
                </div>
            </div>
        </div>

        <!-- Slide 13: Example 2 - cos(x) -->
        <div class="slide slide-visual" data-slide="13" data-section="Worked Examples" data-title="Example: cos(x)">
            <div class="slide-content">
                <h2>Example 2: \(\cos(x)\) (Maclaurin)</h2>
                <table class="derivative-table">
                    <thead>
                        <tr><th>\(n\)</th><th>\(f^{(n)}(x)\)</th><th>\(f^{(n)}(0)\)</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>0</td><td>\(\cos x\)</td><td class="pattern">1</td></tr>
                        <tr><td>1</td><td>\(-\sin x\)</td><td class="pattern">0</td></tr>
                        <tr><td>2</td><td>\(-\cos x\)</td><td class="pattern">-1</td></tr>
                        <tr><td>3</td><td>\(\sin x\)</td><td class="pattern">0</td></tr>
                        <tr><td>4</td><td>\(\cos x\)</td><td class="pattern">1</td></tr>
                    </tbody>
                </table>
                <p style="font-size: 1.5rem; margin-top: 1rem;">Pattern: \(1, 0, -1, 0, 1, 0, -1, 0, \ldots\)</p>
                <p style="font-size: 1.5rem; color: var(--theme-color);">$$P_6(x) = 1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!}$$</p>
                <p class="caption">Only even powers (cosine is an even function!)</p>
            </div>
        </div>

        <!-- Slide 14: Approximating cos(0.5) -->
        <div class="slide slide-example" data-slide="14" data-section="Worked Examples" data-title="Approximate cos(0.5)">
            <div class="slide-content">
                <h2>Application: Approximate \(\cos(0.5)\)</h2>
                <div class="calc-steps">
                    <div class="step">Using \(P_4(x) = 1 - \dfrac{x^2}{2} + \dfrac{x^4}{24}\):</div>
                    <div class="step">\(P_4(0.5) = 1 - \dfrac{0.25}{2} + \dfrac{0.0625}{24}\)</div>
                    <div class="step">\(= 1 - 0.125 + 0.0026\)</div>
                    <div class="step">\(\approx 0.8776\)</div>
                    <div class="result">Calculator gives \(\cos(0.5) \approx 0.8776\) <span class="check-mark">&#10003;</span></div>
                </div>
            </div>
        </div>

        <!-- Slide 15: Example 3 - ln(x) -->
        <div class="slide slide-visual" data-slide="15" data-section="Worked Examples" data-title="Example: ln(x)">
            <div class="slide-content">
                <h2>Example 3: \(\ln(x)\) centered at \(a = 1\)</h2>
                <table class="derivative-table">
                    <thead>
                        <tr><th>\(n\)</th><th>\(f^{(n)}(x)\)</th><th>\(f^{(n)}(1)\)</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>0</td><td>\(\ln x\)</td><td class="pattern">0</td></tr>
                        <tr><td>1</td><td>\(1/x\)</td><td class="pattern">1</td></tr>
                        <tr><td>2</td><td>\(-1/x^2\)</td><td class="pattern">-1</td></tr>
                        <tr><td>3</td><td>\(2/x^3\)</td><td class="pattern">2</td></tr>
                        <tr><td>4</td><td>\(-6/x^4\)</td><td class="pattern">-6</td></tr>
                    </tbody>
                </table>
                <p style="font-size: 1.5rem; color: var(--theme-color); margin-top: 1rem;">$$P_4(x) = (x-1) - \frac{(x-1)^2}{2} + \frac{(x-1)^3}{3} - \frac{(x-1)^4}{4}$$</p>
                <p class="caption">Center at \(a = 1\) because \(\ln(0)\) is undefined</p>
            </div>
        </div>

        <!-- Slide 16: Example 4 - sin(x) -->
        <div class="slide slide-example" data-slide="16" data-section="Worked Examples" data-title="Example: sin(x)">
            <div class="slide-content">
                <h2>Example 4: \(\sin(x)\) (Maclaurin)</h2>
                <div class="calc-steps">
                    <div class="step">Derivatives at 0: \(0, 1, 0, -1, 0, 1, 0, -1, \ldots\)</div>
                    <div class="result">$$P_7(x) = x - \frac{x^3}{3!} + \frac{x^5}{5!} - \frac{x^7}{7!}$$</div>
                </div>
                <p class="caption" style="margin-top: 1rem;">Only odd powers (sine is an odd function!)</p>
            </div>
        </div>

        <!-- Slide 17: Interactive Taylor Polynomial Grapher -->
        <div class="slide slide-visual" data-slide="17" data-section="Visualization" data-title="Interactive Grapher">
            <div class="slide-content">
                <h2>Interactive: Taylor Polynomial Approximation</h2>
                <div class="viz-controls">
                    <label>Function:
                        <select id="function-select">
                            <option value="exp">e^x</option>
                            <option value="sin">sin(x)</option>
                            <option value="cos" selected>cos(x)</option>
                            <option value="ln">ln(x) at a=1</option>
                        </select>
                    </label>
                    <label>Degree n:
                        <input type="range" id="degree-slider" min="0" max="10" value="4">
                        <span class="value-display" id="degree-display">4</span>
                    </label>
                </div>
                <div id="taylor-grapher-viz" class="visualization"></div>
                <p class="caption">The polynomial "hugs" the function near the center</p>
            </div>
        </div>

        <!-- Slide 18: Progressive Approximation -->
        <div class="slide slide-visual" data-slide="18" data-section="Visualization" data-title="Progressive Approximation">
            <div class="slide-content">
                <h2>Progressive Approximation</h2>
                <div id="progressive-viz" class="visualization"></div>
                <div class="animation-controls">
                    <button id="play-animation">Play Animation</button>
                    <button id="reset-animation">Reset</button>
                </div>
                <p class="degree-display" id="current-degree">Degree: 0</p>
                <p class="caption">Higher degree = better fit near center, but approximation degrades far from center</p>
            </div>
        </div>

        <!-- Slide 19: Approximation Quality -->
        <div class="slide slide-visual" data-slide="19" data-section="Insights" data-title="Approximation Quality">
            <div class="slide-content">
                <h2>Where Approximations Are Good</h2>
                <div style="max-width: 700px; margin: 0 auto; text-align: left;">
                    <p style="font-size: 1.5rem; padding: 1rem 0;"><span style="color: var(--color-integral); font-weight: 600;">Near \(x = a\):</span> Very accurate</p>
                    <p style="font-size: 1.5rem; padding: 1rem 0;"><span style="color: #e11d48; font-weight: 600;">Far from \(x = a\):</span> Can be wildly off</p>
                    <p style="font-size: 1.5rem; padding: 1rem 0;"><span style="color: var(--theme-color); font-weight: 600;">Higher degree:</span> Helps near center, may not help far away</p>
                </div>
                <p class="caption" style="margin-top: 2rem; font-size: 1.5rem; color: var(--theme-color);">Taylor polynomials are <strong>local</strong> approximations</p>
            </div>
        </div>

        <!-- Slide 20: Common Mistakes -->
        <div class="slide slide-list" data-slide="20" data-section="Cautions" data-title="Common Mistakes">
            <div class="slide-content">
                <h2>Common Mistakes</h2>
                <ul>
                    <li><strong>Forgetting \((x-a)\) form:</strong> Terms are powers of \((x-a)\), not \(x\) (unless \(a = 0\))</li>
                    <li><strong>Factorial errors:</strong> Denominator is \(k!\) for the \(k\)th term</li>
                    <li><strong>Derivative errors:</strong> Carefully track signs (especially for \(\sin\), \(\cos\))</li>
                    <li><strong>Thinking polynomial equals function:</strong> It's an approximation!</li>
                </ul>
            </div>
        </div>

        <!-- Slide 21: Practice Problem -->
        <div class="slide slide-exercise" data-slide="21" data-section="Practice" data-title="Practice">
            <div class="slide-content">
                <h2>Practice</h2>
                <div class="prompt">
                    <ol class="exercise-problems">
                        <li>Write the degree-3 Maclaurin polynomial for \(f(x) = e^x\)</li>
                        <li>Find \(P_2(x)\) for \(f(x) = \sqrt{x}\) centered at \(a = 4\)</li>
                        <li>Why does the factorial \(n!\) appear in the denominator?</li>
                    </ol>
                </div>
                <p class="caption" style="margin-top: 2rem;">4 minutes</p>
            </div>
        </div>

        <!-- Slide 22: Practice Solutions -->
        <div class="slide slide-list" data-slide="22" data-section="Practice" data-title="Solutions">
            <div class="slide-content">
                <h2>Solutions</h2>
                <ul>
                    <li><strong>1.</strong> \(P_3(x) = 1 + x + \dfrac{x^2}{2} + \dfrac{x^3}{6}\)</li>
                    <li><strong>2.</strong> \(f(4) = 2\), \(f'(4) = \dfrac{1}{4}\), \(f''(4) = -\dfrac{1}{32}\). So \(P_2(x) = 2 + \dfrac{1}{4}(x-4) - \dfrac{1}{64}(x-4)^2\)</li>
                    <li><strong>3.</strong> When we differentiate \((x-a)^n\) \(n\) times, we get \(n!\). The factorial cancels this to give \(f^{(n)}(a)\).</li>
                </ul>
            </div>
        </div>

        <!-- Slide 23: Key Takeaways -->
        <div class="slide slide-list" data-slide="23" data-section="Summary" data-title="Key Takeaways">
            <div class="slide-content">
                <h2>Key Takeaways</h2>
                <ul>
                    <li>Taylor polynomial: matches \(f\) and its first \(n\) derivatives at \(a\)</li>
                    <li>Formula: \(P_n(x) = \displaystyle\sum_{k=0}^{n} \frac{f^{(k)}(a)}{k!}(x-a)^k\)</li>
                    <li>Maclaurin: Taylor centered at \(a = 0\)</li>
                    <li>Factorials arise from differentiating \((x-a)^n\)</li>
                    <li>Approximation is best <strong>near the center</strong></li>
                </ul>
            </div>
        </div>

        <!-- Slide 24: Exit Ticket -->
        <div class="slide slide-exercise" data-slide="24" data-section="Closing" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <div class="prompt">
                    <ol class="exercise-problems">
                        <li>Write the degree-4 Maclaurin polynomial for \(\cos(x)\).</li>
                        <li>What is the coefficient of \((x-1)^3\) in the Taylor polynomial for \(\ln(x)\) at \(a = 1\)?</li>
                        <li>If a Taylor polynomial has degree 5, how many derivatives at \(a\) does it match?</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Slide 25: Coming Up -->
        <div class="slide slide-statement" data-slide="25" data-section="Closing" data-title="Coming Up">
            <div class="slide-content">
                <p class="statement">Next: Taylor and Maclaurin Series</p>
                <p class="secondary" style="margin-top: 2rem; font-size: 1.75rem;">What happens when we let \(n \to \infty\)?</p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>

        <!-- Slide Counter -->
        <div class="slide-counter">1 / 26</div>

        <!-- Keyboard Hint -->
        <div class="keyboard-hint">
            <kbd>&larr;</kbd> <kbd>&rarr;</kbd> Navigate | <kbd>T</kbd> TOC | <kbd>S</kbd> Syllabus | <kbd>F</kbd> Fullscreen
        </div>

        <!-- Overlay Backdrop -->
        <div id="overlay-backdrop" class="overlay-backdrop"></div>

        <!-- TOC Overlay -->
        <div id="toc-overlay" class="toc-overlay">
            <button id="toc-close" class="toc-close">&times;</button>
            <div class="toc-header">
                <h3>Table of Contents</h3>
                <div class="class-info">Class 61: Taylor Polynomials</div>
            </div>
            <div id="toc-content" class="toc-content"></div>
            <div class="toc-footer">
                <a href="../index.html">&larr; Back to Course Syllabus</a>
            </div>
        </div>

        <!-- Appendix Overlay -->
        <div id="appendix-overlay" class="appendix-overlay">
            <div class="appendix-header">
                <h3>Appendix</h3>
                <button id="appendix-close" class="appendix-close">&times;</button>
            </div>
            <div id="appendix-content" class="appendix-content"></div>
            <div class="appendix-nav">
                <button id="appendix-prev" class="appendix-nav-btn">&larr; Prev</button>
                <span id="appendix-counter" class="appendix-counter">1 / 1</span>
                <button id="appendix-next" class="appendix-nav-btn">Next &rarr;</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="../shared/presentation.js"></script>
    <script>
        // ===== Function definitions for Taylor polynomials =====
        const functions = {
            exp: {
                f: x => Math.exp(x),
                derivatives: n => 1, // All derivatives of e^x at x=0 are 1
                center: 0,
                domain: [-2, 3],
                range: [-1, 8],
                label: 'e^x'
            },
            sin: {
                f: x => Math.sin(x),
                derivatives: n => {
                    const cycle = [0, 1, 0, -1];
                    return cycle[n % 4];
                },
                center: 0,
                domain: [-4, 4],
                range: [-2, 2],
                label: 'sin(x)'
            },
            cos: {
                f: x => Math.cos(x),
                derivatives: n => {
                    const cycle = [1, 0, -1, 0];
                    return cycle[n % 4];
                },
                center: 0,
                domain: [-4, 4],
                range: [-2, 2],
                label: 'cos(x)'
            },
            ln: {
                f: x => x > 0 ? Math.log(x) : NaN,
                derivatives: n => {
                    if (n === 0) return 0;
                    return Math.pow(-1, n + 1) * factorial(n - 1);
                },
                center: 1,
                domain: [0.1, 3],
                range: [-3, 2],
                label: 'ln(x)'
            }
        };

        function factorial(n) {
            if (n <= 1) return 1;
            return n * factorial(n - 1);
        }

        function taylorPolynomial(func, n, x) {
            const a = func.center;
            let sum = 0;
            for (let k = 0; k <= n; k++) {
                const coef = func.derivatives(k) / factorial(k);
                sum += coef * Math.pow(x - a, k);
            }
            return sum;
        }

        // ===== Degree 0 Visualization (Slide 5) =====
        function drawDegree0() {
            const container = document.getElementById('degree0-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 600;
            const height = 350;
            const margin = { top: 30, right: 40, bottom: 50, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const xScale = d3.scaleLinear().domain([-Math.PI, Math.PI]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([-1.5, 1.5]).range([plotHeight, 0]);

            // Grid
            g.selectAll('line.hgrid')
                .data(d3.range(-1.5, 2, 0.5))
                .enter()
                .append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640').attr('stroke-width', 1);

            g.selectAll('line.vgrid')
                .data(d3.range(-3, 4, 1))
                .enter()
                .append('line')
                .attr('x1', d => xScale(d)).attr('x2', d => xScale(d))
                .attr('y1', 0).attr('y2', plotHeight)
                .attr('stroke', '#1c2640').attr('stroke-width', 1);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${yScale(0)})`)
                .call(d3.axisBottom(xScale).ticks(7))
                .selectAll('text').attr('font-size', '1.25rem').attr('fill', '#b8c4d6');

            g.append('g')
                .attr('transform', `translate(${xScale(0)},0)`)
                .call(d3.axisLeft(yScale).ticks(5))
                .selectAll('text').attr('font-size', '1.25rem').attr('fill', '#b8c4d6');

            // cos(x) curve
            const line = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(Math.cos(d)))
                .curve(d3.curveCatmullRom);

            const xValues = d3.range(-Math.PI, Math.PI, 0.05);

            g.append('path')
                .datum(xValues)
                .attr('fill', 'none')
                .attr('stroke', '#60a5fa')
                .attr('stroke-width', 3)
                .attr('d', line);

            // P_0(x) = 1 (horizontal line)
            g.append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', yScale(1)).attr('y2', yScale(1))
                .attr('stroke', '#4f46e5')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '8,4');

            // Center point
            g.append('circle')
                .attr('cx', xScale(0))
                .attr('cy', yScale(1))
                .attr('r', 8)
                .attr('fill', '#fbbf24');

            // Labels
            g.append('text')
                .attr('x', xScale(2.5))
                .attr('y', yScale(Math.cos(2.5)) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#60a5fa')
                .text('f(x) = cos(x)');

            g.append('text')
                .attr('x', plotWidth - 80)
                .attr('y', yScale(1) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#4f46e5')
                .text('P_0(x) = 1');
        }

        // ===== Degree 1 Visualization (Slide 6) =====
        function drawDegree1() {
            const container = document.getElementById('degree1-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 600;
            const height = 300;
            const margin = { top: 30, right: 40, bottom: 50, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const xScale = d3.scaleLinear().domain([-Math.PI, Math.PI]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([-1.5, 1.5]).range([plotHeight, 0]);

            // Grid
            g.selectAll('line.hgrid')
                .data(d3.range(-1.5, 2, 0.5))
                .enter()
                .append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640').attr('stroke-width', 1);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${yScale(0)})`)
                .call(d3.axisBottom(xScale).ticks(7))
                .selectAll('text').attr('font-size', '1.25rem').attr('fill', '#b8c4d6');

            g.append('g')
                .attr('transform', `translate(${xScale(0)},0)`)
                .call(d3.axisLeft(yScale).ticks(5))
                .selectAll('text').attr('font-size', '1.25rem').attr('fill', '#b8c4d6');

            // cos(x) curve
            const line = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(Math.cos(d)))
                .curve(d3.curveCatmullRom);

            g.append('path')
                .datum(d3.range(-Math.PI, Math.PI, 0.05))
                .attr('fill', 'none')
                .attr('stroke', '#60a5fa')
                .attr('stroke-width', 3)
                .attr('d', line);

            // P_1(x) = 1 (tangent line for cos at x=0 is horizontal since cos'(0) = 0)
            g.append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', yScale(1)).attr('y2', yScale(1))
                .attr('stroke', '#4f46e5')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '8,4');

            // Center point
            g.append('circle')
                .attr('cx', xScale(0))
                .attr('cy', yScale(1))
                .attr('r', 8)
                .attr('fill', '#fbbf24');

            // Labels
            g.append('text')
                .attr('x', xScale(2))
                .attr('y', yScale(Math.cos(2)) + 20)
                .attr('font-size', '1.25rem')
                .attr('fill', '#60a5fa')
                .text('cos(x)');

            g.append('text')
                .attr('x', plotWidth - 120)
                .attr('y', yScale(1) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#4f46e5')
                .text('P_1(x) = 1 (tangent)');
        }

        // ===== Interactive Taylor Grapher (Slide 17) =====
        function drawTaylorGrapher() {
            const container = document.getElementById('taylor-grapher-viz');
            if (!container) return;

            // Clear any existing SVG
            container.innerHTML = '';

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 40, bottom: 50, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            function update() {
                const funcName = document.getElementById('function-select').value;
                const degree = parseInt(document.getElementById('degree-slider').value);
                document.getElementById('degree-display').textContent = degree;

                const func = functions[funcName];
                const xScale = d3.scaleLinear().domain(func.domain).range([0, plotWidth]);
                const yScale = d3.scaleLinear().domain(func.range).range([plotHeight, 0]);

                // Clear previous content
                g.selectAll('*').remove();

                // Grid
                g.selectAll('line.hgrid')
                    .data(d3.range(func.range[0], func.range[1] + 1, 1))
                    .enter()
                    .append('line')
                    .attr('x1', 0).attr('x2', plotWidth)
                    .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                    .attr('stroke', '#1c2640').attr('stroke-width', 1);

                g.selectAll('line.vgrid')
                    .data(d3.range(Math.floor(func.domain[0]), Math.ceil(func.domain[1]) + 1, 1))
                    .enter()
                    .append('line')
                    .attr('x1', d => xScale(d)).attr('x2', d => xScale(d))
                    .attr('y1', 0).attr('y2', plotHeight)
                    .attr('stroke', '#1c2640').attr('stroke-width', 1);

                // Axes
                if (func.range[0] < 0 && func.range[1] > 0) {
                    g.append('line')
                        .attr('x1', 0).attr('x2', plotWidth)
                        .attr('y1', yScale(0)).attr('y2', yScale(0))
                        .attr('stroke', '#3d4a63').attr('stroke-width', 2);
                }

                if (func.domain[0] < 0 && func.domain[1] > 0) {
                    g.append('line')
                        .attr('x1', xScale(0)).attr('x2', xScale(0))
                        .attr('y1', 0).attr('y2', plotHeight)
                        .attr('stroke', '#3d4a63').attr('stroke-width', 2);
                }

                // Original function
                const fLine = d3.line()
                    .x(d => xScale(d))
                    .y(d => {
                        const val = func.f(d);
                        return isNaN(val) || !isFinite(val) ? null : yScale(Math.max(func.range[0] - 1, Math.min(func.range[1] + 1, val)));
                    })
                    .defined(d => {
                        const val = func.f(d);
                        return !isNaN(val) && isFinite(val) && val >= func.range[0] - 1 && val <= func.range[1] + 1;
                    })
                    .curve(d3.curveCatmullRom);

                const xValues = d3.range(func.domain[0], func.domain[1], 0.02);

                g.append('path')
                    .datum(xValues)
                    .attr('fill', 'none')
                    .attr('stroke', '#60a5fa')
                    .attr('stroke-width', 3)
                    .attr('d', fLine);

                // Taylor polynomial
                const pLine = d3.line()
                    .x(d => xScale(d))
                    .y(d => {
                        const val = taylorPolynomial(func, degree, d);
                        return isNaN(val) || !isFinite(val) ? null : yScale(Math.max(func.range[0] - 1, Math.min(func.range[1] + 1, val)));
                    })
                    .defined(d => {
                        const val = taylorPolynomial(func, degree, d);
                        return !isNaN(val) && isFinite(val) && val >= func.range[0] - 1 && val <= func.range[1] + 1;
                    })
                    .curve(d3.curveCatmullRom);

                g.append('path')
                    .datum(xValues)
                    .attr('fill', 'none')
                    .attr('stroke', '#4f46e5')
                    .attr('stroke-width', 3)
                    .attr('stroke-dasharray', '8,4')
                    .attr('d', pLine);

                // Center point
                const centerY = func.f(func.center);
                if (!isNaN(centerY) && isFinite(centerY)) {
                    g.append('circle')
                        .attr('cx', xScale(func.center))
                        .attr('cy', yScale(centerY))
                        .attr('r', 8)
                        .attr('fill', '#fbbf24');
                }

                // Legend
                g.append('circle').attr('cx', plotWidth - 120).attr('cy', 20).attr('r', 6).attr('fill', '#60a5fa');
                g.append('text').attr('x', plotWidth - 108).attr('y', 25).attr('font-size', '1.25rem').attr('fill', '#60a5fa').text('f(x)');

                g.append('line').attr('x1', plotWidth - 130).attr('x2', plotWidth - 110).attr('y1', 45).attr('y2', 45).attr('stroke', '#4f46e5').attr('stroke-width', 3).attr('stroke-dasharray', '5,3');
                g.append('text').attr('x', plotWidth - 108).attr('y', 50).attr('font-size', '1.25rem').attr('fill', '#4f46e5').text('P_' + degree + '(x)');
            }

            // Event listeners
            document.getElementById('function-select').addEventListener('change', update);
            document.getElementById('degree-slider').addEventListener('input', update);

            update();
        }

        // ===== Progressive Approximation (Slide 18) =====
        function drawProgressiveViz() {
            const container = document.getElementById('progressive-viz');
            if (!container) return;

            container.innerHTML = '';

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 40, bottom: 50, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const func = functions.cos;
            const xScale = d3.scaleLinear().domain([-4, 4]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([-2, 2]).range([plotHeight, 0]);

            // Grid
            g.selectAll('line.hgrid')
                .data(d3.range(-2, 3, 1))
                .enter()
                .append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640').attr('stroke-width', 1);

            // Axes
            g.append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', yScale(0)).attr('y2', yScale(0))
                .attr('stroke', '#3d4a63').attr('stroke-width', 2);

            g.append('line')
                .attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', 0).attr('y2', plotHeight)
                .attr('stroke', '#3d4a63').attr('stroke-width', 2);

            // cos(x) curve
            const xValues = d3.range(-4, 4, 0.02);
            const fLine = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(Math.cos(d)))
                .curve(d3.curveCatmullRom);

            g.append('path')
                .datum(xValues)
                .attr('fill', 'none')
                .attr('stroke', '#60a5fa')
                .attr('stroke-width', 3)
                .attr('d', fLine);

            // Function label
            g.append('text')
                .attr('x', plotWidth - 80)
                .attr('y', 20)
                .attr('font-size', '1.25rem')
                .attr('fill', '#60a5fa')
                .text('cos(x)');

            // Polynomial path (to be animated)
            const polyPath = g.append('path')
                .attr('fill', 'none')
                .attr('stroke', '#4f46e5')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '8,4');

            const degrees = [0, 2, 4, 6, 8, 10];
            let currentIndex = 0;
            let animating = false;

            function drawPolynomial(degree) {
                const pLine = d3.line()
                    .x(d => xScale(d))
                    .y(d => {
                        const val = taylorPolynomial(func, degree, d);
                        return yScale(Math.max(-2.5, Math.min(2.5, val)));
                    })
                    .defined(d => {
                        const val = taylorPolynomial(func, degree, d);
                        return !isNaN(val) && isFinite(val) && val >= -2.5 && val <= 2.5;
                    })
                    .curve(d3.curveCatmullRom);

                polyPath
                    .datum(xValues)
                    .transition()
                    .duration(500)
                    .attr('d', pLine);

                document.getElementById('current-degree').textContent = 'Degree: ' + degree;
            }

            function playAnimation() {
                if (animating) return;
                animating = true;

                function step() {
                    if (currentIndex >= degrees.length) {
                        animating = false;
                        return;
                    }
                    drawPolynomial(degrees[currentIndex]);
                    currentIndex++;
                    if (currentIndex < degrees.length) {
                        setTimeout(step, 1000);
                    } else {
                        animating = false;
                    }
                }
                step();
            }

            function resetAnimation() {
                currentIndex = 0;
                animating = false;
                drawPolynomial(degrees[0]);
            }

            document.getElementById('play-animation').addEventListener('click', playAnimation);
            document.getElementById('reset-animation').addEventListener('click', resetAnimation);

            // Initial state
            drawPolynomial(degrees[0]);
        }

        // ===== Trigger Visualizations on Slide Entry =====
        const visualizationSlides = {
            5: drawDegree0,
            6: drawDegree1,
            17: drawTaylorGrapher,
            18: drawProgressiveViz
        };

        let lastSlide = -1;

        function checkAndDrawVisualization() {
            if (!window.Presentation) return;

            const currentSlide = window.Presentation.getCurrentSlide();
            if (currentSlide !== lastSlide) {
                lastSlide = currentSlide;
                if (visualizationSlides[currentSlide]) {
                    setTimeout(visualizationSlides[currentSlide], 100);
                }
            }
        }

        // Check periodically for slide changes
        setInterval(checkAndDrawVisualization, 200);

        // Also check on hash changes
        window.addEventListener('hashchange', () => {
            setTimeout(checkAndDrawVisualization, 100);
        });

        // Initial check after DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(checkAndDrawVisualization, 200);
            });
        } else {
            setTimeout(checkAndDrawVisualization, 200);
        }
    </script>
</body>
</html>
