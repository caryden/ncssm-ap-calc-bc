<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 43: Exponential & Logistic Models | AP Calculus BC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --theme-color: #ea580c;
            --theme-color-light: #f97316;
        }

        /* Custom styles for this presentation */
        .formula-box {
            background: var(--bg-secondary);
            border: 3px solid var(--theme-color);
            border-radius: 12px;
            padding: 1.5rem 2rem;
            margin: 1rem auto;
            max-width: 600px;
            text-align: center;
        }

        .formula-box.bc-topic {
            position: relative;
        }

        .formula-box.bc-topic::after {
            content: 'BC';
            position: absolute;
            top: -12px;
            right: 15px;
            background: var(--theme-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .bc-indicator {
            display: inline-block;
            background: var(--theme-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .solution-steps {
            text-align: left;
            max-width: 700px;
            margin: 1rem auto;
        }

        .solution-steps .step {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--bg-tertiary);
            font-size: 1.35rem;
        }

        .solution-steps .step:last-child {
            border-bottom: none;
        }

        .solution-steps .step-label {
            color: var(--theme-color);
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .result-box {
            background: linear-gradient(135deg, var(--theme-color), var(--theme-color-light));
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.5rem;
            margin: 1.5rem auto;
            max-width: 500px;
            text-align: center;
        }

        .answer-box {
            background: var(--success);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.35rem;
            margin: 1rem auto;
            max-width: 500px;
            text-align: center;
        }

        .observations {
            text-align: left;
            max-width: 600px;
            margin: 1rem auto;
        }

        .observations li {
            padding: 0.5rem 0;
            font-size: 1.25rem;
            color: var(--text-secondary);
        }

        .slider-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .slider-control label {
            font-size: 1.25rem;
            font-family: var(--font-display);
        }

        .slider-control input[type="range"] {
            width: 250px;
            height: 8px;
            -webkit-appearance: none;
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        .slider-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--theme-color);
            border-radius: 50%;
            cursor: pointer;
        }

        .value-display {
            font-family: var(--font-mono);
            font-size: 1.35rem;
            color: var(--theme-color);
            min-width: 120px;
        }

        .comparison-table {
            width: 100%;
            max-width: 800px;
            margin: 1rem auto;
            border-collapse: collapse;
            font-size: 1.15rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 0.75rem 1rem;
            text-align: center;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .comparison-table th {
            background: var(--bg-secondary);
            font-family: var(--font-display);
            font-weight: 600;
            color: var(--theme-color);
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .problem-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--theme-color);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            text-align: left;
            border-radius: 0 8px 8px 0;
        }

        .problem-box p {
            font-size: 1.35rem;
            margin: 0;
        }

        .scenario-list {
            text-align: left;
            max-width: 700px;
            margin: 1rem auto;
        }

        .scenario-list li {
            padding: 0.75rem 0;
            font-size: 1.35rem;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .scenario-list li:last-child {
            border-bottom: none;
        }

        .key-points {
            text-align: left;
            max-width: 600px;
            margin: 1rem auto;
        }

        .key-points li {
            padding: 0.5rem 0;
            font-size: 1.25rem;
        }

        .formula-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            max-width: 900px;
            margin: 1rem auto;
        }

        .formula-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border-top: 4px solid var(--theme-color);
        }

        .formula-card h3 {
            font-size: 1.5rem;
            color: var(--theme-color);
            margin-bottom: 1rem;
        }

        .formula-card .formula-item {
            font-size: 1.15rem;
            padding: 0.4rem 0;
            color: var(--text-secondary);
        }

        .analysis-box {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 600px;
        }

        .analysis-box p {
            font-size: 1.35rem;
            margin: 0.5rem 0;
        }

        .stability-label {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 1rem;
        }

        .stability-label.stable {
            background: var(--success);
            color: white;
        }

        .stability-label.unstable {
            background: var(--danger);
            color: white;
        }

        .tasks-list {
            text-align: left;
            max-width: 700px;
            margin: 1rem auto;
        }

        .tasks-list li {
            padding: 0.5rem 0;
            font-size: 1.25rem;
        }

        .unit-recap li {
            padding: 0.5rem 0;
            font-size: 1.2rem;
        }

        .slide-example .slide-content h2 {
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Slide 0: Title -->
        <div class="slide slide-title" data-slide="0" data-section="Opening" data-title="Course Introduction">
            <div class="slide-content">
                <div class="unit-badge">Unit 7: Differential Equations</div>
                <h1>Exponential & Logistic Models</h1>
                <p class="subtitle">Growth, Decay, and Carrying Capacity</p>
                <p class="meta" style="margin-top: 1rem;">
                    <span class="bc-indicator">Logistic is BC Topic</span>
                </p>
                <p class="meta">Class 43 | CED 7.8, 7.9 | NCSSM</p>
            </div>
        </div>

        <!-- Slide 1: The Bacteria Problem -->
        <div class="slide slide-visual" data-slide="1" data-section="Opening" data-title="The Bacteria Problem">
            <div class="slide-content">
                <h2>The Bacteria Problem</h2>
                <div class="problem-box">
                    <p>A bacteria population doubles every hour. Starting with 100 bacteria, how many are there after 24 hours?</p>
                </div>
                <div id="bacteria-viz" class="visualization" style="height: 200px;"></div>
                <p class="caption" style="font-size: 1.75rem; color: var(--theme-color); margin-top: 1rem;">
                    100 × 2<sup>24</sup> = <strong>Nearly 1.7 BILLION bacteria!</strong>
                </p>
                <p class="caption" style="font-size: 1.5rem; margin-top: 0.5rem;">Is this realistic?</p>
            </div>
        </div>

        <!-- Slide 2: What's Missing? -->
        <div class="slide slide-statement" data-slide="2" data-section="Opening" data-title="What's Missing">
            <div class="slide-content">
                <p class="statement">Exponential growth assumes <em>unlimited resources</em>.</p>
                <div style="margin-top: 2rem; font-size: 1.5rem; color: var(--text-secondary);">
                    <p>Real populations face limits: food, space, competition.</p>
                    <p style="margin-top: 1.5rem;">Today we explore two models:</p>
                    <ul style="list-style: none; margin-top: 1rem; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto;">
                        <li style="padding: 0.5rem 0;"><strong style="color: var(--theme-color);">Exponential:</strong> Unlimited growth or decay (ideal case)</li>
                        <li style="padding: 0.5rem 0;"><strong style="color: var(--theme-color);">Logistic:</strong> Growth with carrying capacity (realistic case)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 3: The Exponential Model -->
        <div class="slide slide-two-part" data-slide="3" data-section="Exponential" data-title="The Exponential Model">
            <div class="slide-content">
                <div class="formula-box">
                    <p style="font-size: 2rem;">\(\displaystyle \frac{dy}{dt} = ky\)</p>
                    <p style="font-size: 1.35rem; color: var(--text-secondary); margin-top: 0.5rem;">
                        The rate of change is proportional to the current amount
                    </p>
                </div>
                <div class="secondary" style="margin-top: 2rem;">
                    <p style="font-size: 1.5rem;"><strong style="color: var(--success);">k &gt; 0:</strong> Exponential <strong>growth</strong></p>
                    <p style="font-size: 1.5rem; margin-top: 0.75rem;"><strong style="color: #60a5fa;">k &lt; 0:</strong> Exponential <strong>decay</strong></p>
                    <p style="font-size: 1.25rem; color: var(--text-tertiary); margin-top: 1rem;">k is the proportionality constant (not the rate itself!)</p>
                </div>
            </div>
        </div>

        <!-- Slide 4: Solving the Exponential Equation -->
        <div class="slide slide-visual" data-slide="4" data-section="Exponential" data-title="Solving Exponential">
            <div class="slide-content">
                <h2>Solving \(\frac{dy}{dt} = ky\) by Separation</h2>
                <div class="solution-steps">
                    <div class="step"><span class="step-label">Step 1:</span> Separate: \(\frac{1}{y}\,dy = k\,dt\)</div>
                    <div class="step"><span class="step-label">Step 2:</span> Integrate: \(\ln|y| = kt + C\)</div>
                    <div class="step"><span class="step-label">Step 3:</span> Solve: \(|y| = e^{kt+C} = Ae^{kt}\)</div>
                    <div class="step"><span class="step-label">Step 4:</span> With \(y(0) = y_0\): \(A = y_0\)</div>
                </div>
                <div class="result-box">
                    \(y = y_0 e^{kt}\)
                </div>
                <p class="caption">The exponential function is its own derivative (up to a constant)</p>
            </div>
        </div>

        <!-- Slide 5: Exponential Growth Visualization -->
        <div class="slide slide-visual" data-slide="5" data-section="Exponential" data-title="Exponential Growth">
            <div class="slide-content">
                <h2>Exponential Growth (k &gt; 0)</h2>
                <div id="exp-growth-viz" class="visualization"></div>
                <div class="slider-control">
                    <label>k =</label>
                    <input type="range" id="k-growth-slider" min="0.1" max="2.0" step="0.1" value="0.5">
                    <span class="value-display" id="k-growth-display">k = 0.5</span>
                </div>
                <ul class="observations">
                    <li>Larger k = faster growth</li>
                    <li>The curve gets steeper as y grows</li>
                    <li>No upper limit: y → ∞</li>
                </ul>
            </div>
        </div>

        <!-- Slide 6: Exponential Decay Visualization -->
        <div class="slide slide-visual" data-slide="6" data-section="Exponential" data-title="Exponential Decay">
            <div class="slide-content">
                <h2>Exponential Decay (k &lt; 0)</h2>
                <div id="exp-decay-viz" class="visualization"></div>
                <div class="slider-control">
                    <label>k =</label>
                    <input type="range" id="k-decay-slider" min="-2.0" max="-0.1" step="0.1" value="-0.5">
                    <span class="value-display" id="k-decay-display">k = -0.5</span>
                </div>
                <ul class="observations">
                    <li>Amount decreases over time</li>
                    <li>Never reaches zero (approaches asymptotically)</li>
                    <li>Applications: radioactive decay, depreciation</li>
                </ul>
            </div>
        </div>

        <!-- Slide 7: Doubling Time and Half-Life -->
        <div class="slide slide-comparison" data-slide="7" data-section="Exponential" data-title="Key Time Formulas">
            <div class="slide-content">
                <h2>Key Time Formulas</h2>
                <div class="columns">
                    <div class="column">
                        <h3 style="color: var(--success);">Doubling Time (k &gt; 0)</h3>
                        <div style="font-size: 1.25rem; margin-top: 1rem;">
                            <p>When does \(y = 2y_0\)?</p>
                            <p style="margin-top: 0.5rem;">\(2y_0 = y_0 e^{kT_d}\)</p>
                            <p style="margin-top: 0.5rem;">\(2 = e^{kT_d}\)</p>
                            <p style="margin-top: 1rem; font-size: 1.75rem; color: var(--success);">\(\displaystyle T_d = \frac{\ln 2}{k}\)</p>
                        </div>
                    </div>
                    <div class="column">
                        <h3 style="color: #60a5fa;">Half-Life (k &lt; 0)</h3>
                        <div style="font-size: 1.25rem; margin-top: 1rem;">
                            <p>When does \(y = \frac{1}{2}y_0\)?</p>
                            <p style="margin-top: 0.5rem;">\(\frac{1}{2}y_0 = y_0 e^{kT_{1/2}}\)</p>
                            <p style="margin-top: 0.5rem;">\(\frac{1}{2} = e^{kT_{1/2}}\)</p>
                            <p style="margin-top: 1rem; font-size: 1.75rem; color: #60a5fa;">\(\displaystyle T_{1/2} = \frac{\ln 2}{|k|}\)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Worked Example - Radioactive Decay -->
        <div class="slide slide-example" data-slide="8" data-section="Exponential" data-title="Carbon-14 Dating">
            <div class="slide-content">
                <h2>Example: Carbon-14 Dating</h2>
                <div class="problem-box">
                    <p>Carbon-14 has a half-life of 5730 years. A sample contains 100 grams. How much remains after 10,000 years?</p>
                </div>
                <div class="solution-steps">
                    <div class="step"><span class="step-label">Find k:</span> \(T_{1/2} = \frac{\ln 2}{|k|}\) so \(|k| = \frac{\ln 2}{5730} \approx 0.000121\)</div>
                    <div class="step"><span class="step-label">Sign:</span> \(k = -0.000121\) (negative for decay)</div>
                    <div class="step"><span class="step-label">Model:</span> \(A = 100e^{-0.000121t}\)</div>
                    <div class="step"><span class="step-label">Evaluate:</span> At \(t = 10000\): \(A = 100e^{-1.21} \approx 29.8\) grams</div>
                </div>
                <div class="answer-box">About 29.8 grams remain</div>
            </div>
        </div>

        <!-- Slide 9: Limitations of Exponential Growth -->
        <div class="slide slide-visual" data-slide="9" data-section="Transition" data-title="Limitations">
            <div class="slide-content">
                <h2>The Problem with Exponential Growth</h2>
                <div id="limitation-viz" class="visualization"></div>
                <ul class="key-points">
                    <li>Predicts <strong>unlimited</strong> growth</li>
                    <li>Ignores <strong>resource constraints</strong></li>
                    <li>Good approximation only when population is <strong>small</strong> relative to resources</li>
                </ul>
                <p class="caption" style="color: var(--theme-color);">We need a model that incorporates limits...</p>
            </div>
        </div>

        <!-- Slide 10: Introducing the Logistic Model -->
        <div class="slide slide-two-part" data-slide="10" data-section="Logistic" data-title="The Logistic Model">
            <div class="slide-content">
                <div class="formula-box bc-topic">
                    <p style="font-size: 2rem;">\(\displaystyle \frac{dy}{dt} = ky\left(1 - \frac{y}{L}\right)\)</p>
                </div>
                <div class="secondary" style="margin-top: 2rem;">
                    <p style="font-size: 1.5rem;"><strong style="color: var(--theme-color);">k</strong> = intrinsic growth rate</p>
                    <p style="font-size: 1.5rem; margin-top: 0.75rem;"><strong style="color: var(--theme-color);">L</strong> = <strong>carrying capacity</strong> (maximum sustainable population)</p>
                    <p style="font-size: 1.35rem; color: var(--text-tertiary); margin-top: 1rem;">The factor \(\left(1 - \frac{y}{L}\right)\) is a "braking term"</p>
                </div>
            </div>
        </div>

        <!-- Slide 11: Understanding the Braking Term -->
        <div class="slide slide-visual" data-slide="11" data-section="Logistic" data-title="Braking Term">
            <div class="slide-content">
                <h2>How the Braking Term Works <span class="bc-indicator">BC</span></h2>
                <div id="braking-viz" class="visualization"></div>
                <div class="slider-control">
                    <label>y =</label>
                    <input type="range" id="braking-slider" min="0" max="150" step="5" value="50">
                    <span class="value-display" id="braking-display">y = 50</span>
                </div>
                <p class="caption">As y approaches L, the growth rate approaches 0</p>
            </div>
        </div>

        <!-- Slide 12: Logistic Equilibrium Analysis -->
        <div class="slide slide-visual" data-slide="12" data-section="Logistic" data-title="Equilibrium Analysis">
            <div class="slide-content">
                <h2>Equilibrium Solutions <span class="bc-indicator">BC</span></h2>
                <div class="analysis-box">
                    <p>Set \(\frac{dy}{dt} = 0\):</p>
                    <p style="color: var(--theme-color);">\(ky\left(1 - \frac{y}{L}\right) = 0\)</p>
                    <p style="font-size: 1.5rem; margin-top: 0.5rem;"><strong>\(y = 0\)</strong> or <strong>\(y = L\)</strong></p>
                </div>
                <div id="equilibrium-viz" class="visualization"></div>
                <div style="display: flex; justify-content: center; gap: 2rem; margin-top: 1rem;">
                    <p style="font-size: 1.25rem;"><span class="stability-label unstable">UNSTABLE</span> y = 0 (perturbations grow away)</p>
                    <p style="font-size: 1.25rem;"><span class="stability-label stable">STABLE</span> y = L (solutions approach L)</p>
                </div>
            </div>
        </div>

        <!-- Slide 13: The Logistic Solution -->
        <div class="slide slide-visual" data-slide="13" data-section="Logistic" data-title="Logistic Solution">
            <div class="slide-content">
                <h2>The Logistic Solution (Given) <span class="bc-indicator">BC</span></h2>
                <div class="formula-box bc-topic">
                    <p style="font-size: 1.75rem;">\(\displaystyle y(t) = \frac{L}{1 + Ae^{-kt}}\)</p>
                    <p style="font-size: 1.35rem; margin-top: 0.75rem; color: var(--text-secondary);">where \(\displaystyle A = \frac{L - y_0}{y_0}\)</p>
                </div>
                <div class="analysis-box" style="margin-top: 1.5rem;">
                    <p style="font-size: 1.25rem; color: var(--text-tertiary);">
                        <strong>Note:</strong> This formula is often provided on the AP exam.
                    </p>
                </div>
                <p class="caption">The derivation uses partial fractions - complex algebra!</p>
            </div>
        </div>

        <!-- Slide 14: The S-Shaped Curve -->
        <div class="slide slide-visual" data-slide="14" data-section="Logistic" data-title="S-Curve">
            <div class="slide-content">
                <h2>The Logistic Curve: S-Shape (Sigmoidal) <span class="bc-indicator">BC</span></h2>
                <div id="scurve-viz" class="visualization"></div>
                <ul class="key-points">
                    <li><strong>Slow start</strong> (nearly exponential when y is small)</li>
                    <li><strong>Rapid middle growth</strong> (inflection point at y = L/2)</li>
                    <li><strong>Leveling off</strong> as y → L</li>
                </ul>
            </div>
        </div>

        <!-- Slide 15: The Inflection Point -->
        <div class="slide slide-visual" data-slide="15" data-section="Logistic" data-title="Inflection Point">
            <div class="slide-content">
                <h2>Where Is Growth Fastest? <span class="bc-indicator">BC</span></h2>
                <div class="analysis-box">
                    <p style="font-size: 1.25rem;">The inflection point is where \(\frac{d^2y}{dt^2} = 0\)</p>
                    <p style="font-size: 1.25rem; margin-top: 0.5rem;">This is where \(\frac{dy}{dt}\) is <strong>MAXIMUM</strong></p>
                    <p style="font-size: 1.5rem; margin-top: 0.75rem; color: var(--theme-color);">For logistic: inflection occurs at <strong>\(y = \frac{L}{2}\)</strong></p>
                </div>
                <div id="inflection-viz" class="visualization"></div>
                <p class="caption">Growth is fastest when population is at half carrying capacity</p>
                <p class="caption" style="margin-top: 0.5rem;">Maximum growth rate = \(\frac{kL}{4}\)</p>
            </div>
        </div>

        <!-- Slide 16: Side-by-Side Comparison -->
        <div class="slide slide-visual" data-slide="16" data-section="Comparison" data-title="Exp vs Logistic">
            <div class="slide-content">
                <h2>Exponential vs. Logistic</h2>
                <div id="comparison-viz" class="visualization"></div>
                <ul class="observations">
                    <li>Initially similar (both nearly exponential)</li>
                    <li>Diverge as logistic approaches L</li>
                    <li><strong>Exponential → ∞</strong> ; <strong>Logistic → L</strong></li>
                </ul>
            </div>
        </div>

        <!-- Slide 17: Comparison Table -->
        <div class="slide slide-comparison" data-slide="17" data-section="Comparison" data-title="Model Comparison">
            <div class="slide-content">
                <h2>Model Comparison</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Exponential</th>
                            <th>Logistic <span class="bc-indicator" style="font-size: 0.8rem;">BC</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Equation</td>
                            <td>\(\frac{dy}{dt} = ky\)</td>
                            <td>\(\frac{dy}{dt} = ky(1 - \frac{y}{L})\)</td>
                        </tr>
                        <tr>
                            <td>Solution</td>
                            <td>\(y = y_0 e^{kt}\)</td>
                            <td>\(y = \frac{L}{1 + Ae^{-kt}}\)</td>
                        </tr>
                        <tr>
                            <td>Long-term</td>
                            <td>\(y \to \infty\) (or 0)</td>
                            <td>\(y \to L\)</td>
                        </tr>
                        <tr>
                            <td>Shape</td>
                            <td>J-curve</td>
                            <td>S-curve</td>
                        </tr>
                        <tr>
                            <td>Resources</td>
                            <td>Unlimited</td>
                            <td>Limited to L</td>
                        </tr>
                        <tr>
                            <td>Equilibria</td>
                            <td>\(y = 0\) only</td>
                            <td>\(y = 0\) and \(y = L\)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Slide 18: Application - Population Modeling -->
        <div class="slide slide-example" data-slide="18" data-section="Applications" data-title="Deer Population">
            <div class="slide-content">
                <h2>Example: Deer Population <span class="bc-indicator">BC</span></h2>
                <div class="problem-box">
                    <p>A wildlife reserve introduces 50 deer into a park that can support 500 deer. The intrinsic growth rate is k = 0.3 per year.</p>
                </div>
                <ol class="tasks-list">
                    <li>Write the differential equation</li>
                    <li>Write the solution</li>
                    <li>Find the population after 5 years</li>
                    <li>When will population reach 400?</li>
                    <li>What is the long-term population?</li>
                </ol>
            </div>
        </div>

        <!-- Slide 19: Application Solution -->
        <div class="slide slide-visual" data-slide="19" data-section="Applications" data-title="Deer Solution">
            <div class="slide-content">
                <h2>Solution: Deer Population <span class="bc-indicator">BC</span></h2>
                <div class="solution-steps" style="font-size: 1.2rem;">
                    <div class="step"><span class="step-label">a)</span> \(\displaystyle \frac{dP}{dt} = 0.3P\left(1 - \frac{P}{500}\right)\)</div>
                    <div class="step"><span class="step-label">b)</span> \(A = \frac{500-50}{50} = 9\), so \(\displaystyle P(t) = \frac{500}{1 + 9e^{-0.3t}}\)</div>
                    <div class="step"><span class="step-label">c)</span> \(\displaystyle P(5) = \frac{500}{1 + 9e^{-1.5}} \approx 166\) deer</div>
                    <div class="step"><span class="step-label">d)</span> Solve \(400 = \frac{500}{1 + 9e^{-0.3t}}\): \(t \approx 11.9\) years</div>
                    <div class="step"><span class="step-label">e)</span> \(\displaystyle \lim_{t \to \infty} P(t) = L = 500\) deer</div>
                </div>
                <div id="deer-viz" class="visualization" style="height: 200px;"></div>
            </div>
        </div>

        <!-- Slide 20: What If y₀ > L? -->
        <div class="slide slide-visual" data-slide="20" data-section="Applications" data-title="Above Capacity">
            <div class="slide-content">
                <h2>When Initial Population Exceeds Carrying Capacity <span class="bc-indicator">BC</span></h2>
                <div id="above-capacity-viz" class="visualization"></div>
                <div class="analysis-box">
                    <p>If \(y_0 = 1.5L\), then \(\left(1 - \frac{y_0}{L}\right) = -0.5\)</p>
                    <p style="margin-top: 0.5rem;">\(\frac{dy}{dt} < 0\): population <strong style="color: var(--danger);">DECREASES</strong></p>
                    <p style="margin-top: 0.5rem;">Still approaches L, but from above</p>
                </div>
                <p class="caption">L is an attractor - all positive solutions approach L</p>
            </div>
        </div>

        <!-- Slide 21: Real-World Applications -->
        <div class="slide slide-list" data-slide="21" data-section="Applications" data-title="Real-World">
            <div class="slide-content">
                <h2>Where Do We See Logistic Growth? <span class="bc-indicator">BC</span></h2>
                <ul>
                    <li><strong>Biology:</strong> Population growth in ecosystems</li>
                    <li><strong>Epidemiology:</strong> Spread of diseases (limited susceptible population)</li>
                    <li><strong>Technology:</strong> Adoption of new products (limited market)</li>
                    <li><strong>Learning:</strong> Skill acquisition (limited ceiling)</li>
                    <li><strong>Chemistry:</strong> Reaction rates (limited reagents)</li>
                </ul>
                <p class="caption">Any growth process with natural limits!</p>
            </div>
        </div>

        <!-- Slide 22: Practice - Identify the Model -->
        <div class="slide slide-exercise" data-slide="22" data-section="Practice" data-title="Which Model?">
            <div class="slide-content">
                <h2>Your Turn: Which Model?</h2>
                <div class="prompt">
                    <p>Identify whether each scenario follows exponential or logistic growth:</p>
                </div>
                <ol class="scenario-list">
                    <li>Bacteria in a petri dish with unlimited nutrients</li>
                    <li>Fish population in a lake with limited food</li>
                    <li>Radioactive decay of uranium</li>
                    <li>Spread of a rumor through a school of 500 students</li>
                </ol>
                <p class="caption" style="color: var(--theme-color);">Time: 2 minutes</p>
            </div>
        </div>

        <!-- Slide 23: Practice Solutions -->
        <div class="slide slide-list" data-slide="23" data-section="Practice" data-title="Model Solutions">
            <div class="slide-content">
                <h2>Solutions: Model Identification</h2>
                <ul>
                    <li><strong>1.</strong> Bacteria with unlimited nutrients → <strong style="color: var(--success);">Exponential growth</strong></li>
                    <li><strong>2.</strong> Fish with limited food → <strong style="color: var(--theme-color);">Logistic</strong> (L = carrying capacity)</li>
                    <li><strong>3.</strong> Radioactive decay → <strong style="color: #60a5fa;">Exponential decay</strong></li>
                    <li><strong>4.</strong> Rumor in school of 500 → <strong style="color: var(--theme-color);">Logistic</strong> (L = 500)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 24: Practice - Logistic Analysis -->
        <div class="slide slide-exercise" data-slide="24" data-section="Practice" data-title="Quick Check">
            <div class="slide-content">
                <h2>Quick Check <span class="bc-indicator">BC</span></h2>
                <div class="formula-box">
                    <p style="font-size: 1.5rem;">\(\displaystyle \frac{dy}{dt} = 0.2y\left(1 - \frac{y}{200}\right)\) with \(y(0) = 20\)</p>
                </div>
                <ol class="tasks-list">
                    <li>What is k?</li>
                    <li>What is the carrying capacity L?</li>
                    <li>At what population is growth fastest?</li>
                    <li>What is the long-term behavior?</li>
                </ol>
                <p class="caption" style="color: var(--theme-color);">Time: 2 minutes</p>
            </div>
        </div>

        <!-- Slide 25: Practice Solutions -->
        <div class="slide slide-visual" data-slide="25" data-section="Practice" data-title="Quick Check Solutions">
            <div class="slide-content">
                <h2>Solutions: Logistic Analysis <span class="bc-indicator">BC</span></h2>
                <div class="solution-steps">
                    <div class="step"><span class="step-label">1.</span> \(k = 0.2\)</div>
                    <div class="step"><span class="step-label">2.</span> \(L = 200\)</div>
                    <div class="step"><span class="step-label">3.</span> Growth fastest at \(y = \frac{L}{2} = 100\)</div>
                    <div class="step"><span class="step-label">4.</span> Long-term: \(y \to 200\) as \(t \to \infty\)</div>
                </div>
                <div id="practice-viz" class="visualization" style="height: 200px;"></div>
            </div>
        </div>

        <!-- Slide 26: Unit 7 Recap -->
        <div class="slide slide-list" data-slide="26" data-section="Summary" data-title="Unit Recap">
            <div class="slide-content">
                <h2>Unit 7: The Complete Journey</h2>
                <ul class="unit-recap">
                    <li><strong>Class 39:</strong> Modeling — translate verbal → differential equation</li>
                    <li><strong>Class 40:</strong> Slope fields — visualize solutions</li>
                    <li><strong>Class 41:</strong> Euler's method — approximate numerically <span class="bc-indicator" style="font-size: 0.8rem;">BC</span></li>
                    <li><strong>Class 42:</strong> Separation of variables — solve exactly</li>
                    <li><strong>Class 43:</strong> Exponential & logistic — apply to real models</li>
                </ul>
                <p class="caption">From words to equations to solutions to applications!</p>
            </div>
        </div>

        <!-- Slide 27: Key Formulas Reference -->
        <div class="slide slide-visual" data-slide="27" data-section="Summary" data-title="Key Formulas">
            <div class="slide-content">
                <h2>Key Formulas to Know</h2>
                <div class="formula-grid">
                    <div class="formula-card">
                        <h3>Exponential</h3>
                        <div class="formula-item"><strong>Equation:</strong> \(\frac{dy}{dt} = ky\)</div>
                        <div class="formula-item"><strong>Solution:</strong> \(y = y_0 e^{kt}\)</div>
                        <div class="formula-item"><strong>Doubling time:</strong> \(T_d = \frac{\ln 2}{k}\)</div>
                        <div class="formula-item"><strong>Half-life:</strong> \(T_{1/2} = \frac{\ln 2}{|k|}\)</div>
                    </div>
                    <div class="formula-card">
                        <h3>Logistic <span class="bc-indicator" style="font-size: 0.8rem;">BC</span></h3>
                        <div class="formula-item"><strong>Equation:</strong> \(\frac{dy}{dt} = ky(1 - \frac{y}{L})\)</div>
                        <div class="formula-item"><strong>Solution:</strong> \(y = \frac{L}{1 + Ae^{-kt}}\)</div>
                        <div class="formula-item"><strong>Inflection:</strong> \(y = \frac{L}{2}\)</div>
                        <div class="formula-item"><strong>Long-term:</strong> \(y \to L\)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 28: Exit Ticket -->
        <div class="slide slide-exercise" data-slide="28" data-section="Closing" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket <span class="bc-indicator">BC</span></h2>
                <div class="formula-box">
                    <p style="font-size: 1.5rem;">\(\displaystyle \frac{dy}{dt} = 0.5y\left(1 - \frac{y}{1000}\right)\) with \(y(0) = 100\)</p>
                </div>
                <ol class="tasks-list">
                    <li>Identify k and L</li>
                    <li>Find the equilibrium solutions</li>
                    <li>At what y-value is growth fastest?</li>
                    <li>Describe the long-term behavior if \(y(0) = 1200\) instead</li>
                </ol>
            </div>
        </div>

        <!-- Slide 29: Congratulations -->
        <div class="slide slide-statement" data-slide="29" data-section="Closing" data-title="Unit Complete">
            <div class="slide-content">
                <p class="statement" style="color: var(--theme-color);">Unit 7 Complete!</p>
                <p class="secondary" style="font-size: 1.5rem; margin-top: 2rem; color: var(--text-secondary);">
                    You now have a complete toolkit for differential equations:<br>
                    <strong>modeling, visualizing, approximating, and solving.</strong>
                </p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>

        <!-- Slide Counter -->
        <div class="slide-counter">1 / 30</div>

        <!-- Keyboard Hint -->
        <div class="keyboard-hint">
            <kbd>←</kbd> <kbd>→</kbd> Navigate | <kbd>T</kbd> TOC | <kbd>S</kbd> Syllabus | <kbd>F</kbd> Fullscreen
        </div>

        <!-- Overlay Backdrop -->
        <div id="overlay-backdrop" class="overlay-backdrop"></div>

        <!-- TOC Overlay -->
        <div id="toc-overlay" class="toc-overlay">
            <button id="toc-close" class="toc-close">&times;</button>
            <div class="toc-header">
                <h3>Table of Contents</h3>
                <div class="class-info">Class 43: Exponential & Logistic Models</div>
            </div>
            <div id="toc-content" class="toc-content"></div>
            <div class="toc-footer">
                <a href="../index.html">← Back to Course Syllabus</a>
            </div>
        </div>

        <!-- Appendix Overlay -->
        <div id="appendix-overlay" class="appendix-overlay">
            <div class="appendix-header">
                <h3>Appendix</h3>
                <button id="appendix-close" class="appendix-close">&times;</button>
            </div>
            <div id="appendix-content" class="appendix-content"></div>
            <div class="appendix-nav">
                <button id="appendix-prev" class="appendix-nav-btn">← Prev</button>
                <span id="appendix-counter" class="appendix-counter">1 / 1</span>
                <button id="appendix-next" class="appendix-nav-btn">Next →</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="../shared/presentation.js"></script>
    <script>
        // ===== Exponential Growth Visualization (Slide 5) =====
        function drawExpGrowth() {
            const container = document.getElementById('exp-growth-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 350;
            const margin = { top: 30, right: 40, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Scales
            const xScale = d3.scaleLinear().domain([0, 5]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 100]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .attr('class', 'grid')
                .selectAll('line.h')
                .data(d3.range(0, 101, 20))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            g.append('g')
                .attr('class', 'grid')
                .selectAll('line.v')
                .data(d3.range(0, 6, 1))
                .enter()
                .append('line')
                .attr('x1', d => xScale(d))
                .attr('x2', d => xScale(d))
                .attr('y1', 0)
                .attr('y2', plotHeight)
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(5);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Axis labels
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('t (time)');

            svg.append('text')
                .attr('x', 20)
                .attr('y', height / 2)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .attr('transform', `rotate(-90, 20, ${height/2})`)
                .text('y');

            // Exponential function
            const y0 = 10;
            const expFunc = (t, k) => y0 * Math.exp(k * t);

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Main curve path
            const curvePath = g.append('path')
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3);

            // Doubling time annotation
            const doublingGroup = g.append('g').attr('class', 'doubling-annotation');

            doublingGroup.append('line')
                .attr('class', 'doubling-line')
                .attr('stroke', '#fbbf24')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            doublingGroup.append('text')
                .attr('class', 'doubling-text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#fbbf24');

            // Update function
            function update(k) {
                const data = [];
                for (let t = 0; t <= 5; t += 0.1) {
                    const y = expFunc(t, k);
                    if (y <= 100) data.push({ t, y });
                }

                curvePath.datum(data).attr('d', line);

                // Update doubling time
                const Td = Math.log(2) / k;
                if (Td <= 5) {
                    doublingGroup.style('opacity', 1);
                    doublingGroup.select('.doubling-line')
                        .attr('x1', xScale(Td))
                        .attr('x2', xScale(Td))
                        .attr('y1', yScale(0))
                        .attr('y2', yScale(expFunc(Td, k)));

                    doublingGroup.select('.doubling-text')
                        .attr('x', xScale(Td) + 10)
                        .attr('y', yScale(expFunc(Td, k) / 2))
                        .text(`Td = ${Td.toFixed(2)}`);
                } else {
                    doublingGroup.style('opacity', 0);
                }

                document.getElementById('k-growth-display').textContent = `k = ${k.toFixed(1)}`;
            }

            // Initial draw
            update(0.5);

            // Slider event
            document.getElementById('k-growth-slider').addEventListener('input', function(e) {
                update(parseFloat(e.target.value));
            });
        }

        // ===== Exponential Decay Visualization (Slide 6) =====
        function drawExpDecay() {
            const container = document.getElementById('exp-decay-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 350;
            const margin = { top: 30, right: 40, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Scales
            const xScale = d3.scaleLinear().domain([0, 5]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 100]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .attr('class', 'grid')
                .selectAll('line.h')
                .data(d3.range(0, 101, 20))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            g.append('g')
                .attr('class', 'grid')
                .selectAll('line.v')
                .data(d3.range(0, 6, 1))
                .enter()
                .append('line')
                .attr('x1', d => xScale(d))
                .attr('x2', d => xScale(d))
                .attr('y1', 0)
                .attr('y2', plotHeight)
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Asymptote
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(0))
                .attr('y2', yScale(0))
                .attr('stroke', '#6b7a94')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            g.append('text')
                .attr('x', plotWidth - 60)
                .attr('y', yScale(0) - 10)
                .attr('font-size', '1.25rem')
                .attr('fill', '#6b7a94')
                .text('y = 0');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(5);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Axis labels
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('t (time)');

            svg.append('text')
                .attr('x', 20)
                .attr('y', height / 2)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .attr('transform', `rotate(-90, 20, ${height/2})`)
                .text('y');

            // Decay function
            const y0 = 100;
            const decayFunc = (t, k) => y0 * Math.exp(k * t);

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Main curve path
            const curvePath = g.append('path')
                .attr('fill', 'none')
                .attr('stroke', '#60a5fa')
                .attr('stroke-width', 3);

            // Half-life annotation
            const halfLifeGroup = g.append('g').attr('class', 'halflife-annotation');

            halfLifeGroup.append('line')
                .attr('class', 'halflife-line')
                .attr('stroke', '#a78bfa')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            halfLifeGroup.append('text')
                .attr('class', 'halflife-text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#a78bfa');

            // Update function
            function update(k) {
                const data = [];
                for (let t = 0; t <= 5; t += 0.1) {
                    data.push({ t, y: decayFunc(t, k) });
                }

                curvePath.datum(data).attr('d', line);

                // Update half-life
                const Thalf = Math.log(2) / Math.abs(k);
                if (Thalf <= 5) {
                    halfLifeGroup.style('opacity', 1);
                    halfLifeGroup.select('.halflife-line')
                        .attr('x1', xScale(Thalf))
                        .attr('x2', xScale(Thalf))
                        .attr('y1', yScale(decayFunc(Thalf, k)))
                        .attr('y2', yScale(0));

                    halfLifeGroup.select('.halflife-text')
                        .attr('x', xScale(Thalf) + 10)
                        .attr('y', yScale(decayFunc(Thalf, k) / 2))
                        .text(`T½ = ${Thalf.toFixed(2)}`);
                } else {
                    halfLifeGroup.style('opacity', 0);
                }

                document.getElementById('k-decay-display').textContent = `k = ${k.toFixed(1)}`;
            }

            // Initial draw
            update(-0.5);

            // Slider event
            document.getElementById('k-decay-slider').addEventListener('input', function(e) {
                update(parseFloat(e.target.value));
            });
        }

        // ===== Braking Term Visualization (Slide 11) =====
        function drawBrakingTerm() {
            const container = document.getElementById('braking-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 300;
            const margin = { top: 30, right: 40, bottom: 30, left: 40 };

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const L = 100;
            const k = 0.5;

            // Bar chart for (1 - y/L)
            const brakingBar = svg.append('rect')
                .attr('x', 100)
                .attr('y', 80)
                .attr('width', 150)
                .attr('height', 40)
                .attr('fill', '#22c55e')
                .attr('rx', 4);

            const brakingLabel = svg.append('text')
                .attr('x', 100)
                .attr('y', 60)
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('Braking factor (1 - y/L):');

            const brakingValue = svg.append('text')
                .attr('x', 260)
                .attr('y', 108)
                .attr('font-size', '1.5rem')
                .attr('font-weight', '600')
                .attr('fill', 'white');

            // Bar chart for dy/dt
            const growthBar = svg.append('rect')
                .attr('x', 400)
                .attr('y', 80)
                .attr('width', 150)
                .attr('height', 40)
                .attr('fill', '#ea580c')
                .attr('rx', 4);

            const growthLabel = svg.append('text')
                .attr('x', 400)
                .attr('y', 60)
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('Growth rate dy/dt:');

            const growthValue = svg.append('text')
                .attr('x', 560)
                .attr('y', 108)
                .attr('font-size', '1.5rem')
                .attr('font-weight', '600')
                .attr('fill', 'white');

            // Equation display
            const equationText = svg.append('text')
                .attr('x', width / 2)
                .attr('y', 180)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.35rem')
                .attr('fill', '#b8c4d6');

            // Status text
            const statusText = svg.append('text')
                .attr('x', width / 2)
                .attr('y', 230)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.5rem')
                .attr('font-weight', '600');

            // L indicator line
            svg.append('line')
                .attr('x1', 50)
                .attr('x2', 50)
                .attr('y1', 50)
                .attr('y2', 270)
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '8,4');

            svg.append('text')
                .attr('x', 55)
                .attr('y', 270)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ea580c')
                .text('L = 100');

            function update(y) {
                const brakingFactor = 1 - y / L;
                const dydt = k * y * brakingFactor;

                // Update braking bar
                const brakingWidth = Math.abs(brakingFactor) * 150;
                brakingBar
                    .attr('width', brakingWidth)
                    .attr('fill', brakingFactor >= 0 ? '#22c55e' : '#ef4444');

                brakingValue.text(brakingFactor.toFixed(2));

                // Update growth bar
                const growthWidth = Math.min(Math.abs(dydt), 25) * 6;
                growthBar
                    .attr('width', growthWidth)
                    .attr('fill', dydt >= 0 ? '#ea580c' : '#ef4444');

                growthValue.text(dydt.toFixed(2));

                // Update equation
                equationText.text(`dy/dt = ${k} × ${y} × (1 - ${y}/${L}) = ${dydt.toFixed(2)}`);

                // Update status
                if (y < L * 0.1) {
                    statusText.attr('fill', '#22c55e').text('y << L: Nearly exponential growth');
                } else if (y < L * 0.9) {
                    statusText.attr('fill', '#fbbf24').text('Growth slowing as y approaches L');
                } else if (y < L * 1.1) {
                    statusText.attr('fill', '#ea580c').text('y ≈ L: Growth nearly stopped');
                } else {
                    statusText.attr('fill', '#ef4444').text('y > L: Population DECREASING');
                }

                document.getElementById('braking-display').textContent = `y = ${y}`;
            }

            // Initial draw
            update(50);

            // Slider event
            document.getElementById('braking-slider').addEventListener('input', function(e) {
                update(parseFloat(e.target.value));
            });
        }

        // ===== S-Curve Visualization (Slide 14) =====
        function drawSCurve() {
            const container = document.getElementById('scurve-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 60, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 100;
            const k = 0.5;
            const y0 = 10;
            const A = (L - y0) / y0;

            // Logistic function
            const logistic = t => L / (1 + A * Math.exp(-k * t));

            // Scales
            const xScale = d3.scaleLinear().domain([0, 15]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 120]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .attr('class', 'grid')
                .selectAll('line.h')
                .data(d3.range(0, 121, 20))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ea580c')
                .text('L');

            // L/2 line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L/2))
                .attr('y2', yScale(L/2))
                .attr('stroke', '#fbbf24')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '4,4');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L/2) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#fbbf24')
                .text('L/2');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(6);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Axis labels
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('t (time)');

            svg.append('text')
                .attr('x', 20)
                .attr('y', height / 2)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .attr('transform', `rotate(-90, 20, ${height/2})`)
                .text('y');

            // Generate data
            const data = [];
            for (let t = 0; t <= 15; t += 0.1) {
                data.push({ t, y: logistic(t) });
            }

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Animated path
            const path = g.append('path')
                .datum(data)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Animate the path
            const totalLength = path.node().getTotalLength();
            path
                .attr('stroke-dasharray', totalLength + ' ' + totalLength)
                .attr('stroke-dashoffset', totalLength)
                .transition()
                .duration(3000)
                .ease(d3.easeLinear)
                .attr('stroke-dashoffset', 0);

            // Find inflection point (where y = L/2)
            const tInflection = Math.log(A) / k;

            // Add inflection point marker (appears after animation)
            setTimeout(() => {
                g.append('circle')
                    .attr('cx', xScale(tInflection))
                    .attr('cy', yScale(L/2))
                    .attr('r', 0)
                    .attr('fill', '#fbbf24')
                    .transition()
                    .duration(500)
                    .attr('r', 8);

                g.append('text')
                    .attr('x', xScale(tInflection) + 15)
                    .attr('y', yScale(L/2) - 15)
                    .attr('font-size', '1.25rem')
                    .attr('fill', '#fbbf24')
                    .attr('opacity', 0)
                    .text('Inflection point')
                    .transition()
                    .duration(500)
                    .attr('opacity', 1);
            }, 2000);

            // Initial point
            g.append('circle')
                .attr('cx', xScale(0))
                .attr('cy', yScale(y0))
                .attr('r', 6)
                .attr('fill', '#22c55e');

            g.append('text')
                .attr('x', xScale(0) + 10)
                .attr('y', yScale(y0) - 10)
                .attr('font-size', '1.25rem')
                .attr('fill', '#22c55e')
                .text('y₀');
        }

        // ===== Comparison Visualization (Slide 16) =====
        function drawComparison() {
            const container = document.getElementById('comparison-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 80, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 100;
            const k = 0.5;
            const y0 = 10;
            const A = (L - y0) / y0;

            // Functions
            const exponential = t => y0 * Math.exp(k * t);
            const logistic = t => L / (1 + A * Math.exp(-k * t));

            // Scales
            const xScale = d3.scaleLinear().domain([0, 10]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 200]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .attr('class', 'grid')
                .selectAll('line.h')
                .data(d3.range(0, 201, 50))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#6b7a94')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#6b7a94')
                .text('L = 100');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(5);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Axis labels
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('t (time)');

            // Line generators
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(Math.min(d.y, 200)))
                .curve(d3.curveCatmullRom);

            // Generate data
            const expData = [];
            const logData = [];
            for (let t = 0; t <= 10; t += 0.1) {
                expData.push({ t, y: exponential(t) });
                logData.push({ t, y: logistic(t) });
            }

            // Exponential curve (dashed)
            g.append('path')
                .datum(expData)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '10,5')
                .attr('d', line);

            // Logistic curve (solid)
            g.append('path')
                .datum(logData)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Legend
            const legend = svg.append('g')
                .attr('transform', `translate(${width - 160}, 50)`);

            legend.append('line')
                .attr('x1', 0)
                .attr('x2', 30)
                .attr('y1', 0)
                .attr('y2', 0)
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '10,5');

            legend.append('text')
                .attr('x', 40)
                .attr('y', 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('Exponential');

            legend.append('line')
                .attr('x1', 0)
                .attr('x2', 30)
                .attr('y1', 30)
                .attr('y2', 30)
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3);

            legend.append('text')
                .attr('x', 40)
                .attr('y', 35)
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('Logistic');

            // Initial point
            g.append('circle')
                .attr('cx', xScale(0))
                .attr('cy', yScale(y0))
                .attr('r', 6)
                .attr('fill', '#22c55e');
        }

        // ===== Equilibrium/Slope Field Visualization (Slide 12) =====
        function drawEquilibrium() {
            const container = document.getElementById('equilibrium-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 250;
            const margin = { top: 20, right: 40, bottom: 40, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 100;
            const k = 0.3;

            // Scales
            const xScale = d3.scaleLinear().domain([0, 10]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 120]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .selectAll('line')
                .data(d3.range(0, 121, 20))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Equilibrium lines
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(0))
                .attr('y2', yScale(0))
                .attr('stroke', '#ef4444')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#22c55e')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            // Slope field
            const dydt = (t, y) => k * y * (1 - y / L);

            for (let t = 0.5; t <= 10; t += 1) {
                for (let y = 10; y <= 110; y += 15) {
                    const slope = dydt(t, y);
                    const len = 0.3;
                    const angle = Math.atan(slope * (plotHeight / 120) / (plotWidth / 10));

                    const dx = len * Math.cos(angle) * (plotWidth / 10);
                    const dy = len * Math.sin(angle) * (plotHeight / 120);

                    g.append('line')
                        .attr('x1', xScale(t) - dx / 2)
                        .attr('x2', xScale(t) + dx / 2)
                        .attr('y1', yScale(y) + dy / 2)
                        .attr('y2', yScale(y) - dy / 2)
                        .attr('stroke', slope > 0 ? '#22c55e' : '#ef4444')
                        .attr('stroke-width', 2)
                        .attr('opacity', 0.7);
                }
            }

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(6);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Labels
            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#22c55e')
                .text('y = L');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(0) - 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ef4444')
                .text('y = 0');
        }

        // ===== Limitation Visualization (Slide 9) =====
        function drawLimitation() {
            const container = document.getElementById('limitation-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 300;
            const margin = { top: 30, right: 80, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const k = 0.5;
            const y0 = 10;

            // Scales
            const xScale = d3.scaleLinear().domain([0, 10]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 1500]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .selectAll('line')
                .data(d3.range(0, 1501, 300))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(5);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Axis labels
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('t (time)');

            // Generate data
            const expFunc = t => y0 * Math.exp(k * t);
            const data = [];
            for (let t = 0; t <= 10; t += 0.1) {
                data.push({ t, y: Math.min(expFunc(t), 1500) });
            }

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Exponential curve
            g.append('path')
                .datum(data)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Arrow indicating "to infinity"
            g.append('text')
                .attr('x', plotWidth - 20)
                .attr('y', 30)
                .attr('font-size', '2rem')
                .attr('fill', '#ef4444')
                .text('∞');

            // Annotation
            g.append('text')
                .attr('x', plotWidth / 2)
                .attr('y', 50)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.35rem')
                .attr('fill', '#ef4444')
                .text('Resources are finite!');
        }

        // ===== Above Capacity Visualization (Slide 20) =====
        function drawAboveCapacity() {
            const container = document.getElementById('above-capacity-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 350;
            const margin = { top: 30, right: 60, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 100;
            const k = 0.5;
            const y0Above = 150;
            const y0Below = 20;
            const AAbove = (L - y0Above) / y0Above;
            const ABelow = (L - y0Below) / y0Below;

            // Logistic functions
            const logisticAbove = t => L / (1 + AAbove * Math.exp(-k * t));
            const logisticBelow = t => L / (1 + ABelow * Math.exp(-k * t));

            // Scales
            const xScale = d3.scaleLinear().domain([0, 10]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 170]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .selectAll('line')
                .data(d3.range(0, 171, 20))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#1c2640')
                .attr('stroke-width', 1);

            // Carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#22c55e')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#22c55e')
                .text('L');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(8);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Generate data
            const dataAbove = [];
            const dataBelow = [];
            for (let t = 0; t <= 10; t += 0.1) {
                dataAbove.push({ t, y: logisticAbove(t) });
                dataBelow.push({ t, y: logisticBelow(t) });
            }

            // Curve from above (decreasing)
            g.append('path')
                .datum(dataAbove)
                .attr('fill', 'none')
                .attr('stroke', '#ef4444')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Curve from below (increasing)
            g.append('path')
                .datum(dataBelow)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Initial points
            g.append('circle')
                .attr('cx', xScale(0))
                .attr('cy', yScale(y0Above))
                .attr('r', 6)
                .attr('fill', '#ef4444');

            g.append('text')
                .attr('x', xScale(0) + 10)
                .attr('y', yScale(y0Above) - 10)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ef4444')
                .text('y₀ > L');

            g.append('circle')
                .attr('cx', xScale(0))
                .attr('cy', yScale(y0Below))
                .attr('r', 6)
                .attr('fill', '#ea580c');

            g.append('text')
                .attr('x', xScale(0) + 10)
                .attr('y', yScale(y0Below) + 20)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ea580c')
                .text('y₀ < L');

            // Arrow to L
            g.append('text')
                .attr('x', plotWidth - 60)
                .attr('y', yScale(L) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6')
                .text('Both → L');
        }

        // ===== Inflection Point Visualization (Slide 15) =====
        function drawInflection() {
            const container = document.getElementById('inflection-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 300;
            const margin = { top: 30, right: 60, bottom: 50, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 100;
            const k = 0.5;
            const y0 = 10;
            const A = (L - y0) / y0;

            // Logistic function
            const logistic = t => L / (1 + A * Math.exp(-k * t));
            const dydt = t => {
                const y = logistic(t);
                return k * y * (1 - y / L);
            };

            // Scales
            const xScale = d3.scaleLinear().domain([0, 15]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 120]).range([plotHeight, 0]);

            // Carrying capacity and L/2 lines
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '8,4');

            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L/2))
                .attr('y2', yScale(L/2))
                .attr('stroke', '#fbbf24')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(6);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#b8c4d6');

            // Generate data
            const data = [];
            for (let t = 0; t <= 15; t += 0.1) {
                data.push({ t, y: logistic(t) });
            }

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Logistic curve
            g.append('path')
                .datum(data)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Find inflection point
            const tInflection = Math.log(A) / k;

            // Tangent line at inflection
            const yInflection = L / 2;
            const slopeAtInflection = k * yInflection * (1 - yInflection / L);

            const tangentX1 = tInflection - 3;
            const tangentX2 = tInflection + 3;
            const tangentY1 = yInflection - slopeAtInflection * 3;
            const tangentY2 = yInflection + slopeAtInflection * 3;

            g.append('line')
                .attr('x1', xScale(tangentX1))
                .attr('x2', xScale(tangentX2))
                .attr('y1', yScale(tangentY1))
                .attr('y2', yScale(tangentY2))
                .attr('stroke', '#a78bfa')
                .attr('stroke-width', 2);

            // Inflection point marker
            g.append('circle')
                .attr('cx', xScale(tInflection))
                .attr('cy', yScale(L/2))
                .attr('r', 8)
                .attr('fill', '#fbbf24');

            g.append('text')
                .attr('x', xScale(tInflection) + 15)
                .attr('y', yScale(L/2) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#fbbf24')
                .text('Steepest tangent');

            // Labels
            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ea580c')
                .text('L');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L/2) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#fbbf24')
                .text('L/2');
        }

        // ===== Deer Population Visualization (Slide 19) =====
        function drawDeerPopulation() {
            const container = document.getElementById('deer-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 200;
            const margin = { top: 20, right: 60, bottom: 40, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 500;
            const k = 0.3;
            const y0 = 50;
            const A = (L - y0) / y0;

            // Logistic function
            const logistic = t => L / (1 + A * Math.exp(-k * t));

            // Scales
            const xScale = d3.scaleLinear().domain([0, 20]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 550]).range([plotHeight, 0]);

            // Carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#22c55e')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(5);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1rem')
                .attr('fill', '#b8c4d6');

            // Generate data
            const data = [];
            for (let t = 0; t <= 20; t += 0.2) {
                data.push({ t, y: logistic(t) });
            }

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Logistic curve
            g.append('path')
                .datum(data)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 2)
                .attr('d', line);

            // Mark t=5 point
            g.append('circle')
                .attr('cx', xScale(5))
                .attr('cy', yScale(logistic(5)))
                .attr('r', 5)
                .attr('fill', '#60a5fa');

            g.append('text')
                .attr('x', xScale(5) + 8)
                .attr('y', yScale(logistic(5)) - 8)
                .attr('font-size', '1rem')
                .attr('fill', '#60a5fa')
                .text('P(5) ≈ 166');

            // Mark t≈11.9 point
            g.append('circle')
                .attr('cx', xScale(11.9))
                .attr('cy', yScale(400))
                .attr('r', 5)
                .attr('fill', '#a78bfa');

            g.append('text')
                .attr('x', xScale(11.9) + 8)
                .attr('y', yScale(400) - 8)
                .attr('font-size', '1rem')
                .attr('fill', '#a78bfa')
                .text('P = 400');

            // Label
            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 4)
                .attr('font-size', '1rem')
                .attr('fill', '#22c55e')
                .text('L=500');
        }

        // ===== Practice Visualization (Slide 25) =====
        function drawPractice() {
            const container = document.getElementById('practice-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 200;
            const margin = { top: 20, right: 60, bottom: 40, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Parameters
            const L = 200;
            const k = 0.2;
            const y0 = 20;
            const A = (L - y0) / y0;

            // Logistic function
            const logistic = t => L / (1 + A * Math.exp(-k * t));

            // Scales
            const xScale = d3.scaleLinear().domain([0, 40]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 220]).range([plotHeight, 0]);

            // Carrying capacity and L/2 lines
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(L/2))
                .attr('y2', yScale(L/2))
                .attr('stroke', '#fbbf24')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '4,4');

            // Axes
            const xAxis = d3.axisBottom(xScale).ticks(5);
            const yAxis = d3.axisLeft(yScale).ticks(5);

            g.append('g')
                .attr('transform', `translate(0,${plotHeight})`)
                .call(xAxis)
                .selectAll('text')
                .attr('font-size', '1rem')
                .attr('fill', '#b8c4d6');

            g.append('g')
                .call(yAxis)
                .selectAll('text')
                .attr('font-size', '1rem')
                .attr('fill', '#b8c4d6');

            // Generate data
            const data = [];
            for (let t = 0; t <= 40; t += 0.5) {
                data.push({ t, y: logistic(t) });
            }

            // Line generator
            const line = d3.line()
                .x(d => xScale(d.t))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            // Logistic curve
            g.append('path')
                .datum(data)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 2)
                .attr('d', line);

            // Labels
            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L) + 4)
                .attr('font-size', '1rem')
                .attr('fill', '#ea580c')
                .text('L=200');

            g.append('text')
                .attr('x', plotWidth + 5)
                .attr('y', yScale(L/2) + 4)
                .attr('font-size', '1rem')
                .attr('fill', '#fbbf24')
                .text('100');
        }

        // ===== Trigger Visualizations on Slide Entry =====
        const visualizationSlides = {
            5: drawExpGrowth,
            6: drawExpDecay,
            9: drawLimitation,
            11: drawBrakingTerm,
            12: drawEquilibrium,
            14: drawSCurve,
            15: drawInflection,
            16: drawComparison,
            19: drawDeerPopulation,
            20: drawAboveCapacity,
            25: drawPractice
        };

        let lastSlide = -1;

        function checkAndDrawVisualization() {
            if (!window.Presentation) return;

            const currentSlide = window.Presentation.getCurrentSlide();
            if (currentSlide !== lastSlide) {
                lastSlide = currentSlide;
                if (visualizationSlides[currentSlide]) {
                    setTimeout(visualizationSlides[currentSlide], 100);
                }
            }
        }

        // Check periodically for slide changes
        setInterval(checkAndDrawVisualization, 200);

        // Also check on hash changes
        window.addEventListener('hashchange', () => {
            setTimeout(checkAndDrawVisualization, 100);
        });

        // Initial check after DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(checkAndDrawVisualization, 200);
            });
        } else {
            setTimeout(checkAndDrawVisualization, 200);
        }
    </script>
</body>
</html>
