<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 43: Exponential and Logistic Models | AP Calculus BC</title>
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            --theme-color: #ea580c;
            --theme-light: var(--bg-tertiary);
            --theme-dark: #c2410c;
        }
        .unit-badge {
            background: var(--theme-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .formula-box {
            background: var(--theme-light);
            border-left: 4px solid var(--theme-color);
            padding: 1.5rem 2rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
            font-size: 1.75rem;
        }
        .example-box {
            background: var(--bg-tertiary);
            border: 2px solid var(--theme-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
        }
        .column {
            padding: 1rem;
        }
        .model-box {
            background: var(--bg-secondary);
            border: 2px solid var(--theme-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }
        .model-box h3 {
            color: var(--theme-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        .viz-container {
            width: 100%;
            max-width: 700px;
            height: 400px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Title Slide -->
        <div class="slide slide-title active" data-slide="0" data-title="Exponential & Logistic">
            <div class="slide-content">
                <span class="unit-badge">Unit 7: Differential Equations</span>
                <h1>Exponential and Logistic Models</h1>
                <h2>Class 43 | CED Topics 7.8, 7.9</h2>
                <p style="font-size: 1.25rem; color: #64748b; margin-top: 2rem;">
                    Modeling Growth and Decay in Nature
                </p>
            </div>
        </div>

        <!-- Warm-Up -->
        <div class="slide slide-statement" data-slide="1" data-title="Warm-Up">
            <div class="slide-content">
                <h2>Warm-Up</h2>
                <p style="font-size: 1.5rem; margin-bottom: 1.5rem;">
                    Solve the differential equation:
                </p>
                <div class="formula-box">
                    \( \frac{dy}{dt} = ky \), where \( y(0) = y_0 \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem; color: #64748b;">
                    This models populations where growth rate is proportional to size.
                </p>
            </div>
        </div>

        <!-- Exponential Growth/Decay -->
        <div class="slide slide-statement" data-slide="2" data-title="Exponential Model">
            <div class="slide-content">
                <h2>Exponential Growth and Decay</h2>
                <div class="formula-box" style="text-align: center;">
                    \( \frac{dy}{dt} = ky \) has solution \( y = y_0 e^{kt} \)
                </div>
                <div class="two-column" style="margin-top: 2rem;">
                    <div class="model-box">
                        <h3>Growth (\(k > 0\))</h3>
                        <p style="font-size: 1.5rem;">Population increases without bound</p>
                    </div>
                    <div class="model-box">
                        <h3>Decay (\(k < 0\))</h3>
                        <p style="font-size: 1.5rem;">Quantity decreases toward zero</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Exponential Visualization -->
        <div class="slide slide-visual" data-slide="3" data-title="Exponential Graphs">
            <div class="slide-content">
                <h2>Exponential Growth vs Decay</h2>
                <div class="viz-container" id="exponential-viz"></div>
            </div>
        </div>

        <!-- Doubling Time -->
        <div class="slide slide-content" data-slide="4" data-title="Doubling Time">
            <div class="slide-content">
                <h2>Doubling Time</h2>
                <p style="font-size: 1.5rem;">
                    For exponential growth, doubling time is constant:
                </p>
                <div class="formula-box">
                    \( 2y_0 = y_0 e^{kT} \) → \( T = \frac{\ln 2}{k} \)
                </div>
                <div class="example-box" style="margin-top: 1.5rem;">
                    <p style="font-size: 1.5rem;"><strong>Example:</strong> If a population grows at 5% per year,</p>
                    <p style="font-size: 1.5rem;">\( k = 0.05 \), so \( T = \frac{\ln 2}{0.05} \approx 13.9 \) years</p>
                </div>
            </div>
        </div>

        <!-- Half-Life -->
        <div class="slide slide-content" data-slide="5" data-title="Half-Life">
            <div class="slide-content">
                <h2>Half-Life (Decay)</h2>
                <p style="font-size: 1.5rem;">
                    For exponential decay, half-life is constant:
                </p>
                <div class="formula-box">
                    \( \frac{y_0}{2} = y_0 e^{kT} \) → \( T_{1/2} = \frac{\ln 2}{|k|} \)
                </div>
                <div class="example-box" style="margin-top: 1.5rem;">
                    <p style="font-size: 1.5rem;"><strong>Example:</strong> Carbon-14 has half-life of 5730 years</p>
                    <p style="font-size: 1.5rem;">\( k = -\frac{\ln 2}{5730} \approx -0.000121 \) per year</p>
                </div>
            </div>
        </div>

        <!-- Limitation of Exponential -->
        <div class="slide slide-statement" data-slide="6" data-title="Limitation">
            <div class="slide-content">
                <h2>The Problem with Exponential Growth</h2>
                <p style="font-size: 1.75rem; margin-bottom: 2rem;">
                    Exponential growth assumes unlimited resources.
                </p>
                <p style="font-size: 1.5rem; color: #64748b;">
                    In reality, populations face:<br><br>
                    • Limited food and space<br>
                    • Competition<br>
                    • Predation<br>
                    • Disease
                </p>
                <p style="font-size: 1.75rem; margin-top: 2rem; color: var(--theme-color);">
                    We need a more realistic model!
                </p>
            </div>
        </div>

        <!-- Logistic Model Introduction -->
        <div class="slide slide-statement" data-slide="7" data-title="Logistic Model">
            <div class="slide-content">
                <h2>The Logistic Model</h2>
                <p style="font-size: 1.5rem; margin-bottom: 1.5rem;">
                    Growth rate decreases as population approaches carrying capacity \(L\):
                </p>
                <div class="formula-box" style="font-size: 2rem; text-align: center;">
                    \( \frac{dy}{dt} = ky\left(1 - \frac{y}{L}\right) \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem; color: #64748b;">
                    When \( y \ll L \): behaves like exponential growth<br>
                    When \( y \approx L \): growth slows to zero
                </p>
            </div>
        </div>

        <!-- Logistic Analysis -->
        <div class="slide slide-content" data-slide="8" data-title="Logistic Analysis">
            <div class="slide-content">
                <h2>Analyzing the Logistic Equation</h2>
                <p style="font-size: 1.5rem;">
                    \( \frac{dy}{dt} = ky\left(1 - \frac{y}{L}\right) \)
                </p>
                <div class="example-box" style="font-size: 1.5rem;">
                    <p><strong>When \( y = 0 \):</strong> \( \frac{dy}{dt} = 0 \) (equilibrium)</p>
                    <p style="margin-top: 0.5rem;"><strong>When \( y = L \):</strong> \( \frac{dy}{dt} = 0 \) (equilibrium)</p>
                    <p style="margin-top: 0.5rem;"><strong>When \( 0 < y < L \):</strong> \( \frac{dy}{dt} > 0 \) (increasing)</p>
                    <p style="margin-top: 0.5rem;"><strong>When \( y > L \):</strong> \( \frac{dy}{dt} < 0 \) (decreasing)</p>
                </div>
            </div>
        </div>

        <!-- Maximum Growth Rate -->
        <div class="slide slide-content" data-slide="9" data-title="Maximum Growth">
            <div class="slide-content">
                <h2>Maximum Growth Rate</h2>
                <p style="font-size: 1.5rem;">
                    Find when \( \frac{dy}{dt} \) is maximum:
                </p>
                <p style="font-size: 1.5rem; margin-top: 1rem;">
                    Let \( f(y) = ky\left(1 - \frac{y}{L}\right) = ky - \frac{ky^2}{L} \)
                </p>
                <div class="formula-box">
                    \( f'(y) = k - \frac{2ky}{L} = 0 \) → \( y = \frac{L}{2} \)
                </div>
                <p style="font-size: 1.75rem; margin-top: 1.5rem; color: var(--theme-color);">
                    Maximum growth occurs at half the carrying capacity!
                </p>
            </div>
        </div>

        <!-- Logistic Solution -->
        <div class="slide slide-statement" data-slide="10" data-title="Logistic Solution">
            <div class="slide-content">
                <h2>Solution to Logistic Equation</h2>
                <div class="formula-box" style="font-size: 2rem; text-align: center;">
                    \( y = \frac{L}{1 + Ae^{-kt}} \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 1.5rem;">
                    where \( A = \frac{L - y_0}{y_0} \)
                </p>
                <p style="font-size: 1.5rem; margin-top: 1rem; color: #64748b;">
                    As \( t \to \infty \): \( y \to L \) (approaches carrying capacity)
                </p>
            </div>
        </div>

        <!-- Logistic Visualization -->
        <div class="slide slide-visual" data-slide="11" data-title="Logistic Graph">
            <div class="slide-content">
                <h2>The Logistic Curve (S-Curve)</h2>
                <div class="viz-container" id="logistic-viz"></div>
            </div>
        </div>

        <!-- Comparing Models -->
        <div class="slide slide-visual" data-slide="12" data-title="Comparison">
            <div class="slide-content">
                <h2>Exponential vs Logistic</h2>
                <div class="viz-container" id="comparison-viz"></div>
            </div>
        </div>

        <!-- Example Problem -->
        <div class="slide slide-content" data-slide="13" data-title="Example">
            <div class="slide-content">
                <h2>Example: Population Modeling</h2>
                <p style="font-size: 1.5rem;">
                    A population of deer follows logistic growth with \( L = 500 \) and \( k = 0.2 \).
                    Initially there are 50 deer.
                </p>
                <p style="font-size: 1.5rem; margin-top: 1rem;">
                    <strong>a)</strong> Write the differential equation.<br>
                    <strong>b)</strong> Find \( y(t) \).<br>
                    <strong>c)</strong> When is the population growing fastest?<br>
                    <strong>d)</strong> What is the long-term population?
                </p>
            </div>
        </div>

        <!-- Example Solution -->
        <div class="slide slide-content" data-slide="14" data-title="Example Solution">
            <div class="slide-content">
                <h2>Example Solution</h2>
                <p style="font-size: 1.35rem;"><strong>a)</strong> \( \frac{dy}{dt} = 0.2y\left(1 - \frac{y}{500}\right) \)</p>
                <p style="font-size: 1.35rem; margin-top: 1rem;"><strong>b)</strong> \( A = \frac{500 - 50}{50} = 9 \)</p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( y = \frac{500}{1 + 9e^{-0.2t}} \)
                </div>
                <p style="font-size: 1.35rem; margin-top: 1rem;"><strong>c)</strong> Fastest growth when \( y = \frac{L}{2} = 250 \)</p>
                <p style="font-size: 1.35rem; margin-top: 0.5rem;"><strong>d)</strong> As \( t \to \infty \), \( y \to 500 \)</p>
            </div>
        </div>

        <!-- Practice 1 -->
        <div class="slide slide-exercise" data-slide="15" data-title="Practice 1">
            <div class="slide-content">
                <h2>Practice Problem 1</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    A bacteria culture starts with 100 cells and grows at a rate proportional
                    to its size. After 2 hours, there are 400 cells.
                </p>
                <p style="font-size: 1.5rem;">
                    <strong>a)</strong> Find the growth constant \( k \).<br>
                    <strong>b)</strong> How many cells after 5 hours?<br>
                    <strong>c)</strong> When will there be 10,000 cells?
                </p>
            </div>
        </div>

        <!-- Practice 2 -->
        <div class="slide slide-exercise" data-slide="16" data-title="Practice 2">
            <div class="slide-content">
                <h2>Practice Problem 2</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    A population follows \( \frac{dP}{dt} = 0.1P\left(1 - \frac{P}{1000}\right) \)
                    with initial population 100.
                </p>
                <p style="font-size: 1.5rem;">
                    <strong>a)</strong> What is the carrying capacity?<br>
                    <strong>b)</strong> At what population is growth fastest?<br>
                    <strong>c)</strong> Write the solution \( P(t) \).
                </p>
            </div>
        </div>

        <!-- Exit Ticket -->
        <div class="slide slide-statement" data-slide="17" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    1. What is the general solution to \( \frac{dy}{dt} = ky \)?
                </p>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    2. In the logistic model, what does \( L \) represent?
                </p>
                <p style="font-size: 1.5rem;">
                    3. Why does the logistic model predict slower growth as \( y \to L \)?
                </p>
            </div>
        </div>

        <!-- Closing -->
        <div class="slide slide-title" data-slide="18" data-title="Closing">
            <div class="slide-content">
                <h2>Key Takeaways</h2>
                <p style="font-size: 1.5rem; text-align: left; max-width: 800px; margin: 0 auto;">
                    • Exponential: \( \frac{dy}{dt} = ky \) → \( y = y_0 e^{kt} \)<br><br>
                    • Logistic: \( \frac{dy}{dt} = ky(1 - \frac{y}{L}) \) → \( y = \frac{L}{1 + Ae^{-kt}} \)<br><br>
                    • Exponential assumes unlimited resources<br><br>
                    • Logistic incorporates carrying capacity \( L \)<br><br>
                    • Maximum logistic growth at \( y = \frac{L}{2} \)
                </p>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Navigation -->
    <div class="nav-arrows">
        <button class="nav-arrow" id="prevBtn">←</button>
        <span class="slide-counter"><span id="currentSlide">1</span>/<span id="totalSlides">19</span></span>
        <button class="nav-arrow" id="nextBtn">→</button>
    </div>

    <script src="../shared/presentation.js"></script>
    <script>
        function drawExponentialViz() {
            const container = document.getElementById('exponential-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 100, bottom: 50, left: 60 };
            const innerWidth = width - margin.left - margin.right;
            const innerHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const xScale = d3.scaleLinear().domain([0, 5]).range([0, innerWidth]);
            const yScale = d3.scaleLinear().domain([0, 5]).range([innerHeight, 0]);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${innerHeight})`)
                .call(d3.axisBottom(xScale))
                .style('font-size', '1rem');

            g.append('g')
                .call(d3.axisLeft(yScale))
                .style('font-size', '1rem');

            // Growth curve
            const growth = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(Math.exp(0.4 * d)));

            const xVals = d3.range(0, 5, 0.1);

            g.append('path')
                .datum(xVals)
                .attr('fill', 'none')
                .attr('stroke', '#059669')
                .attr('stroke-width', 3)
                .attr('d', growth);

            // Decay curve
            const decay = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(4 * Math.exp(-0.4 * d)));

            g.append('path')
                .datum(xVals)
                .attr('fill', 'none')
                .attr('stroke', '#dc2626')
                .attr('stroke-width', 3)
                .attr('d', decay);

            // Labels
            g.append('text')
                .attr('x', innerWidth / 2)
                .attr('y', innerHeight + 40)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('t');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('x', -innerHeight / 2)
                .attr('y', -45)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('y');

            // Legend
            g.append('text')
                .attr('x', innerWidth + 10)
                .attr('y', yScale(Math.exp(0.4 * 5)))
                .attr('font-size', '1.25rem')
                .attr('fill', '#059669')
                .text('k > 0');

            g.append('text')
                .attr('x', innerWidth + 10)
                .attr('y', yScale(4 * Math.exp(-0.4 * 5)))
                .attr('font-size', '1.25rem')
                .attr('fill', '#dc2626')
                .text('k < 0');
        }

        function drawLogisticViz() {
            const container = document.getElementById('logistic-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 30, bottom: 50, left: 60 };
            const innerWidth = width - margin.left - margin.right;
            const innerHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const L = 100;
            const k = 0.5;
            const y0 = 10;
            const A = (L - y0) / y0;

            const xScale = d3.scaleLinear().domain([0, 15]).range([0, innerWidth]);
            const yScale = d3.scaleLinear().domain([0, 120]).range([innerHeight, 0]);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${innerHeight})`)
                .call(d3.axisBottom(xScale))
                .style('font-size', '1rem');

            g.append('g')
                .call(d3.axisLeft(yScale))
                .style('font-size', '1rem');

            // Carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', innerWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#64748b')
                .attr('stroke-dasharray', '5,5')
                .attr('stroke-width', 2);

            g.append('text')
                .attr('x', innerWidth - 10)
                .attr('y', yScale(L) - 10)
                .attr('text-anchor', 'end')
                .attr('font-size', '1.25rem')
                .attr('fill', '#64748b')
                .text('L = 100');

            // Half carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', innerWidth)
                .attr('y1', yScale(L/2))
                .attr('y2', yScale(L/2))
                .attr('stroke', '#ea580c')
                .attr('stroke-dasharray', '3,3')
                .attr('stroke-width', 1);

            g.append('text')
                .attr('x', 10)
                .attr('y', yScale(L/2) - 10)
                .attr('font-size', '1rem')
                .attr('fill', '#ea580c')
                .text('L/2 (max growth)');

            // Logistic curve
            const logistic = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(L / (1 + A * Math.exp(-k * d))));

            const xVals = d3.range(0, 15, 0.1);

            g.append('path')
                .datum(xVals)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', logistic);

            // Labels
            g.append('text')
                .attr('x', innerWidth / 2)
                .attr('y', innerHeight + 40)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('t');

            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('x', -innerHeight / 2)
                .attr('y', -45)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('Population');
        }

        function drawComparisonViz() {
            const container = document.getElementById('comparison-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 700;
            const height = 400;
            const margin = { top: 30, right: 100, bottom: 50, left: 60 };
            const innerWidth = width - margin.left - margin.right;
            const innerHeight = height - margin.top - margin.bottom;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const L = 100;
            const k = 0.5;
            const y0 = 10;
            const A = (L - y0) / y0;

            const xScale = d3.scaleLinear().domain([0, 10]).range([0, innerWidth]);
            const yScale = d3.scaleLinear().domain([0, 150]).range([innerHeight, 0]);

            // Axes
            g.append('g')
                .attr('transform', `translate(0,${innerHeight})`)
                .call(d3.axisBottom(xScale))
                .style('font-size', '1rem');

            g.append('g')
                .call(d3.axisLeft(yScale))
                .style('font-size', '1rem');

            const xVals = d3.range(0, 10, 0.1);

            // Exponential curve
            const exp = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(Math.min(y0 * Math.exp(k * d), 150)));

            g.append('path')
                .datum(xVals)
                .attr('fill', 'none')
                .attr('stroke', '#059669')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '8,4')
                .attr('d', exp);

            // Logistic curve
            const logistic = d3.line()
                .x(d => xScale(d))
                .y(d => yScale(L / (1 + A * Math.exp(-k * d))));

            g.append('path')
                .datum(xVals)
                .attr('fill', 'none')
                .attr('stroke', '#ea580c')
                .attr('stroke-width', 3)
                .attr('d', logistic);

            // Carrying capacity line
            g.append('line')
                .attr('x1', 0)
                .attr('x2', innerWidth)
                .attr('y1', yScale(L))
                .attr('y2', yScale(L))
                .attr('stroke', '#64748b')
                .attr('stroke-dasharray', '5,5')
                .attr('stroke-width', 2);

            // Legend
            g.append('text')
                .attr('x', innerWidth + 10)
                .attr('y', 30)
                .attr('font-size', '1.25rem')
                .attr('fill', '#059669')
                .text('Exponential');

            g.append('text')
                .attr('x', innerWidth + 10)
                .attr('y', yScale(L) + 5)
                .attr('font-size', '1.25rem')
                .attr('fill', '#ea580c')
                .text('Logistic');

            // Labels
            g.append('text')
                .attr('x', innerWidth / 2)
                .attr('y', innerHeight + 40)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .text('t');
        }

        // Trigger visualizations
        const originalGoToSlide = window.Presentation.goToSlide;
        window.Presentation.goToSlide = function(n) {
            originalGoToSlide(n);
            if (n === 3) setTimeout(drawExponentialViz, 300);
            if (n === 11) setTimeout(drawLogisticViz, 300);
            if (n === 12) setTimeout(drawComparisonViz, 300);
        };
    </script>
</body>
</html>
