<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 55: Sequences and Series | AP Calculus BC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/styles.css">
    <style>
        :root {
            --theme-color: #4f46e5;
            --theme-color-light: #6366f1;
            --theme-color-dark: #4338ca;
            --sequence-color: #4f46e5;
            --sum-color: #22c55e;
            --partial-color: #f59e0b;
        }

        .unit-badge {
            background: var(--theme-color);
        }

        .bc-badge {
            background: linear-gradient(135deg, var(--theme-color), var(--theme-color-dark));
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .slide-title h1 {
            color: var(--theme-color);
        }

        .viz-container {
            width: 100%;
            height: 450px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .viz-container svg {
            max-width: 100%;
            max-height: 100%;
        }

        .definition-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--theme-color);
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        .definition-box h3 {
            color: var(--theme-color);
            margin: 0 0 0.5rem 0;
        }

        .sequence-display {
            font-family: 'Georgia', serif;
            font-size: 1.5rem;
            text-align: center;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin: 1rem 0;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .comparison-card {
            background: var(--bg-secondary);
            border: 2px solid var(--theme-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }

        .comparison-card h3 {
            color: var(--theme-color);
            margin-bottom: 1rem;
        }

        .comparison-card.series {
            border-color: var(--sum-color);
        }

        .comparison-card.series h3 {
            color: var(--sum-color);
        }

        .formula-box {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }

        .controls-container {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .control-btn {
            background: var(--theme-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        .control-btn:hover {
            background: var(--theme-color-dark);
        }

        .control-btn.active {
            background: var(--theme-color-dark);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 0.5rem;
            font-size: 1.1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 24px;
            height: 4px;
            border-radius: 2px;
        }

        .notation-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1.25rem;
            margin: 1rem 0;
        }

        .notation-table th,
        .notation-table td {
            padding: 0.75rem 1rem;
            text-align: center;
            border: 1px solid var(--bg-tertiary);
        }

        .notation-table th {
            background: var(--theme-color);
            color: white;
        }

        .notation-table tr:nth-child(even) {
            background: var(--bg-tertiary);
        }

        .example-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .example-row .label {
            font-weight: bold;
            color: var(--theme-color);
            min-width: 100px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .slider-container input[type="range"] {
            width: 200px;
        }

        .slider-value {
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--theme-color);
            min-width: 60px;
        }

        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            color: #92400e;
        }

        .warning-box h3 {
            color: #b45309;
            margin: 0 0 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theorem-box {
            background: var(--bg-secondary);
            border: 2px solid var(--theme-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .theorem-box h3 {
            color: var(--theme-color);
            margin: 0 0 1rem 0;
        }

        .contrapositive-box {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border: 2px solid #ef4444;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="presentation">

        <!-- Slide 0: Title -->
        <div class="slide slide-title" data-slide="0" data-section="Opening" data-title="Sequences and Series">
            <div class="slide-content">
                <div class="unit-badge">Unit 10: Infinite Sequences and Series</div>
                <span class="bc-badge">BC Only</span>
                <h1>Sequences and Series</h1>
                <p class="subtitle">The Mathematics of Infinite Sums</p>
                <p class="meta">Class 55 | CED 10.1 | NCSSM</p>
            </div>
        </div>

        <!-- Slide 1: Zeno's Paradox -->
        <div class="slide slide-statement" data-slide="1" data-section="Opening" data-title="Zeno's Paradox">
            <div class="slide-content">
                <p class="statement">To reach the door, you must first walk <em>halfway</em>. Then half the remaining distance. Then half again.</p>
                <p class="statement" style="margin-top: 2rem; font-size: 2rem; color: var(--theme-color);">Infinitely many steps—can you ever arrive?</p>
            </div>
        </div>

        <!-- Slide 2: The Central Question -->
        <div class="slide slide-statement" data-slide="2" data-section="Opening" data-title="The Central Question">
            <div class="slide-content">
                <p class="statement">What does it mean to <em>add</em> infinitely many numbers?</p>
                <p class="secondary" style="margin-top: 2rem; font-size: 1.5rem; color: var(--text-secondary);">Today we develop the mathematical framework to answer this question.</p>
            </div>
        </div>

        <!-- Slide 3: What is a Sequence? -->
        <div class="slide slide-two-part" data-slide="3" data-section="Sequences" data-title="What is a Sequence?">
            <div class="slide-content">
                <p class="primary">A <strong>sequence</strong> is an ordered list of numbers</p>
                <p class="secondary" style="margin-top: 1.5rem; font-size: 2rem;">\(a_1, a_2, a_3, a_4, \ldots\)</p>
                <p class="caption" style="margin-top: 2rem; font-size: 1.25rem;">Formally: a function from positive integers to real numbers</p>
            </div>
        </div>

        <!-- Slide 4: Sequence Notation -->
        <div class="slide slide-list" data-slide="4" data-section="Sequences" data-title="Sequence Notation">
            <div class="slide-content">
                <h2>Sequence Notation</h2>
                <ul>
                    <li>\(\{a_n\}\) — the entire sequence</li>
                    <li>\(\{a_n\}_{n=1}^{\infty}\) — explicit starting point</li>
                    <li>\(a_n\) — the \(n\)th term (a formula)</li>
                </ul>
                <div class="formula-box" style="margin-top: 1.5rem;">
                    <p><strong>Example:</strong> \(a_n = \frac{1}{n}\) gives \(1, \frac{1}{2}, \frac{1}{3}, \frac{1}{4}, \ldots\)</p>
                </div>
            </div>
        </div>

        <!-- Slide 5: Sequence Examples Visualization -->
        <div class="slide slide-visual" data-slide="5" data-section="Sequences" data-title="Sequence Examples">
            <div class="slide-content">
                <h2>Sequence Examples</h2>
                <div id="sequence-viz" class="viz-container"></div>
                <div class="controls-container">
                    <button class="control-btn active" data-seq="harmonic">1/n</button>
                    <button class="control-btn" data-seq="geometric">1/2^n</button>
                    <button class="control-btn" data-seq="alternating">(-1)^n/n</button>
                    <button class="control-btn" data-seq="ratio">(n+1)/n</button>
                </div>
            </div>
        </div>

        <!-- Slide 6: Convergence of Sequences -->
        <div class="slide slide-visual" data-slide="6" data-section="Sequences" data-title="Sequence Convergence">
            <div class="slide-content">
                <h2>When Does a Sequence Converge?</h2>
                <div class="definition-box">
                    <h3>Definition</h3>
                    <p>A sequence \(\{a_n\}\) <strong>converges</strong> to \(L\) if \(a_n\) gets arbitrarily close to \(L\) for large \(n\)</p>
                    <p class="math-display" style="margin-top: 1rem;">\[\lim_{n \to \infty} a_n = L\]</p>
                </div>
                <p class="caption" style="margin-top: 1rem;">If no such \(L\) exists (or limit is infinite), the sequence <strong>diverges</strong></p>
            </div>
        </div>

        <!-- Slide 7: Convergent vs Divergent Sequences -->
        <div class="slide slide-comparison" data-slide="7" data-section="Sequences" data-title="Convergent vs Divergent">
            <div class="slide-content">
                <h2>Convergent vs Divergent Sequences</h2>
                <div class="columns">
                    <div class="column">
                        <h3 style="color: var(--success);">Convergent</h3>
                        <ul style="list-style: none; margin-top: 1rem;">
                            <li style="padding: 0.5rem 0;">\(\{1/n\} \to 0\)</li>
                            <li style="padding: 0.5rem 0;">\(\{(n+1)/n\} \to 1\)</li>
                            <li style="padding: 0.5rem 0;">\(\{(-1)^n/n\} \to 0\)</li>
                        </ul>
                        <p style="margin-top: 1rem; font-size: 1.25rem;">Terms approach a finite limit</p>
                    </div>
                    <div class="column">
                        <h3 style="color: var(--danger);">Divergent</h3>
                        <ul style="list-style: none; margin-top: 1rem;">
                            <li style="padding: 0.5rem 0;">\(\{n\} \to \infty\)</li>
                            <li style="padding: 0.5rem 0;">\(\{(-1)^n\}\) oscillates</li>
                            <li style="padding: 0.5rem 0;">\(\{n^2\} \to \infty\)</li>
                        </ul>
                        <p style="margin-top: 1rem; font-size: 1.25rem;">No single limit exists</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Misconception - Bounded vs Convergent -->
        <div class="slide slide-statement" data-slide="8" data-section="Sequences" data-title="Bounded vs Convergent">
            <div class="slide-content">
                <h2>Common Misconception</h2>
                <div class="warning-box">
                    <h3>Warning: Bounded does NOT mean Convergent!</h3>
                    <p style="font-size: 1.25rem; margin-top: 0.5rem;">The sequence \(\{(-1)^n\} = -1, 1, -1, 1, \ldots\) is bounded between \(-1\) and \(1\), but it <strong>diverges</strong> because it oscillates.</p>
                </div>
                <p style="margin-top: 2rem; text-align: center; font-size: 1.5rem;">A sequence can stay bounded yet never settle on a single value.</p>
            </div>
        </div>

        <!-- Slide 9: From Sequence to Series -->
        <div class="slide slide-statement" data-slide="9" data-section="Series" data-title="From Sequence to Series">
            <div class="slide-content">
                <p class="statement">A <strong>series</strong> is what you get when you <em>add up</em> the terms of a sequence</p>
                <p style="margin-top: 2rem; font-size: 2rem; text-align: center;">\[\sum_{n=1}^{\infty} a_n = a_1 + a_2 + a_3 + \cdots\]</p>
            </div>
        </div>

        <!-- Slide 10: Partial Sums -->
        <div class="slide slide-visual" data-slide="10" data-section="Series" data-title="Partial Sums">
            <div class="slide-content">
                <h2>Partial Sums: The Key Concept</h2>
                <div class="definition-box">
                    <p style="font-size: 1.25rem; line-height: 2.2;">\(S_1 = a_1\)</p>
                    <p style="font-size: 1.25rem; line-height: 2.2;">\(S_2 = a_1 + a_2\)</p>
                    <p style="font-size: 1.25rem; line-height: 2.2;">\(S_3 = a_1 + a_2 + a_3\)</p>
                    <p style="font-size: 1.25rem; line-height: 2.2;">\(S_n = a_1 + a_2 + \cdots + a_n\)</p>
                </div>
                <p class="caption" style="margin-top: 1.5rem; font-size: 1.5rem; color: var(--theme-color);">The sequence \(\{S_n\}\) of partial sums is itself a sequence!</p>
            </div>
        </div>

        <!-- Slide 11: Series Convergence Definition -->
        <div class="slide slide-visual" data-slide="11" data-section="Series" data-title="Series Convergence">
            <div class="slide-content">
                <h2>When Does a Series Converge?</h2>
                <div class="definition-box" style="border-color: #d4a028;">
                    <h3 style="color: #d4a028;">Definition</h3>
                    <p style="font-size: 1.5rem;">A series \(\sum a_n\) <strong>converges</strong> if the sequence of partial sums \(\{S_n\}\) converges</p>
                    <p style="margin-top: 1rem; font-size: 1.5rem;">If \(\lim_{n \to \infty} S_n = S\), we write \(\sum_{n=1}^{\infty} a_n = S\)</p>
                </div>
                <p class="caption" style="margin-top: 1.5rem; font-size: 1.25rem;">Series convergence = partial sum sequence convergence</p>
            </div>
        </div>

        <!-- Slide 12: Geometric Series Preview -->
        <div class="slide slide-visual" data-slide="12" data-section="Series" data-title="Geometric Series Preview">
            <div class="slide-content">
                <h2>Example: \(\frac{1}{2} + \frac{1}{4} + \frac{1}{8} + \cdots\)</h2>
                <div id="partial-sums-viz" class="viz-container"></div>
                <div class="slider-container">
                    <span>Terms: </span>
                    <input type="range" id="terms-slider" min="1" max="20" value="5">
                    <span class="slider-value" id="terms-value">n = 5</span>
                </div>
                <p class="caption" style="margin-top: 0.5rem;">\(S_n = 1 - (1/2)^n \to 1\) — The series converges to 1</p>
            </div>
        </div>

        <!-- Slide 13: Sequence vs Series -->
        <div class="slide slide-comparison" data-slide="13" data-section="Series" data-title="Sequence vs Series">
            <div class="slide-content">
                <h2>Sequence vs Series: Critical Distinction</h2>
                <div class="columns">
                    <div class="column">
                        <h3 style="color: var(--theme-color);">Sequence \(\{a_n\}\)</h3>
                        <p style="font-size: 1.5rem; margin: 1rem 0;">An ordered <strong>LIST</strong> of numbers</p>
                        <p style="font-size: 1.5rem;">\(1, \frac{1}{2}, \frac{1}{3}, \frac{1}{4}, \ldots\)</p>
                        <p style="margin-top: 1rem; font-size: 1.25rem;">Question: Where do terms go?</p>
                    </div>
                    <div class="column">
                        <h3 style="color: var(--sum-color);">Series \(\sum a_n\)</h3>
                        <p style="font-size: 1.5rem; margin: 1rem 0;">A <strong>SUM</strong> of the terms</p>
                        <p style="font-size: 1.5rem;">\(1 + \frac{1}{2} + \frac{1}{3} + \frac{1}{4} + \cdots\)</p>
                        <p style="margin-top: 1rem; font-size: 1.25rem;">Question: What do partial sums approach?</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 14: The Dangerous Misconception -->
        <div class="slide slide-statement" data-slide="14" data-section="nth Term Test" data-title="The Dangerous Misconception">
            <div class="slide-content">
                <p class="statement">If \(a_n \to 0\), does \(\sum a_n\) converge?</p>
                <p style="margin-top: 2rem; font-size: 1.75rem; color: var(--danger); text-align: center;">This is the most common misconception in series!</p>
            </div>
        </div>

        <!-- Slide 15: The nth Term Test for Divergence -->
        <div class="slide slide-visual" data-slide="15" data-section="nth Term Test" data-title="nth Term Test">
            <div class="slide-content">
                <h2>The nth Term Test for Divergence</h2>
                <div class="theorem-box">
                    <h3>Theorem</h3>
                    <p style="font-size: 1.5rem;">If \(\sum a_n\) converges, then \(\lim_{n \to \infty} a_n = 0\)</p>
                </div>
                <div class="contrapositive-box" style="margin-top: 1rem;">
                    <h3 style="color: #b91c1c; margin: 0 0 0.5rem 0;">Contrapositive (THE USEFUL FORM)</h3>
                    <p style="font-size: 1.5rem;">If \(\lim_{n \to \infty} a_n \neq 0\), then \(\sum a_n\) <strong>DIVERGES</strong></p>
                </div>
            </div>
        </div>

        <!-- Slide 16: nth Term Test Warning -->
        <div class="slide slide-statement" data-slide="16" data-section="nth Term Test" data-title="nth Term Test Warning">
            <div class="slide-content">
                <p class="statement" style="font-size: 2.5rem;">If \(\lim_{n \to \infty} a_n = 0\), the test is <span style="color: var(--danger);">INCONCLUSIVE</span></p>
                <p style="margin-top: 1.5rem; font-size: 1.5rem; text-align: center;">We <strong>cannot</strong> conclude convergence!</p>
                <div class="warning-box" style="margin-top: 2rem;">
                    <h3>Critical Warning</h3>
                    <p style="font-size: 1.25rem;">\(a_n \to 0\) is <strong>NECESSARY</strong> but <strong>NOT SUFFICIENT</strong> for convergence</p>
                </div>
            </div>
        </div>

        <!-- Slide 17: The Harmonic Series -->
        <div class="slide slide-visual" data-slide="17" data-section="nth Term Test" data-title="The Harmonic Series">
            <div class="slide-content">
                <h2>The Harmonic Series: Essential Counterexample</h2>
                <div class="formula-box">
                    <p style="font-size: 1.75rem;">\[\sum_{n=1}^{\infty} \frac{1}{n} = 1 + \frac{1}{2} + \frac{1}{3} + \frac{1}{4} + \cdots\]</p>
                </div>
                <div class="comparison-grid" style="margin-top: 1.5rem;">
                    <div class="comparison-card">
                        <h3>Terms</h3>
                        <p style="font-size: 1.25rem;">\(\frac{1}{n} \to 0\) as \(n \to \infty\)</p>
                    </div>
                    <div class="comparison-card series" style="border-color: var(--danger);">
                        <h3 style="color: var(--danger);">BUT!</h3>
                        <p style="font-size: 1.25rem;">The series <strong>DIVERGES</strong>!</p>
                    </div>
                </div>
                <p class="caption" style="margin-top: 1rem;">Partial sums grow without bound, just very slowly</p>
            </div>
        </div>

        <!-- Slide 18: Harmonic Series Divergence -->
        <div class="slide slide-visual" data-slide="18" data-section="nth Term Test" data-title="Harmonic Divergence">
            <div class="slide-content">
                <h2>Why the Harmonic Series Diverges</h2>
                <div id="harmonic-viz" class="viz-container"></div>
                <p style="text-align: center; font-size: 1.25rem; margin-top: 0.5rem;">
                    Partial sums grow slowly but unboundedly: \(S_{10} \approx 2.93\), \(S_{100} \approx 5.19\), \(S_{1000} \approx 7.49\)
                </p>
            </div>
        </div>

        <!-- Slide 19: nth Term Test Examples -->
        <div class="slide slide-list" data-slide="19" data-section="nth Term Test" data-title="nth Term Test Examples">
            <div class="slide-content">
                <h2>nth Term Test Examples</h2>
                <ul>
                    <li>\(\sum \frac{n}{2n+1}\): \(\lim = \frac{1}{2} \neq 0 \Rightarrow\) <strong style="color: var(--danger);">Diverges</strong></li>
                    <li>\(\sum \cos\left(\frac{1}{n}\right)\): \(\lim = \cos(0) = 1 \neq 0 \Rightarrow\) <strong style="color: var(--danger);">Diverges</strong></li>
                    <li>\(\sum \frac{1}{n}\): \(\lim = 0 \Rightarrow\) <strong style="color: #f59e0b;">Inconclusive</strong> (actually diverges!)</li>
                    <li>\(\sum \frac{1}{n^2}\): \(\lim = 0 \Rightarrow\) <strong style="color: #f59e0b;">Inconclusive</strong> (actually converges!)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 20: Starting Index Matters -->
        <div class="slide slide-statement" data-slide="20" data-section="Practice" data-title="Starting Index">
            <div class="slide-content">
                <h2>Starting Index Matters!</h2>
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h3>\(\sum_{n=1}^{\infty} \frac{1}{2^n}\)</h3>
                        <p style="font-size: 1.25rem;">\(= \frac{1}{2} + \frac{1}{4} + \frac{1}{8} + \cdots\)</p>
                        <p style="font-size: 1.5rem; color: var(--theme-color); margin-top: 0.5rem;">\(= 1\)</p>
                    </div>
                    <div class="comparison-card">
                        <h3>\(\sum_{n=0}^{\infty} \frac{1}{2^n}\)</h3>
                        <p style="font-size: 1.25rem;">\(= 1 + \frac{1}{2} + \frac{1}{4} + \cdots\)</p>
                        <p style="font-size: 1.5rem; color: var(--theme-color); margin-top: 0.5rem;">\(= 2\)</p>
                    </div>
                </div>
                <p class="caption" style="margin-top: 1.5rem; font-size: 1.25rem;">Starting at \(n=0\) vs \(n=1\) changes the sum (though not convergence). <strong>Precision matters!</strong></p>
            </div>
        </div>

        <!-- Slide 21: Practice Problem -->
        <div class="slide slide-exercise" data-slide="21" data-section="Practice" data-title="Your Turn">
            <div class="slide-content">
                <h2>Your Turn</h2>
                <div class="prompt">
                    <p style="margin-bottom: 1.5rem;"><strong>Answer these questions:</strong></p>
                    <ol style="font-size: 1.35rem; line-height: 2.5; text-align: left; max-width: 700px; margin: 0 auto;">
                        <li>Does the sequence \(\{(2n-1)/n\}\) converge? If so, to what?</li>
                        <li>Can you conclude anything about \(\sum \frac{1}{\sqrt{n}}\) from the nth term test?</li>
                    </ol>
                </div>
                <p class="caption" style="margin-top: 1.5rem;">3 minutes</p>
            </div>
        </div>

        <!-- Slide 22: Practice Solution -->
        <div class="slide slide-list" data-slide="22" data-section="Practice" data-title="Solutions">
            <div class="slide-content">
                <h2>Solutions</h2>
                <ul>
                    <li>\(\lim \frac{2n-1}{n} = \lim \frac{2 - 1/n}{1} = 2\) — <strong style="color: var(--success);">Converges to 2</strong></li>
                    <li>\(\lim \frac{1}{\sqrt{n}} = 0\) — nth term test is <strong style="color: #f59e0b;">INCONCLUSIVE</strong></li>
                </ul>
                <p class="caption" style="margin-top: 1.5rem; font-size: 1.25rem;">Note: The second series actually diverges (it's a p-series with \(p = 1/2 < 1\))</p>
            </div>
        </div>

        <!-- Slide 23: Key Takeaways -->
        <div class="slide slide-list" data-slide="23" data-section="Summary" data-title="Key Takeaways">
            <div class="slide-content">
                <h2>Key Takeaways</h2>
                <ul>
                    <li>A sequence is an ordered list; a series is a sum</li>
                    <li>Series convergence means the partial sums converge</li>
                    <li>nth Term Test: If \(a_n \not\to 0\), the series diverges</li>
                    <li><strong style="color: var(--danger);">WARNING:</strong> \(a_n \to 0\) does NOT imply convergence</li>
                    <li>The harmonic series is the essential counterexample</li>
                </ul>
            </div>
        </div>

        <!-- Slide 24: Notation Summary -->
        <div class="slide slide-list" data-slide="24" data-section="Summary" data-title="Notation Summary">
            <div class="slide-content">
                <h2>Notation to Know</h2>
                <ul>
                    <li>\(a_n\): the \(n\)th term of a sequence</li>
                    <li>\(\{a_n\}\): the entire sequence</li>
                    <li>\(S_n\): the \(n\)th partial sum</li>
                    <li>\(\sum_{n=1}^{\infty} a_n\): the infinite series</li>
                    <li>\(S = \sum a_n\): the sum (if convergent)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 25: Exit Ticket -->
        <div class="slide slide-exercise" data-slide="25" data-section="Closing" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <div class="prompt">
                    <ol style="font-size: 1.35rem; line-height: 2.5; text-align: left; max-width: 700px; margin: 0 auto;">
                        <li>Does the sequence \(\{(n+1)/n\}\) converge? If so, to what?</li>
                        <li>If \(\sum a_n\) converges, what must be true about \(\lim_{n \to \infty} a_n\)?</li>
                        <li>Give an example of a divergent series where the terms approach 0.</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Slide 26: Coming Up -->
        <div class="slide slide-statement" data-slide="26" data-section="Closing" data-title="Coming Up">
            <div class="slide-content">
                <p class="statement" style="font-size: 2.5rem;">Next: <span style="color: var(--theme-color);">Geometric Series</span></p>
                <p style="margin-top: 2rem; font-size: 1.5rem; color: var(--text-secondary);">The first family of series where we can find both convergence AND the exact sum</p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>

        <!-- Slide Counter -->
        <div class="slide-counter">1 / 27</div>

        <!-- Keyboard Hint -->
        <div class="keyboard-hint">
            <kbd>←</kbd> <kbd>→</kbd> Navigate | <kbd>T</kbd> TOC | <kbd>S</kbd> Syllabus | <kbd>F</kbd> Fullscreen
        </div>

        <!-- Overlay Backdrop -->
        <div id="overlay-backdrop" class="overlay-backdrop"></div>

        <!-- TOC Overlay -->
        <div id="toc-overlay" class="toc-overlay">
            <button id="toc-close" class="toc-close">&times;</button>
            <div class="toc-header">
                <h3>Table of Contents</h3>
                <div class="class-info">Class 55: Sequences and Series</div>
            </div>
            <div id="toc-content" class="toc-content"></div>
            <div class="toc-footer">
                <a href="../index.html">← Back to Course Syllabus</a>
            </div>
        </div>

        <!-- Appendix Overlay -->
        <div id="appendix-overlay" class="appendix-overlay">
            <div class="appendix-header">
                <h3>Appendix</h3>
                <button id="appendix-close" class="appendix-close">&times;</button>
            </div>
            <div id="appendix-content" class="appendix-content"></div>
            <div class="appendix-nav">
                <button id="appendix-prev" class="appendix-nav-btn">← Prev</button>
                <span id="appendix-counter" class="appendix-counter">1 / 1</span>
                <button id="appendix-next" class="appendix-nav-btn">Next →</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
    <script src="../shared/presentation.js"></script>

    <script>
        // Visualization management
        const visualizationSlides = {
            5: drawSequenceViz,
            12: drawPartialSumsViz,
            18: drawHarmonicViz
        };

        let lastSlide = -1;
        let currentSeqType = 'harmonic';

        function checkAndDrawVisualization() {
            if (!window.Presentation) return;
            const currentSlide = window.Presentation.getCurrentSlide();
            if (currentSlide !== lastSlide) {
                lastSlide = currentSlide;
                if (visualizationSlides[currentSlide]) {
                    setTimeout(visualizationSlides[currentSlide], 100);
                }
            }
        }

        setInterval(checkAndDrawVisualization, 200);

        // Sequence Visualization
        function drawSequenceViz() {
            const container = d3.select('#sequence-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 400;
            const margin = { top: 40, right: 40, bottom: 60, left: 70 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const sequences = {
                harmonic: { fn: n => 1 / n, limit: 0, label: '1/n → 0' },
                geometric: { fn: n => 1 / Math.pow(2, n), limit: 0, label: '1/2ⁿ → 0' },
                alternating: { fn: n => Math.pow(-1, n) / n, limit: 0, label: '(-1)ⁿ/n → 0' },
                ratio: { fn: n => (n + 1) / n, limit: 1, label: '(n+1)/n → 1' }
            };

            const currentSeq = sequences[currentSeqType];
            const nValues = d3.range(1, 21);
            const data = nValues.map(n => ({ n, value: currentSeq.fn(n) }));

            const xScale = d3.scaleLinear()
                .domain([0, 21])
                .range([margin.left, width - margin.right]);

            const yMin = currentSeqType === 'alternating' ? -1.2 : (currentSeqType === 'ratio' ? 0.8 : -0.2);
            const yMax = currentSeqType === 'alternating' ? 1.2 : (currentSeqType === 'ratio' ? 2.2 : 1.2);

            const yScale = d3.scaleLinear()
                .domain([yMin, yMax])
                .range([height - margin.bottom, margin.top]);

            // Grid
            svg.append('g')
                .selectAll('line')
                .data(yScale.ticks(6))
                .enter().append('line')
                .attr('x1', margin.left)
                .attr('x2', width - margin.right)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb')
                .attr('stroke-width', 1);

            // Axes
            svg.append('line')
                .attr('x1', margin.left)
                .attr('x2', width - margin.right)
                .attr('y1', yScale(0))
                .attr('y2', yScale(0))
                .attr('stroke', '#333')
                .attr('stroke-width', 2);

            svg.append('line')
                .attr('x1', margin.left)
                .attr('x2', margin.left)
                .attr('y1', margin.top)
                .attr('y2', height - margin.bottom)
                .attr('stroke', '#333')
                .attr('stroke-width', 2);

            // Axis labels - 1.25rem minimum
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 15)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text('n');

            svg.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('x', -height / 2)
                .attr('y', 20)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text('aₙ');

            // Limit line
            svg.append('line')
                .attr('x1', margin.left)
                .attr('x2', width - margin.right)
                .attr('y1', yScale(currentSeq.limit))
                .attr('y2', yScale(currentSeq.limit))
                .attr('stroke', '#fbbf24')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4');

            // Limit label - 1.25rem minimum
            svg.append('text')
                .attr('x', width - margin.right + 5)
                .attr('y', yScale(currentSeq.limit))
                .attr('dy', '0.35em')
                .attr('font-size', '1.25rem')
                .attr('fill', '#fbbf24')
                .text(`L = ${currentSeq.limit}`);

            // Points
            svg.selectAll('.point')
                .data(data)
                .enter().append('circle')
                .attr('cx', d => xScale(d.n))
                .attr('cy', d => yScale(d.value))
                .attr('r', 7)
                .attr('fill', '#4f46e5');

            // X-axis ticks - 1.25rem minimum
            svg.selectAll('.tick-label')
                .data([1, 5, 10, 15, 20])
                .enter().append('text')
                .attr('x', d => xScale(d))
                .attr('y', height - margin.bottom + 25)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text(d => d);

            // Y-axis ticks - 1.25rem minimum
            svg.selectAll('.y-tick')
                .data(yScale.ticks(5))
                .enter().append('text')
                .attr('x', margin.left - 10)
                .attr('y', d => yScale(d))
                .attr('dy', '0.35em')
                .attr('text-anchor', 'end')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text(d => d);

            // Sequence label - 1.25rem minimum
            svg.append('text')
                .attr('x', width - margin.right - 10)
                .attr('y', margin.top + 10)
                .attr('text-anchor', 'end')
                .attr('font-size', '1.25rem')
                .attr('fill', '#4f46e5')
                .text(currentSeq.label);

            // Setup button listeners
            document.querySelectorAll('.control-btn[data-seq]').forEach(btn => {
                btn.onclick = function() {
                    currentSeqType = this.dataset.seq;
                    document.querySelectorAll('.control-btn[data-seq]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    drawSequenceViz();
                };
            });
        }

        // Partial Sums Visualization
        function drawPartialSumsViz() {
            const container = d3.select('#partial-sums-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 380;
            const margin = { top: 50, right: 50, bottom: 60, left: 70 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const slider = document.getElementById('terms-slider');
            const valueDisplay = document.getElementById('terms-value');
            let numTerms = parseInt(slider.value);

            function update() {
                svg.selectAll('*').remove();
                numTerms = parseInt(slider.value);
                valueDisplay.textContent = `n = ${numTerms}`;

                const terms = d3.range(1, numTerms + 1).map(n => ({
                    n,
                    term: 1 / Math.pow(2, n),
                    sum: d3.range(1, n + 1).reduce((acc, k) => acc + 1 / Math.pow(2, k), 0)
                }));

                const xScale = d3.scaleLinear()
                    .domain([0, 21])
                    .range([margin.left, width - margin.right]);

                const yScale = d3.scaleLinear()
                    .domain([0, 1.2])
                    .range([height - margin.bottom, margin.top]);

                // Grid
                svg.append('g')
                    .selectAll('line')
                    .data([0, 0.25, 0.5, 0.75, 1])
                    .enter().append('line')
                    .attr('x1', margin.left)
                    .attr('x2', width - margin.right)
                    .attr('y1', d => yScale(d))
                    .attr('y2', d => yScale(d))
                    .attr('stroke', '#e5e7eb')
                    .attr('stroke-width', 1);

                // Limit line at y=1
                svg.append('line')
                    .attr('x1', margin.left)
                    .attr('x2', width - margin.right)
                    .attr('y1', yScale(1))
                    .attr('y2', yScale(1))
                    .attr('stroke', '#22c55e')
                    .attr('stroke-width', 2)
                    .attr('stroke-dasharray', '8,4');

                // Limit label - 1.25rem minimum
                svg.append('text')
                    .attr('x', width - margin.right + 5)
                    .attr('y', yScale(1))
                    .attr('dy', '0.35em')
                    .attr('font-size', '1.25rem')
                    .attr('fill', '#22c55e')
                    .text('S = 1');

                // Axes
                svg.append('line')
                    .attr('x1', margin.left)
                    .attr('x2', width - margin.right)
                    .attr('y1', yScale(0))
                    .attr('y2', yScale(0))
                    .attr('stroke', '#333')
                    .attr('stroke-width', 2);

                svg.append('line')
                    .attr('x1', margin.left)
                    .attr('x2', margin.left)
                    .attr('y1', margin.top)
                    .attr('y2', height - margin.bottom)
                    .attr('stroke', '#333')
                    .attr('stroke-width', 2);

                // Axis labels - 1.25rem minimum
                svg.append('text')
                    .attr('x', width / 2)
                    .attr('y', height - 15)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '1.25rem')
                    .attr('fill', '#333')
                    .text('n');

                svg.append('text')
                    .attr('transform', 'rotate(-90)')
                    .attr('x', -height / 2)
                    .attr('y', 20)
                    .attr('text-anchor', 'middle')
                    .attr('font-size', '1.25rem')
                    .attr('fill', '#333')
                    .text('Value');

                // Term bars
                svg.selectAll('.term-bar')
                    .data(terms)
                    .enter().append('rect')
                    .attr('x', d => xScale(d.n) - 8)
                    .attr('y', d => yScale(d.term))
                    .attr('width', 16)
                    .attr('height', d => yScale(0) - yScale(d.term))
                    .attr('fill', '#4f46e5')
                    .attr('opacity', 0.6);

                // Partial sum line
                const line = d3.line()
                    .x(d => xScale(d.n))
                    .y(d => yScale(d.sum));

                svg.append('path')
                    .datum(terms)
                    .attr('fill', 'none')
                    .attr('stroke', '#22c55e')
                    .attr('stroke-width', 3)
                    .attr('d', line);

                // Partial sum points
                svg.selectAll('.sum-point')
                    .data(terms)
                    .enter().append('circle')
                    .attr('cx', d => xScale(d.n))
                    .attr('cy', d => yScale(d.sum))
                    .attr('r', 6)
                    .attr('fill', '#22c55e');

                // Display current partial sum - 1.25rem minimum
                if (terms.length > 0) {
                    const lastSum = terms[terms.length - 1].sum;
                    svg.append('text')
                        .attr('x', width / 2)
                        .attr('y', margin.top - 15)
                        .attr('text-anchor', 'middle')
                        .attr('font-size', '1.25rem')
                        .attr('fill', '#22c55e')
                        .text(`Sₙ = ${lastSum.toFixed(4)}`);
                }

                // Legend - 1.25rem minimum
                svg.append('rect')
                    .attr('x', margin.left + 10)
                    .attr('y', margin.top)
                    .attr('width', 15)
                    .attr('height', 15)
                    .attr('fill', '#4f46e5')
                    .attr('opacity', 0.6);

                svg.append('text')
                    .attr('x', margin.left + 30)
                    .attr('y', margin.top + 12)
                    .attr('font-size', '1.25rem')
                    .attr('fill', '#333')
                    .text('Terms aₙ');

                svg.append('circle')
                    .attr('cx', margin.left + 17)
                    .attr('cy', margin.top + 35)
                    .attr('r', 6)
                    .attr('fill', '#22c55e');

                svg.append('text')
                    .attr('x', margin.left + 30)
                    .attr('y', margin.top + 40)
                    .attr('font-size', '1.25rem')
                    .attr('fill', '#333')
                    .text('Partial sums Sₙ');
            }

            slider.oninput = update;
            update();
        }

        // Harmonic Series Visualization
        function drawHarmonicViz() {
            const container = d3.select('#harmonic-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 400;
            const margin = { top: 40, right: 50, bottom: 60, left: 70 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            // Calculate harmonic partial sums
            const nValues = d3.range(1, 51);
            let sum = 0;
            const data = nValues.map(n => {
                sum += 1 / n;
                return { n, sum };
            });

            const xScale = d3.scaleLinear()
                .domain([0, 52])
                .range([margin.left, width - margin.right]);

            const yScale = d3.scaleLinear()
                .domain([0, 5])
                .range([height - margin.bottom, margin.top]);

            // Grid
            svg.append('g')
                .selectAll('line')
                .data(d3.range(0, 6))
                .enter().append('line')
                .attr('x1', margin.left)
                .attr('x2', width - margin.right)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb')
                .attr('stroke-width', 1);

            // Axes
            svg.append('line')
                .attr('x1', margin.left)
                .attr('x2', width - margin.right)
                .attr('y1', yScale(0))
                .attr('y2', yScale(0))
                .attr('stroke', '#333')
                .attr('stroke-width', 2);

            svg.append('line')
                .attr('x1', margin.left)
                .attr('x2', margin.left)
                .attr('y1', margin.top)
                .attr('y2', height - margin.bottom)
                .attr('stroke', '#333')
                .attr('stroke-width', 2);

            // Axis labels - 1.25rem minimum
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', height - 15)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text('n');

            svg.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('x', -height / 2)
                .attr('y', 20)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text('Sₙ (Partial Sum)');

            // Partial sum curve
            const line = d3.line()
                .x(d => xScale(d.n))
                .y(d => yScale(d.sum))
                .curve(d3.curveMonotoneX);

            svg.append('path')
                .datum(data)
                .attr('fill', 'none')
                .attr('stroke', '#4f46e5')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Arrow indicating growth - 1.25rem minimum
            svg.append('text')
                .attr('x', width - margin.right - 10)
                .attr('y', margin.top + 10)
                .attr('text-anchor', 'end')
                .attr('font-size', '1.5rem')
                .attr('font-weight', 'bold')
                .attr('fill', '#ef4444')
                .text('DIVERGES!');

            // No horizontal asymptote label - 1.25rem minimum
            svg.append('text')
                .attr('x', width - margin.right - 10)
                .attr('y', margin.top + 35)
                .attr('text-anchor', 'end')
                .attr('font-size', '1.25rem')
                .attr('fill', '#666')
                .text('(No horizontal asymptote)');

            // Y-axis labels - 1.25rem minimum
            svg.selectAll('.y-label')
                .data([1, 2, 3, 4])
                .enter().append('text')
                .attr('x', margin.left - 10)
                .attr('y', d => yScale(d))
                .attr('text-anchor', 'end')
                .attr('dy', '0.35em')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text(d => d);

            // X-axis labels - 1.25rem minimum
            svg.selectAll('.x-label')
                .data([10, 20, 30, 40, 50])
                .enter().append('text')
                .attr('x', d => xScale(d))
                .attr('y', height - margin.bottom + 25)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333')
                .text(d => d);

            // Reference point labels - 1.25rem minimum
            const refPoints = [
                { n: 10, label: 'S₁₀ ≈ 2.93' },
                { n: 30, label: 'S₃₀ ≈ 3.99' },
                { n: 50, label: 'S₅₀ ≈ 4.50' }
            ];

            refPoints.forEach(pt => {
                const ptData = data.find(d => d.n === pt.n);
                if (ptData) {
                    svg.append('circle')
                        .attr('cx', xScale(pt.n))
                        .attr('cy', yScale(ptData.sum))
                        .attr('r', 5)
                        .attr('fill', '#f97316');
                }
            });
        }
    </script>
</body>
</html>
