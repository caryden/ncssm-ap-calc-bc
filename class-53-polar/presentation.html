<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 53: Polar Coordinates | AP Calculus BC</title>
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            --theme-color: #0891b2;
            --theme-light: #cffafe;
            --theme-dark: #0e7490;
        }
        .unit-badge {
            background: var(--theme-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .formula-box {
            background: var(--theme-light);
            border-left: 4px solid var(--theme-color);
            padding: 1.5rem 2rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
            font-size: 1.75rem;
        }
        .example-box {
            background: #f8fafc;
            border: 2px solid var(--theme-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
        }
        .column {
            padding: 1rem;
        }
        .concept-box {
            background: white;
            border: 2px solid var(--theme-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }
        .concept-box h3 {
            color: var(--theme-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        .viz-container {
            width: 100%;
            max-width: 600px;
            height: 450px;
            margin: 0 auto;
        }
        .curve-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }
        .curve-item {
            text-align: center;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 0.5rem;
        }
        .curve-item h4 {
            color: var(--theme-color);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Title Slide -->
        <div class="slide slide-title active" data-slide="0" data-title="Polar Coordinates">
            <div class="slide-content">
                <span class="unit-badge">Unit 9: Parametric, Polar, Vectors</span>
                <h1>Polar Coordinates and Curves</h1>
                <h2>Class 53 | CED Topic 9.7</h2>
                <p style="font-size: 1.25rem; color: #64748b; margin-top: 2rem;">
                    A Different Way to Describe Position
                </p>
            </div>
        </div>

        <!-- Warm-Up -->
        <div class="slide slide-statement" data-slide="1" data-title="Warm-Up">
            <div class="slide-content">
                <h2>Warm-Up</h2>
                <p style="font-size: 1.5rem; margin-bottom: 1.5rem;">
                    In Cartesian coordinates, the point \( (\sqrt{3}, 1) \):
                </p>
                <p style="font-size: 1.5rem;">
                    What is its distance from the origin?<br>
                    What angle does it make with the positive x-axis?
                </p>
                <div class="formula-box" style="margin-top: 2rem;">
                    \( r = \sqrt{3+1} = 2 \), \( \theta = \arctan\left(\frac{1}{\sqrt{3}}\right) = \frac{\pi}{6} \)
                </div>
            </div>
        </div>

        <!-- What Are Polar Coordinates -->
        <div class="slide slide-statement" data-slide="2" data-title="Polar Coordinates">
            <div class="slide-content">
                <h2>Polar Coordinates</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    Instead of \( (x, y) \), describe a point by:
                </p>
                <div class="two-column">
                    <div class="concept-box">
                        <h3>\( r \)</h3>
                        <p style="font-size: 1.35rem;">Distance from origin</p>
                    </div>
                    <div class="concept-box">
                        <h3>\( \theta \)</h3>
                        <p style="font-size: 1.35rem;">Angle from positive x-axis</p>
                    </div>
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem;">
                    Written as \( (r, \theta) \)
                </p>
            </div>
        </div>

        <!-- Visualization -->
        <div class="slide slide-visual" data-slide="3" data-title="Visualization">
            <div class="slide-content">
                <h2>Polar vs Cartesian</h2>
                <div class="viz-container" id="polar-viz"></div>
            </div>
        </div>

        <!-- Conversion Formulas -->
        <div class="slide slide-content" data-slide="4" data-title="Conversions">
            <div class="slide-content">
                <h2>Conversion Formulas</h2>
                <div class="two-column">
                    <div class="concept-box">
                        <h3>Polar → Cartesian</h3>
                        <p style="font-size: 1.5rem;">
                            \( x = r\cos\theta \)<br>
                            \( y = r\sin\theta \)
                        </p>
                    </div>
                    <div class="concept-box">
                        <h3>Cartesian → Polar</h3>
                        <p style="font-size: 1.5rem;">
                            \( r = \sqrt{x^2 + y^2} \)<br>
                            \( \tan\theta = \frac{y}{x} \)
                        </p>
                    </div>
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem; color: #64748b;">
                    Also useful: \( x^2 + y^2 = r^2 \)
                </p>
            </div>
        </div>

        <!-- Polar Curves -->
        <div class="slide slide-statement" data-slide="5" data-title="Polar Curves">
            <div class="slide-content">
                <h2>Polar Curves</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    A polar curve is given by \( r = f(\theta) \)
                </p>
                <p style="font-size: 1.5rem;">
                    For each angle \( \theta \), the function tells us how far from the origin the curve is.
                </p>
                <p style="font-size: 1.5rem; margin-top: 2rem; color: #64748b;">
                    This creates beautiful curves that are hard to describe in Cartesian form!
                </p>
            </div>
        </div>

        <!-- Common Curves -->
        <div class="slide slide-content" data-slide="6" data-title="Common Curves">
            <div class="slide-content">
                <h2>Common Polar Curves</h2>
                <div class="curve-gallery">
                    <div class="curve-item">
                        <h4>Circle</h4>
                        <p>\( r = a \)</p>
                    </div>
                    <div class="curve-item">
                        <h4>Line through origin</h4>
                        <p>\( \theta = c \)</p>
                    </div>
                    <div class="curve-item">
                        <h4>Cardioid</h4>
                        <p>\( r = a(1 + \cos\theta) \)</p>
                    </div>
                    <div class="curve-item">
                        <h4>Rose (n petals)</h4>
                        <p>\( r = a\cos(n\theta) \)</p>
                    </div>
                    <div class="curve-item">
                        <h4>Limaçon</h4>
                        <p>\( r = a + b\cos\theta \)</p>
                    </div>
                    <div class="curve-item">
                        <h4>Spiral</h4>
                        <p>\( r = a\theta \)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rose Curves -->
        <div class="slide slide-visual" data-slide="7" data-title="Rose Curves">
            <div class="slide-content">
                <h2>Rose Curve: \( r = \cos(3\theta) \)</h2>
                <div class="viz-container" id="rose-viz"></div>
            </div>
        </div>

        <!-- Derivatives -->
        <div class="slide slide-content" data-slide="8" data-title="Derivatives">
            <div class="slide-content">
                <h2>Derivatives of Polar Curves</h2>
                <p style="font-size: 1.5rem;">
                    To find \( \frac{dy}{dx} \), use parametric form:
                </p>
                <p style="font-size: 1.35rem; margin-top: 1rem;">
                    \( x = r\cos\theta = f(\theta)\cos\theta \)<br>
                    \( y = r\sin\theta = f(\theta)\sin\theta \)
                </p>
                <div class="formula-box" style="margin-top: 1.5rem;">
                    \( \frac{dy}{dx} = \frac{dy/d\theta}{dx/d\theta} = \frac{f'(\theta)\sin\theta + f(\theta)\cos\theta}{f'(\theta)\cos\theta - f(\theta)\sin\theta} \)
                </div>
            </div>
        </div>

        <!-- Derivative Formula -->
        <div class="slide slide-statement" data-slide="9" data-title="Derivative Formula">
            <div class="slide-content">
                <h2>Slope Formula for Polar Curves</h2>
                <div class="formula-box" style="font-size: 1.75rem; text-align: center;">
                    \( \frac{dy}{dx} = \frac{\frac{dr}{d\theta}\sin\theta + r\cos\theta}{\frac{dr}{d\theta}\cos\theta - r\sin\theta} \)
                </div>
                <p style="font-size: 1.5rem; margin-top: 2rem; color: #64748b;">
                    Horizontal tangent: numerator = 0<br>
                    Vertical tangent: denominator = 0
                </p>
            </div>
        </div>

        <!-- Example 1 -->
        <div class="slide slide-content" data-slide="10" data-title="Example 1">
            <div class="slide-content">
                <h2>Example: Cardioid Derivative</h2>
                <p style="font-size: 1.5rem;">
                    Find the slope of \( r = 1 + \cos\theta \) at \( \theta = \frac{\pi}{2} \).
                </p>
                <p style="font-size: 1.35rem; margin-top: 1rem;">
                    \( r = 1 + \cos\theta \), \( \frac{dr}{d\theta} = -\sin\theta \)
                </p>
                <p style="font-size: 1.35rem; margin-top: 0.5rem;">
                    At \( \theta = \frac{\pi}{2} \): \( r = 1 \), \( \frac{dr}{d\theta} = -1 \)
                </p>
                <div class="formula-box" style="font-size: 1.5rem;">
                    \( \frac{dy}{dx} = \frac{(-1)(1) + (1)(0)}{(-1)(0) - (1)(1)} = \frac{-1}{-1} = 1 \)
                </div>
            </div>
        </div>

        <!-- Converting Equations -->
        <div class="slide slide-content" data-slide="11" data-title="Converting Equations">
            <div class="slide-content">
                <h2>Converting Equations</h2>
                <p style="font-size: 1.5rem;"><strong>Cartesian → Polar:</strong></p>
                <p style="font-size: 1.35rem;">
                    \( x^2 + y^2 = 4 \) becomes \( r^2 = 4 \) → \( r = 2 \)
                </p>
                <p style="font-size: 1.5rem; margin-top: 1.5rem;"><strong>Polar → Cartesian:</strong></p>
                <p style="font-size: 1.35rem;">
                    \( r = 2\cos\theta \)<br>
                    Multiply by \( r \): \( r^2 = 2r\cos\theta \)<br>
                    → \( x^2 + y^2 = 2x \)<br>
                    → \( (x-1)^2 + y^2 = 1 \) (circle centered at (1,0))
                </p>
            </div>
        </div>

        <!-- Symmetry -->
        <div class="slide slide-content" data-slide="12" data-title="Symmetry">
            <div class="slide-content">
                <h2>Symmetry in Polar Curves</h2>
                <div class="example-box">
                    <p style="font-size: 1.5rem;"><strong>Polar axis (x-axis):</strong> Replace \( \theta \) with \( -\theta \)</p>
                    <p style="font-size: 1.5rem; margin-top: 1rem;"><strong>Line \( \theta = \pi/2 \) (y-axis):</strong> Replace \( \theta \) with \( \pi - \theta \)</p>
                    <p style="font-size: 1.5rem; margin-top: 1rem;"><strong>Origin:</strong> Replace \( r \) with \( -r \)</p>
                </div>
                <p style="font-size: 1.5rem; margin-top: 1.5rem; color: #64748b;">
                    Use symmetry to reduce graphing work!
                </p>
            </div>
        </div>

        <!-- Practice 1 -->
        <div class="slide slide-exercise" data-slide="13" data-title="Practice 1">
            <div class="slide-content">
                <h2>Practice Problem 1</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    Convert to Cartesian coordinates:<br>
                    a) \( (4, \frac{\pi}{3}) \)<br>
                    b) \( (2, \frac{3\pi}{4}) \)
                </p>
                <p style="font-size: 1.5rem;">
                    Convert to polar coordinates:<br>
                    c) \( (-3, 3) \)<br>
                    d) \( (0, -5) \)
                </p>
            </div>
        </div>

        <!-- Practice 2 -->
        <div class="slide slide-exercise" data-slide="14" data-title="Practice 2">
            <div class="slide-content">
                <h2>Practice Problem 2</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    Find the slope of \( r = 2\sin\theta \) at \( \theta = \frac{\pi}{4} \).
                </p>
                <div class="example-box">
                    <p style="font-size: 1.5rem;"><strong>Hint:</strong> First find \( r \) and \( \frac{dr}{d\theta} \) at this angle.</p>
                </div>
            </div>
        </div>

        <!-- Practice 3 -->
        <div class="slide slide-exercise" data-slide="15" data-title="Practice 3">
            <div class="slide-content">
                <h2>Practice Problem 3</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    Convert the polar equation \( r = \frac{4}{1 + \sin\theta} \) to Cartesian form.
                </p>
                <p style="font-size: 1.35rem; color: #64748b;">
                    This is a conic section — what type?
                </p>
            </div>
        </div>

        <!-- Exit Ticket -->
        <div class="slide slide-statement" data-slide="16" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    1. How do you convert from polar to Cartesian?
                </p>
                <p style="font-size: 1.5rem; margin-bottom: 2rem;">
                    2. What does the curve \( r = 3 \) look like?
                </p>
                <p style="font-size: 1.5rem;">
                    3. Find the slope of \( r = 1 + \cos\theta \) at \( \theta = 0 \).
                </p>
            </div>
        </div>

        <!-- Closing -->
        <div class="slide slide-title" data-slide="17" data-title="Closing">
            <div class="slide-content">
                <h2>Key Takeaways</h2>
                <p style="font-size: 1.5rem; text-align: left; max-width: 800px; margin: 0 auto;">
                    • Polar: \( (r, \theta) \) — distance and angle from origin<br><br>
                    • Convert: \( x = r\cos\theta \), \( y = r\sin\theta \), \( r^2 = x^2 + y^2 \)<br><br>
                    • Polar curves: \( r = f(\theta) \) — beautiful shapes!<br><br>
                    • Slope uses parametric derivative formula<br><br>
                    • Use symmetry to simplify graphing
                </p>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Navigation -->
    <div class="nav-arrows">
        <button class="nav-arrow" id="prevBtn">←</button>
        <span class="slide-counter"><span id="currentSlide">1</span>/<span id="totalSlides">18</span></span>
        <button class="nav-arrow" id="nextBtn">→</button>
    </div>

    <script src="../shared/presentation.js"></script>
    <script>
        function drawPolarViz() {
            const container = document.getElementById('polar-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 600;
            const height = 450;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = 180;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            // Grid circles
            for (let i = 1; i <= 4; i++) {
                svg.append('circle')
                    .attr('cx', centerX)
                    .attr('cy', centerY)
                    .attr('r', i * radius / 4)
                    .attr('fill', 'none')
                    .attr('stroke', '#e2e8f0')
                    .attr('stroke-width', 1);
            }

            // Grid lines (angles)
            for (let i = 0; i < 12; i++) {
                const angle = i * Math.PI / 6;
                svg.append('line')
                    .attr('x1', centerX)
                    .attr('y1', centerY)
                    .attr('x2', centerX + radius * Math.cos(angle))
                    .attr('y2', centerY - radius * Math.sin(angle))
                    .attr('stroke', '#e2e8f0')
                    .attr('stroke-width', 1);
            }

            // Axes
            svg.append('line')
                .attr('x1', centerX - radius - 20)
                .attr('y1', centerY)
                .attr('x2', centerX + radius + 20)
                .attr('y2', centerY)
                .attr('stroke', '#64748b')
                .attr('stroke-width', 2);

            svg.append('line')
                .attr('x1', centerX)
                .attr('y1', centerY + radius + 20)
                .attr('x2', centerX)
                .attr('y2', centerY - radius - 20)
                .attr('stroke', '#64748b')
                .attr('stroke-width', 2);

            // Point at (r, θ) = (3, π/3)
            const r = 3 * radius / 4;
            const theta = Math.PI / 3;
            const px = centerX + r * Math.cos(theta);
            const py = centerY - r * Math.sin(theta);

            // Draw r line
            svg.append('line')
                .attr('x1', centerX)
                .attr('y1', centerY)
                .attr('x2', px)
                .attr('y2', py)
                .attr('stroke', '#0891b2')
                .attr('stroke-width', 3);

            // Draw angle arc
            const arc = d3.arc()
                .innerRadius(0)
                .outerRadius(50)
                .startAngle(0)
                .endAngle(-theta);

            svg.append('path')
                .attr('transform', `translate(${centerX},${centerY})`)
                .attr('d', arc)
                .attr('fill', '#cffafe')
                .attr('stroke', '#0891b2')
                .attr('stroke-width', 1);

            // Point
            svg.append('circle')
                .attr('cx', px)
                .attr('cy', py)
                .attr('r', 8)
                .attr('fill', '#e11d48');

            // Labels
            svg.append('text')
                .attr('x', (centerX + px) / 2 - 15)
                .attr('y', (centerY + py) / 2 - 10)
                .attr('font-size', '1.5rem')
                .attr('fill', '#0891b2')
                .text('r');

            svg.append('text')
                .attr('x', centerX + 60)
                .attr('y', centerY - 15)
                .attr('font-size', '1.5rem')
                .attr('fill', '#0891b2')
                .text('θ');

            svg.append('text')
                .attr('x', px + 10)
                .attr('y', py - 10)
                .attr('font-size', '1.25rem')
                .attr('fill', '#e11d48')
                .text('(r, θ)');

            // Cartesian equivalents
            svg.append('line')
                .attr('x1', px)
                .attr('y1', py)
                .attr('x2', px)
                .attr('y2', centerY)
                .attr('stroke', '#059669')
                .attr('stroke-dasharray', '5,3')
                .attr('stroke-width', 2);

            svg.append('line')
                .attr('x1', centerX)
                .attr('y1', centerY)
                .attr('x2', px)
                .attr('y2', centerY)
                .attr('stroke', '#059669')
                .attr('stroke-dasharray', '5,3')
                .attr('stroke-width', 2);

            svg.append('text')
                .attr('x', (centerX + px) / 2)
                .attr('y', centerY + 25)
                .attr('text-anchor', 'middle')
                .attr('font-size', '1.25rem')
                .attr('fill', '#059669')
                .text('x = r cos θ');

            svg.append('text')
                .attr('x', px + 15)
                .attr('y', (centerY + py) / 2)
                .attr('font-size', '1.25rem')
                .attr('fill', '#059669')
                .text('y = r sin θ');
        }

        function drawRoseViz() {
            const container = document.getElementById('rose-viz');
            if (!container || container.querySelector('svg')) return;

            const width = 600;
            const height = 450;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = 150;

            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            // Grid circles
            for (let i = 1; i <= 3; i++) {
                svg.append('circle')
                    .attr('cx', centerX)
                    .attr('cy', centerY)
                    .attr('r', i * scale / 3)
                    .attr('fill', 'none')
                    .attr('stroke', '#e2e8f0')
                    .attr('stroke-width', 1);
            }

            // Axes
            svg.append('line')
                .attr('x1', centerX - scale - 20)
                .attr('y1', centerY)
                .attr('x2', centerX + scale + 20)
                .attr('y2', centerY)
                .attr('stroke', '#64748b')
                .attr('stroke-width', 1);

            svg.append('line')
                .attr('x1', centerX)
                .attr('y1', centerY + scale + 20)
                .attr('x2', centerX)
                .attr('y2', centerY - scale - 20)
                .attr('stroke', '#64748b')
                .attr('stroke-width', 1);

            // Rose curve r = cos(3θ)
            const line = d3.lineRadial()
                .angle(d => d)
                .radius(d => scale * Math.cos(3 * d));

            const theta = d3.range(0, 2 * Math.PI, 0.01);

            svg.append('path')
                .datum(theta)
                .attr('transform', `translate(${centerX},${centerY}) rotate(-90)`)
                .attr('fill', '#cffafe')
                .attr('fill-opacity', 0.5)
                .attr('stroke', '#0891b2')
                .attr('stroke-width', 3)
                .attr('d', line);

            svg.append('text')
                .attr('x', width - 30)
                .attr('y', 30)
                .attr('text-anchor', 'end')
                .attr('font-size', '1.25rem')
                .attr('fill', '#0891b2')
                .text('3 petals');
        }

        // Trigger visualizations
        const originalGoToSlide = window.Presentation.goToSlide;
        window.Presentation.goToSlide = function(n) {
            originalGoToSlide(n);
            if (n === 3) setTimeout(drawPolarViz, 300);
            if (n === 7) setTimeout(drawRoseViz, 300);
        };
    </script>
</body>
</html>
