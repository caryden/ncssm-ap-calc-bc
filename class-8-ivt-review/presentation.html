<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 8: IVT and Unit Review | AP Calculus BC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --theme-color: #356093;
            --theme-color-light: #4a7ab8;
        }

        /* Theorem box */
        .theorem-box {
            background: rgba(53, 96, 147, 0.2);
            border: 2px solid var(--theme-color);
            border-radius: 12px;
            padding: 2rem;
            max-width: 800px;
            margin: 1.5rem auto;
        }

        .theorem-box .theorem-title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--theme-color);
            margin-bottom: 1rem;
        }

        /* Solution steps */
        .solution-steps {
            text-align: left;
            max-width: 800px;
            margin: 1.5rem auto;
        }

        .solution-step {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            margin: 0.5rem 0;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .solution-step .step-num {
            background: var(--theme-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-family: var(--font-display);
            flex-shrink: 0;
        }

        .solution-step .step-content {
            flex: 1;
            font-size: 1.25rem;
        }

        .solution-step.success {
            background: rgba(34, 197, 94, 0.2);
        }

        .solution-step.success .step-num {
            background: var(--success);
        }

        /* Visualization container */
        .visualization {
            width: 100%;
            max-width: 900px;
            margin: 1rem auto;
            min-height: 350px;
        }

        /* Review grid */
        .review-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            max-width: 800px;
            margin: 1.5rem auto;
        }

        .review-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.25rem;
            border-left: 4px solid var(--theme-color);
        }

        .review-card .title {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--theme-color);
            margin-bottom: 0.5rem;
        }

        .review-card .content {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* GNAW display */
        .gnaw-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            max-width: 900px;
            margin: 1.5rem auto;
        }

        .gnaw-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem 1rem;
            text-align: center;
        }

        .gnaw-card .letter {
            font-family: var(--font-display);
            font-weight: 800;
            font-size: 2.5rem;
            color: var(--theme-color);
        }

        .gnaw-card .word {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Comparison columns */
        .comparison-columns {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            max-width: 700px;
            margin: 1.5rem auto;
        }

        .comparison-column {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .comparison-column.yes {
            border: 2px solid var(--success);
        }

        .comparison-column.no {
            border: 2px solid var(--danger);
        }

        .comparison-column .header {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .comparison-column.yes .header {
            color: var(--success);
        }

        .comparison-column.no .header {
            color: var(--danger);
        }

        /* Temperature timeline */
        .temperature-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            font-size: 1.5rem;
            margin: 2rem 0;
        }

        .temp-value {
            background: var(--bg-secondary);
            padding: 1rem 2rem;
            border-radius: 12px;
            text-align: center;
        }

        .temp-value .value {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .temp-value .label {
            font-size: 1rem;
            color: var(--text-tertiary);
        }

        .temp-arrow {
            font-size: 2rem;
            color: var(--text-tertiary);
        }

        .temp-question {
            background: rgba(245, 158, 11, 0.2);
            border: 2px solid var(--warning);
            padding: 1rem 2rem;
            border-radius: 12px;
        }

        .temp-question .value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--warning);
        }

        /* Technique cards for review */
        .technique-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            max-width: 850px;
            margin: 1.5rem auto;
        }

        .technique-card {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1rem 1.25rem;
        }

        .technique-card .name {
            font-family: var(--font-display);
            font-weight: 600;
            color: var(--accent-secondary);
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .technique-card .when {
            font-size: 0.9rem;
            color: var(--text-tertiary);
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Slide 0: Title -->
        <div class="slide slide-title" data-slide="0" data-section="Opening" data-title="IVT">
            <div class="slide-content">
                <div class="unit-badge">Unit 1: Limits and Continuity</div>
                <h1>The Intermediate Value Theorem</h1>
                <p class="subtitle">What Continuity Guarantees</p>
                <p class="meta">Class 8 | February 14, 2026 | CED 1.12, 1.16</p>
            </div>
        </div>

        <!-- Slide 1: The Temperature Question -->
        <div class="slide slide-visual" data-slide="1" data-section="Opening" data-title="Temperature">
            <div class="slide-content">
                <h2>A Simple Question</h2>
                <div class="temperature-display">
                    <div class="temp-value">
                        <div class="value">98</div>
                        <div class="label">Noon</div>
                    </div>
                    <span class="temp-arrow">→</span>
                    <div class="temp-question">
                        <div class="value">100?</div>
                    </div>
                    <span class="temp-arrow">→</span>
                    <div class="temp-value">
                        <div class="value">101</div>
                        <div class="label">3pm</div>
                    </div>
                </div>
                <p class="caption" style="font-size: 1.5rem;">If your temperature was 98 at noon and 101 at 3pm,<br>was it ever exactly 100?</p>
            </div>
        </div>

        <!-- Slide 2: The Power of Continuity -->
        <div class="slide slide-statement" data-slide="2" data-section="Opening" data-title="Continuity Power">
            <div class="slide-content">
                <p class="statement">Continuity guarantees that <em>every</em> intermediate value is achieved.</p>
            </div>
        </div>

        <!-- Slide 3: The Theorem -->
        <div class="slide slide-visual" data-slide="3" data-section="IVT" data-title="Theorem">
            <div class="slide-content">
                <h2>Intermediate Value Theorem</h2>
                <div class="theorem-box">
                    <div class="theorem-title">IVT</div>
                    <p style="font-size: 1.25rem; margin-bottom: 1rem;">If:</p>
                    <ul style="font-size: 1.25rem; margin-bottom: 1rem; margin-left: 1.5rem;">
                        <li>f is continuous on [a, b]</li>
                        <li>N is any number between f(a) and f(b)</li>
                    </ul>
                    <p style="font-size: 1.25rem; margin-bottom: 1rem;">Then:</p>
                    <p style="font-size: 1.25rem;">There exists at least one c in (a, b) such that <strong>f(c) = N</strong></p>
                </div>
            </div>
        </div>

        <!-- Slide 4: Visual Understanding -->
        <div class="slide slide-visual" data-slide="4" data-section="IVT" data-title="Visualization">
            <div class="slide-content">
                <h2>IVT Visualized</h2>
                <div class="visualization" id="viz-ivt"></div>
                <p class="caption">The curve must cross every horizontal line between f(a) and f(b)</p>
            </div>
        </div>

        <!-- Slide 5: Key Requirements -->
        <div class="slide slide-list" data-slide="5" data-section="IVT" data-title="Requirements">
            <div class="slide-content">
                <h2>IVT Requirements</h2>
                <ul>
                    <li>f must be <strong>continuous</strong> on [a, b]</li>
                    <li>N must be strictly between f(a) and f(b)</li>
                    <li>Theorem guarantees <strong>existence</strong>, not uniqueness</li>
                    <li>c is in the <strong>open</strong> interval (a, b)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 6: What IVT Says and Doesn't -->
        <div class="slide slide-visual" data-slide="6" data-section="IVT" data-title="Says vs Doesn't">
            <div class="slide-content">
                <h2>What IVT Tells Us</h2>
                <div class="comparison-columns">
                    <div class="comparison-column yes">
                        <div class="header">IVT Says</div>
                        <p style="font-size: 1.25rem;">"There exists at least one c"</p>
                        <p style="font-size: 1rem; color: var(--text-tertiary); margin-top: 0.5rem;">Guarantees existence</p>
                    </div>
                    <div class="comparison-column no">
                        <div class="header">IVT Doesn't Say</div>
                        <p style="font-size: 1.25rem;">"The exact value of c is..."</p>
                        <p style="font-size: 1rem; color: var(--text-tertiary); margin-top: 0.5rem;">No formula for c</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 7: Example 1 -->
        <div class="slide slide-example" data-slide="7" data-section="Applications" data-title="Example 1">
            <div class="slide-content">
                <h2>Example: Existence of a Zero</h2>
                <div class="problem">
                    Show that \(f(x) = x^3 - x - 1\) has a zero in [1, 2].
                </div>
                <div class="solution-steps">
                    <div class="solution-step">
                        <span class="step-num">1</span>
                        <div class="step-content">
                            <div>f is a polynomial → continuous on [1, 2]</div>
                        </div>
                    </div>
                    <div class="solution-step">
                        <span class="step-num">2</span>
                        <div class="step-content">
                            <div>f(1) = 1 - 1 - 1 = -1 < 0</div>
                        </div>
                    </div>
                    <div class="solution-step">
                        <span class="step-num">3</span>
                        <div class="step-content">
                            <div>f(2) = 8 - 2 - 1 = 5 > 0</div>
                        </div>
                    </div>
                    <div class="solution-step">
                        <span class="step-num">4</span>
                        <div class="step-content">
                            <div>0 is between -1 and 5</div>
                        </div>
                    </div>
                    <div class="solution-step success">
                        <span class="step-num">✓</span>
                        <div class="step-content" style="color: var(--success);">
                            <div>By IVT, there exists c in (1, 2) with f(c) = 0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Example 1 Visualization -->
        <div class="slide slide-visual" data-slide="8" data-section="Applications" data-title="Zero Graph">
            <div class="slide-content">
                <h2>Visualizing the Zero</h2>
                <div class="visualization" id="viz-zero"></div>
                <p class="caption">The cubic crosses zero somewhere between x = 1 and x = 2</p>
            </div>
        </div>

        <!-- Slide 9: Bisection Method -->
        <div class="slide slide-visual" data-slide="9" data-section="Applications" data-title="Bisection">
            <div class="slide-content">
                <h2>Using IVT to Narrow Down</h2>
                <div class="visualization" id="viz-bisection"></div>
                <p class="caption">Each step halves the interval containing the root</p>
            </div>
        </div>

        <!-- Slide 10: When IVT Fails -->
        <div class="slide slide-visual" data-slide="10" data-section="Applications" data-title="IVT Fails">
            <div class="slide-content">
                <h2>When Continuity Fails</h2>
                <div class="visualization" id="viz-ivt-fails"></div>
                <div style="max-width: 600px; margin: 1rem auto; text-align: left; font-size: 1.25rem;">
                    <p>f(x) = 1/x on [-1, 1]</p>
                    <p style="margin-top: 0.5rem;">f(-1) = -1, f(1) = 1</p>
                    <p style="margin-top: 0.5rem; color: var(--danger);">But f(x) is never 0!</p>
                </div>
            </div>
        </div>

        <!-- Slide 11: The Lesson -->
        <div class="slide slide-statement" data-slide="11" data-section="Applications" data-title="Lesson">
            <div class="slide-content">
                <p class="statement" style="color: var(--warning);">Always verify continuity before applying IVT!</p>
            </div>
        </div>

        <!-- Slide 12: Unit 1 Complete -->
        <div class="slide slide-two-part" data-slide="12" data-section="Review" data-title="Unit Review">
            <div class="slide-content">
                <p class="primary" style="color: var(--theme-color);">Unit 1: Complete Review</p>
                <p class="secondary">All the tools in your limit toolkit</p>
            </div>
        </div>

        <!-- Slide 13: The G.N.A.W. Framework -->
        <div class="slide slide-visual" data-slide="13" data-section="Review" data-title="GNAW">
            <div class="slide-content">
                <h2>Four Approaches to Limits</h2>
                <div class="gnaw-grid">
                    <div class="gnaw-card">
                        <div class="letter">G</div>
                        <div class="word">Graphical</div>
                    </div>
                    <div class="gnaw-card">
                        <div class="letter">N</div>
                        <div class="word">Numerical</div>
                    </div>
                    <div class="gnaw-card">
                        <div class="letter">A</div>
                        <div class="word">Algebraic</div>
                    </div>
                    <div class="gnaw-card">
                        <div class="letter">W</div>
                        <div class="word">Written</div>
                    </div>
                </div>
                <p class="caption">The Rule of Four: Multiple representations strengthen understanding</p>
            </div>
        </div>

        <!-- Slide 14: Graphical Limits -->
        <div class="slide slide-visual" data-slide="14" data-section="Review" data-title="Graphical">
            <div class="slide-content">
                <h2>Graphical Approach (CED 1.3)</h2>
                <div class="review-grid">
                    <div class="review-card">
                        <div class="title">One-Sided Limits</div>
                        <div class="content">Read left-hand and right-hand limits from graphs</div>
                    </div>
                    <div class="review-card">
                        <div class="title">When DNE</div>
                        <div class="content">Jump, infinite, or oscillating behavior</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Holes vs Values</div>
                        <div class="content">Limit can exist even at holes</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Asymptotes</div>
                        <div class="content">Vertical = infinite limit, Horizontal = limit at infinity</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 15: Numerical Limits -->
        <div class="slide slide-visual" data-slide="15" data-section="Review" data-title="Numerical">
            <div class="slide-content">
                <h2>Numerical Approach (CED 1.4)</h2>
                <div class="review-grid">
                    <div class="review-card">
                        <div class="title">Tables of Values</div>
                        <div class="content">Approach from both sides</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Pattern Recognition</div>
                        <div class="content">Look for convergence to a value</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Limitations</div>
                        <div class="content">Approximation only, not exact</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Verification</div>
                        <div class="content">Good for checking algebraic work</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 16: Algebraic Methods -->
        <div class="slide slide-visual" data-slide="16" data-section="Review" data-title="Algebraic">
            <div class="slide-content">
                <h2>Algebraic Approaches (CED 1.5, 1.6)</h2>
                <div class="technique-grid">
                    <div class="technique-card">
                        <div class="name">Direct Substitution</div>
                        <div class="when">When function is defined at target</div>
                    </div>
                    <div class="technique-card">
                        <div class="name">Limit Laws</div>
                        <div class="when">Sum, product, quotient, power</div>
                    </div>
                    <div class="technique-card">
                        <div class="name">Factoring</div>
                        <div class="when">For 0/0 with polynomial expressions</div>
                    </div>
                    <div class="technique-card">
                        <div class="name">Rationalizing</div>
                        <div class="when">For 0/0 with radicals</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 17: Squeeze Theorem -->
        <div class="slide slide-visual" data-slide="17" data-section="Review" data-title="Squeeze">
            <div class="slide-content">
                <h2>Squeeze Theorem (CED 1.8)</h2>
                <div class="review-grid">
                    <div class="review-card">
                        <div class="title">When to Use</div>
                        <div class="content">Oscillating or bounded functions</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Key Requirement</div>
                        <div class="content">Both bounds approach same limit L</div>
                    </div>
                    <div class="review-card">
                        <div class="title">sin(x)/x → 1</div>
                        <div class="content">Fundamental trig limit</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Technique</div>
                        <div class="content">Find bounds: -1 ≤ sin ≤ 1, -1 ≤ cos ≤ 1</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 18: Continuity -->
        <div class="slide slide-visual" data-slide="18" data-section="Review" data-title="Continuity">
            <div class="slide-content">
                <h2>Continuity (CED 1.10, 1.11)</h2>
                <div style="max-width: 700px; margin: 1.5rem auto;">
                    <p style="font-size: 1.25rem; margin-bottom: 1.5rem;">f is continuous at a if:</p>
                    <div class="solution-steps">
                        <div class="solution-step">
                            <span class="step-num">1</span>
                            <div class="step-content">f(a) is defined</div>
                        </div>
                        <div class="solution-step">
                            <span class="step-num">2</span>
                            <div class="step-content">\(\lim_{x \to a} f(x)\) exists</div>
                        </div>
                        <div class="solution-step">
                            <span class="step-num">3</span>
                            <div class="step-content">\(\lim_{x \to a} f(x) = f(a)\)</div>
                        </div>
                    </div>
                    <p style="font-size: 1.25rem; margin-top: 1.5rem; color: var(--text-secondary);">Discontinuities: Removable, Jump, Infinite</p>
                </div>
            </div>
        </div>

        <!-- Slide 19: IVT Summary -->
        <div class="slide slide-visual" data-slide="19" data-section="Review" data-title="IVT Summary">
            <div class="slide-content">
                <h2>IVT (CED 1.16)</h2>
                <div class="theorem-box" style="max-width: 600px;">
                    <p style="font-size: 1.25rem;">If f is continuous on [a, b] and N is between f(a) and f(b), then there exists c in (a, b) with f(c) = N</p>
                </div>
                <div class="review-grid" style="margin-top: 1.5rem;">
                    <div class="review-card">
                        <div class="title">Application</div>
                        <div class="content">Prove existence of zeros or solutions</div>
                    </div>
                    <div class="review-card">
                        <div class="title">Key Check</div>
                        <div class="content">Verify continuity FIRST</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 20: Method Selection -->
        <div class="slide slide-visual" data-slide="20" data-section="Review" data-title="Method Selection">
            <div class="slide-content">
                <h2>Choosing Your Approach</h2>
                <div class="visualization" id="viz-flowchart"></div>
            </div>
        </div>

        <!-- Slide 21: Mixed Practice -->
        <div class="slide slide-exercise" data-slide="21" data-section="Closing" data-title="Practice">
            <div class="slide-content">
                <h2>Practice: Mixed Problems</h2>
                <div class="prompt" style="text-align: left; max-width: 700px; margin: 0 auto;">
                    <p style="margin-bottom: 1.5rem;">Evaluate or analyze:</p>
                    <div style="background: var(--bg-secondary); padding: 1rem 1.5rem; border-radius: 8px; margin: 0.75rem 0;">
                        1. \(\displaystyle\lim_{x \to 4} \frac{x - 4}{\sqrt{x} - 2}\)
                    </div>
                    <div style="background: var(--bg-secondary); padding: 1rem 1.5rem; border-radius: 8px; margin: 0.75rem 0;">
                        2. \(\displaystyle\lim_{x \to 0} x \sin\left(\frac{1}{x}\right)\)
                    </div>
                    <div style="background: var(--bg-secondary); padding: 1rem 1.5rem; border-radius: 8px; margin: 0.75rem 0;">
                        3. Show \(x^5 + x - 1 = 0\) has a solution in [0, 1]
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 22: Key Takeaways -->
        <div class="slide slide-list" data-slide="22" data-section="Closing" data-title="Takeaways">
            <div class="slide-content">
                <h2>Unit 1 Key Takeaways</h2>
                <ul>
                    <li>Limits describe <em>approach</em>, not arrival</li>
                    <li>Multiple techniques: choose wisely based on form</li>
                    <li>Continuity = limit equals function value</li>
                    <li>IVT: continuity guarantees intermediate values</li>
                </ul>
            </div>
        </div>

        <!-- Slide 23: Exit Ticket -->
        <div class="slide slide-exercise" data-slide="23" data-section="Closing" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <div class="prompt">
                    <p>Use IVT to show that the equation</p>
                    <div class="math-display" style="font-size: 2rem;">
                        \[\cos x = x\]
                    </div>
                    <p>has a solution in \([0, 1]\).</p>
                </div>
            </div>
        </div>

        <!-- Slide 24: Looking Ahead -->
        <div class="slide slide-statement" data-slide="24" data-section="Closing" data-title="Looking Ahead">
            <div class="slide-content">
                <p class="statement">Next Unit: <em>Differentiation</em></p>
                <p class="statement" style="font-size: 1.75rem; color: var(--text-secondary); margin-top: 1.5rem;">Where limits become rates of change</p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>

        <!-- Slide Counter -->
        <div class="slide-counter">1 / 25</div>

        <!-- Keyboard Hint -->
        <div class="keyboard-hint">
            <kbd>←</kbd> <kbd>→</kbd> Navigate | <kbd>T</kbd> TOC | <kbd>S</kbd> Syllabus | <kbd>F</kbd> Fullscreen
        </div>

        <!-- Overlay Backdrop -->
        <div id="overlay-backdrop" class="overlay-backdrop"></div>

        <!-- TOC Overlay -->
        <div id="toc-overlay" class="toc-overlay">
            <button id="toc-close" class="toc-close">&times;</button>
            <div class="toc-header">
                <h3>Table of Contents</h3>
                <div class="class-info">Class 8: IVT and Unit Review</div>
            </div>
            <div id="toc-content" class="toc-content"></div>
            <div class="toc-footer">
                <a href="../index.html">← Back to Course Syllabus</a>
            </div>
        </div>

        <!-- Appendix Overlay -->
        <div id="appendix-overlay" class="appendix-overlay">
            <div class="appendix-header">
                <h3>Appendix</h3>
                <button id="appendix-close" class="appendix-close">&times;</button>
            </div>
            <div id="appendix-content" class="appendix-content"></div>
            <div class="appendix-nav">
                <button id="appendix-prev" class="appendix-nav-btn">← Prev</button>
                <span id="appendix-counter" class="appendix-counter">1 / 1</span>
                <button id="appendix-next" class="appendix-nav-btn">Next →</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="../shared/presentation.js"></script>
    <script>
        // D3 Visualizations for Class 8

        // Visualization mapping
        const visualizationSlides = {
            4: drawIVT,
            8: drawZero,
            9: drawBisection,
            10: drawIVTFails,
            20: drawFlowchart
        };

        let lastSlide = -1;

        function checkAndDrawVisualization() {
            if (!window.Presentation) return;
            const currentSlide = window.Presentation.getCurrentSlide();
            if (currentSlide !== lastSlide) {
                lastSlide = currentSlide;
                if (visualizationSlides[currentSlide]) {
                    setTimeout(visualizationSlides[currentSlide], 100);
                }
            }
        }

        setInterval(checkAndDrawVisualization, 200);

        // Visualization 1: IVT Demo (Slide 4)
        function drawIVT() {
            const container = d3.select('#viz-ivt');
            container.selectAll('*').remove();

            const width = 800;
            const height = 350;
            const margin = { top: 40, right: 60, bottom: 60, left: 60 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`);

            const xScale = d3.scaleLinear().domain([0, 4]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([0, 5]).range([plotHeight, 0]);

            // Axes
            g.append('line').attr('x1', 0).attr('x2', plotWidth).attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', 'rgba(255,255,255,0.3)');

            // Draw continuous curve from (0.5, 1) to (3.5, 4)
            const curveData = [];
            for (let x = 0.5; x <= 3.5; x += 0.05) {
                const y = 1 + 0.5 * (x - 0.5) + 0.8 * Math.sin(2 * (x - 0.5));
                curveData.push({ x, y });
            }

            const line = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y)).curve(d3.curveNatural);

            g.append('path')
                .datum(curveData)
                .attr('fill', 'none')
                .attr('stroke', '#356093')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Endpoints
            const a = 0.5, b = 3.5;
            const fa = 1, fb = 4;

            g.append('circle').attr('cx', xScale(a)).attr('cy', yScale(fa)).attr('r', 6).attr('fill', '#22c55e');
            g.append('circle').attr('cx', xScale(b)).attr('cy', yScale(fb)).attr('r', 6).attr('fill', '#22c55e');

            // Horizontal line at N = 2.5
            const N = 2.5;
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(N))
                .attr('y2', yScale(N))
                .attr('stroke', '#f59e0b')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            // Find intersection point
            const c = 1.8;
            g.append('circle').attr('cx', xScale(c)).attr('cy', yScale(N)).attr('r', 8).attr('fill', '#f59e0b');

            // Labels
            g.append('text').attr('x', xScale(a)).attr('y', yScale(fa) + 25).attr('fill', 'white').attr('font-size', '1rem').attr('text-anchor', 'middle').text('f(a)');
            g.append('text').attr('x', xScale(b)).attr('y', yScale(fb) - 15).attr('fill', 'white').attr('font-size', '1rem').attr('text-anchor', 'middle').text('f(b)');
            g.append('text').attr('x', plotWidth + 10).attr('y', yScale(N) + 5).attr('fill', '#f59e0b').attr('font-size', '1rem').text('N');
            g.append('text').attr('x', xScale(c)).attr('y', plotHeight + 25).attr('fill', '#f59e0b').attr('font-size', '1rem').attr('text-anchor', 'middle').text('c');

            // Vertical dashed line from c
            g.append('line')
                .attr('x1', xScale(c))
                .attr('x2', xScale(c))
                .attr('y1', yScale(N))
                .attr('y2', yScale(0))
                .attr('stroke', '#f59e0b')
                .attr('stroke-width', 1)
                .attr('stroke-dasharray', '3,3');
        }

        // Visualization 2: Zero of x³ - x - 1 (Slide 8)
        function drawZero() {
            const container = d3.select('#viz-zero');
            container.selectAll('*').remove();

            const width = 800;
            const height = 350;
            const margin = { top: 40, right: 60, bottom: 60, left: 60 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`);

            const xScale = d3.scaleLinear().domain([0, 3]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([-3, 8]).range([plotHeight, 0]);

            // Grid
            g.append('line').attr('x1', 0).attr('x2', plotWidth).attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 1);
            g.append('line').attr('x1', xScale(0)).attr('x2', xScale(0)).attr('y1', 0).attr('y2', plotHeight).attr('stroke', 'rgba(255,255,255,0.3)');

            // Function: x³ - x - 1
            const curveData = [];
            for (let x = 0.5; x <= 2.5; x += 0.05) {
                curveData.push({ x, y: x * x * x - x - 1 });
            }

            const line = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y));

            g.append('path')
                .datum(curveData)
                .attr('fill', 'none')
                .attr('stroke', '#356093')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Mark f(1) and f(2)
            g.append('circle').attr('cx', xScale(1)).attr('cy', yScale(-1)).attr('r', 6).attr('fill', '#ef4444');
            g.append('circle').attr('cx', xScale(2)).attr('cy', yScale(5)).attr('r', 6).attr('fill', '#22c55e');

            // Mark zero
            const root = 1.3247; // approximate
            g.append('circle').attr('cx', xScale(root)).attr('cy', yScale(0)).attr('r', 8).attr('fill', '#f59e0b');

            // Labels
            g.append('text').attr('x', xScale(1)).attr('y', yScale(-1) + 25).attr('fill', '#ef4444').attr('font-size', '1rem').attr('text-anchor', 'middle').text('f(1) = -1');
            g.append('text').attr('x', xScale(2)).attr('y', yScale(5) - 15).attr('fill', '#22c55e').attr('font-size', '1rem').attr('text-anchor', 'middle').text('f(2) = 5');
            g.append('text').attr('x', xScale(root)).attr('y', yScale(0) - 15).attr('fill', '#f59e0b').attr('font-size', '1.25rem').attr('text-anchor', 'middle').text('Zero!');
        }

        // Visualization 3: Bisection (Slide 9)
        function drawBisection() {
            const container = d3.select('#viz-bisection');
            container.selectAll('*').remove();

            const width = 800;
            const height = 300;
            const margin = { top: 40, right: 60, bottom: 80, left: 60 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const plotWidth = width - margin.left - margin.right;
            const g = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`);

            const xScale = d3.scaleLinear().domain([0.9, 2.1]).range([0, plotWidth]);

            // Draw intervals
            const intervals = [
                { a: 1, b: 2, label: 'Step 1: [1, 2]', color: '#356093' },
                { a: 1, b: 1.5, label: 'Step 2: [1, 1.5]', color: '#4a7ab8' },
                { a: 1.25, b: 1.5, label: 'Step 3: [1.25, 1.5]', color: '#6b9ed4' },
                { a: 1.25, b: 1.375, label: 'Step 4: [1.25, 1.375]', color: '#8bb8e8' }
            ];

            intervals.forEach((interval, i) => {
                const y = 30 + i * 50;

                // Interval bar
                g.append('rect')
                    .attr('x', xScale(interval.a))
                    .attr('y', y - 10)
                    .attr('width', xScale(interval.b) - xScale(interval.a))
                    .attr('height', 20)
                    .attr('fill', interval.color)
                    .attr('rx', 5);

                // Label
                g.append('text')
                    .attr('x', xScale(0.92))
                    .attr('y', y + 5)
                    .attr('fill', 'white')
                    .attr('font-size', '1rem')
                    .attr('text-anchor', 'start')
                    .text(interval.label);
            });

            // Mark the root approximation
            const root = 1.3247;
            g.append('line')
                .attr('x1', xScale(root))
                .attr('x2', xScale(root))
                .attr('y1', 0)
                .attr('y2', 220)
                .attr('stroke', '#f59e0b')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            g.append('text')
                .attr('x', xScale(root))
                .attr('y', 235)
                .attr('fill', '#f59e0b')
                .attr('font-size', '1rem')
                .attr('text-anchor', 'middle')
                .text('Root ≈ 1.325');
        }

        // Visualization 4: IVT Fails (Slide 10)
        function drawIVTFails() {
            const container = d3.select('#viz-ivt-fails');
            container.selectAll('*').remove();

            const width = 600;
            const height = 280;
            const margin = { top: 30, right: 50, bottom: 50, left: 50 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`);

            const xScale = d3.scaleLinear().domain([-1.5, 1.5]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([-5, 5]).range([plotHeight, 0]);

            // Axes
            g.append('line').attr('x1', 0).attr('x2', plotWidth).attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', 'rgba(255,255,255,0.5)');
            g.append('line').attr('x1', xScale(0)).attr('x2', xScale(0)).attr('y1', 0).attr('y2', plotHeight).attr('stroke', 'rgba(255,255,255,0.3)');

            // 1/x function
            const line = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y));

            const data1 = [];
            for (let x = -1.5; x <= -0.2; x += 0.05) data1.push({ x, y: 1/x });
            const data2 = [];
            for (let x = 0.2; x <= 1.5; x += 0.05) data2.push({ x, y: 1/x });

            g.append('path').datum(data1).attr('fill', 'none').attr('stroke', '#ef4444').attr('stroke-width', 3).attr('d', line);
            g.append('path').datum(data2).attr('fill', 'none').attr('stroke', '#ef4444').attr('stroke-width', 3).attr('d', line);

            // Vertical asymptote
            g.append('line')
                .attr('x1', xScale(0))
                .attr('x2', xScale(0))
                .attr('y1', 0)
                .attr('y2', plotHeight)
                .attr('stroke', '#ef4444')
                .attr('stroke-dasharray', '5,5')
                .attr('stroke-width', 2);

            // Endpoints
            g.append('circle').attr('cx', xScale(-1)).attr('cy', yScale(-1)).attr('r', 6).attr('fill', '#ef4444');
            g.append('circle').attr('cx', xScale(1)).attr('cy', yScale(1)).attr('r', 6).attr('fill', '#ef4444');

            // y = 0 line (no intersection)
            g.append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', yScale(0))
                .attr('y2', yScale(0))
                .attr('stroke', '#f59e0b')
                .attr('stroke-width', 2);

            // Labels
            g.append('text').attr('x', xScale(-1)).attr('y', yScale(-1) + 25).attr('fill', 'white').attr('font-size', '1rem').attr('text-anchor', 'middle').text('f(-1) = -1');
            g.append('text').attr('x', xScale(1)).attr('y', yScale(1) - 15).attr('fill', 'white').attr('font-size', '1rem').attr('text-anchor', 'middle').text('f(1) = 1');
            g.append('text').attr('x', xScale(0) + 10).attr('y', 15).attr('fill', '#ef4444').attr('font-size', '1rem').text('Discontinuous!');
        }

        // Visualization 5: Method Selection Flowchart (Slide 20)
        function drawFlowchart() {
            const container = d3.select('#viz-flowchart');
            container.selectAll('*').remove();

            const width = 800;
            const height = 350;

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            // Nodes
            const nodes = [
                { id: 'start', label: 'Direct\nSubstitution?', x: 400, y: 40, type: 'decision' },
                { id: 'done', label: 'Done!', x: 600, y: 40, type: 'end' },
                { id: 'form', label: '0/0 Form?', x: 400, y: 120, type: 'decision' },
                { id: 'poly', label: 'Polynomial?', x: 200, y: 200, type: 'decision' },
                { id: 'radical', label: 'Radical?', x: 400, y: 200, type: 'decision' },
                { id: 'bounded', label: 'Bounded?', x: 600, y: 200, type: 'decision' },
                { id: 'factor', label: 'FACTOR', x: 200, y: 290, type: 'action' },
                { id: 'rationalize', label: 'RATIONALIZE', x: 400, y: 290, type: 'action' },
                { id: 'squeeze', label: 'SQUEEZE', x: 600, y: 290, type: 'action' }
            ];

            // Draw edges
            svg.append('line').attr('x1', 400).attr('y1', 60).attr('x2', 400).attr('y2', 100).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 460).attr('y1', 40).attr('x2', 540).attr('y2', 40).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 340).attr('y1', 140).attr('x2', 200).attr('y2', 180).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 400).attr('y1', 140).attr('x2', 400).attr('y2', 180).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 460).attr('y1', 140).attr('x2', 600).attr('y2', 180).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 200).attr('y1', 220).attr('x2', 200).attr('y2', 260).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 400).attr('y1', 220).attr('x2', 400).attr('y2', 260).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);
            svg.append('line').attr('x1', 600).attr('y1', 220).attr('x2', 600).attr('y2', 260).attr('stroke', 'rgba(255,255,255,0.5)').attr('stroke-width', 2);

            // Labels
            svg.append('text').attr('x', 540).attr('y', 30).attr('fill', '#22c55e').attr('font-size', '1rem').text('Works');
            svg.append('text').attr('x', 410).attr('y', 85).attr('fill', '#f59e0b').attr('font-size', '0.9rem').text('Fails');

            // Draw nodes
            nodes.forEach(node => {
                const g = svg.append('g').attr('transform', `translate(${node.x}, ${node.y})`);

                if (node.type === 'decision') {
                    g.append('rect')
                        .attr('x', -55)
                        .attr('y', -20)
                        .attr('width', 110)
                        .attr('height', 40)
                        .attr('rx', 8)
                        .attr('fill', 'var(--bg-secondary)')
                        .attr('stroke', 'rgba(255,255,255,0.3)')
                        .attr('stroke-width', 2);
                } else if (node.type === 'end') {
                    g.append('circle')
                        .attr('r', 30)
                        .attr('fill', '#22c55e')
                        .attr('stroke', '#16a34a')
                        .attr('stroke-width', 2);
                } else if (node.type === 'action') {
                    g.append('rect')
                        .attr('x', -65)
                        .attr('y', -22)
                        .attr('width', 130)
                        .attr('height', 44)
                        .attr('rx', 22)
                        .attr('fill', '#356093')
                        .attr('stroke', '#4a7ab8')
                        .attr('stroke-width', 2);
                }

                // Labels
                const lines = node.label.split('\n');
                lines.forEach((line, i) => {
                    g.append('text')
                        .attr('x', 0)
                        .attr('y', (i - (lines.length - 1) / 2) * 16 + 5)
                        .attr('fill', 'white')
                        .attr('font-size', node.type === 'action' ? '1rem' : '0.9rem')
                        .attr('font-family', 'var(--font-display)')
                        .attr('font-weight', node.type === 'action' ? '700' : '500')
                        .attr('text-anchor', 'middle')
                        .text(line);
                });
            });
        }
    </script>
</body>
</html>
