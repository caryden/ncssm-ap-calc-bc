<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vector-Valued Functions | AP Calculus BC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/styles.css">
    <style>
        :root {
            --theme-color: #06b6d4;
            --theme-color-light: #22d3ee;
            --theme-color-dark: #0891b2;
            --vector-position: #8b5cf6;
            --vector-velocity: #10b981;
            --vector-accel: #f59e0b;
        }

        .unit-badge {
            background: var(--theme-color);
        }

        .bc-badge {
            background: linear-gradient(135deg, var(--theme-color), var(--theme-color-dark));
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .slide-title h1 {
            color: var(--theme-color);
        }

        .viz-container {
            width: 100%;
            height: 450px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .viz-container svg {
            max-width: 100%;
            max-height: 100%;
        }

        .definition-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--theme-color);
            padding: 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .definition-box h3 {
            color: var(--theme-color-dark);
            margin: 0 0 0.5rem 0;
        }

        .formula-box {
            background: var(--bg-secondary);
            border: 2px solid var(--theme-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            margin: 1rem 0;
            box-shadow: 0 4px 6px rgba(6, 182, 212, 0.1);
        }

        .formula-box.highlight {
            background: var(--bg-secondary);
            border-width: 3px;
        }

        .example-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .example-card {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            border-left: 4px solid var(--theme-color);
        }

        .example-card h4 {
            color: var(--theme-color-dark);
            margin: 0 0 0.5rem 0;
        }

        .step-list {
            counter-reset: step;
            list-style: none;
            padding: 0;
        }

        .step-list li {
            counter-increment: step;
            margin: 0.75rem 0;
            padding-left: 2.5rem;
            position: relative;
        }

        .step-list li::before {
            content: counter(step);
            position: absolute;
            left: 0;
            width: 1.75rem;
            height: 1.75rem;
            background: var(--theme-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .slider-container input[type="range"] {
            width: 200px;
            accent-color: var(--theme-color);
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 0.5rem;
            font-size: 1.1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 24px;
            height: 4px;
            border-radius: 2px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: start;
        }

        .vector-notation {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            font-size: 1.25rem;
        }

        .controls-container {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .control-btn {
            background: var(--theme-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        .control-btn:hover {
            background: var(--theme-color-dark);
        }

        .control-btn.active {
            background: var(--theme-color-dark);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1.1rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--bg-tertiary);
        }

        .comparison-table th {
            background: var(--theme-color);
            color: white;
        }

        .comparison-table tr:nth-child(even) {
            background: var(--bg-tertiary);
        }

        .three-column {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-box {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .info-box h4 {
            margin: 0 0 0.5rem 0;
        }

        .info-box.position { border-top: 4px solid var(--vector-position); }
        .info-box.velocity { border-top: 4px solid var(--vector-velocity); }
        .info-box.accel { border-top: 4px solid var(--vector-accel); }

        .info-box h4.position { color: var(--vector-position); }
        .info-box h4.velocity { color: var(--vector-velocity); }
        .info-box h4.accel { color: var(--vector-accel); }
    </style>
</head>
<body>
    <div class="presentation">

        <!-- Slide 0: Title -->
        <div class="slide slide-title" data-slide="0" data-section="Opening" data-title="Vector-Valued Functions">
            <div class="slide-content">
                <div class="unit-badge">Unit 9: Parametric, Polar, and Vectors</div>
                <span class="bc-badge">BC Only</span>
                <h1>Vector-Valued Functions</h1>
                <p class="subtitle">Unifying Position, Velocity, and Direction</p>
                <p class="meta">Class 51 | CED Topics 9.4, 9.5 | NCSSM</p>
            </div>
        </div>

        <!-- Slide 1: Warm-Up -->
        <div class="slide slide-exercise" data-slide="1" data-section="Opening" data-title="The Notation Problem">
            <div class="slide-content">
                <h2>The Notation Problem</h2>
                <div class="exercise-box">
                    <p style="font-size: 1.3rem;">A drone's position at time \(t\) is:</p>
                    <p class="math-display">\[x(t) = t^2, \quad y(t) = t^3\]</p>
                    <hr style="margin: 1.5rem 0; border-color: #e5e7eb;">
                    <p style="font-size: 1.25rem; color: var(--theme-color);">Two separate equations... can we use ONE function?</p>
                </div>
            </div>
        </div>

        <!-- Slide 2: The Vector Solution -->
        <div class="slide slide-two-part" data-slide="2" data-section="Opening" data-title="The Vector Solution">
            <div class="slide-content">
                <p class="primary">Package as a Vector!</p>
                <div class="formula-box highlight" style="margin: 1.5rem 0;">
                    <p class="math-display">\[\vec{r}(t) = \langle t^2, t^3 \rangle\]</p>
                    <p style="font-size: 1.2rem; margin-top: 0.5rem;">One function captures both coordinates</p>
                </div>
                <div class="example-grid" style="margin-top: 1.5rem;">
                    <div class="example-card">
                        <h4>Why This Matters</h4>
                        <ul style="font-size: 1.1rem; line-height: 1.8;">
                            <li>Unified notation for physics</li>
                            <li>Natural language for motion</li>
                            <li>Extends to 3D: \(\vec{r}(t) = \langle x, y, z \rangle\)</li>
                        </ul>
                    </div>
                    <div class="example-card">
                        <h4>Same Information</h4>
                        <p style="font-size: 1.1rem;">Parametric equations packaged differently</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: Vector Basics Review -->
        <div class="slide slide-comparison" data-slide="3" data-section="Review" data-title="Vector Fundamentals">
            <div class="slide-content">
                <h2>Vector Fundamentals</h2>
                <div class="columns">
                    <div class="column">
                        <h3 style="color: var(--theme-color);">Scalars (just magnitude)</h3>
                        <ul style="font-size: 1.15rem; line-height: 1.8; margin-top: 1rem;">
                            <li>Temperature: 72 degrees F</li>
                            <li>Mass: 5 kg</li>
                            <li>Speed: 60 mph</li>
                        </ul>
                    </div>
                    <div class="column">
                        <h3 style="color: var(--vector-velocity);">Vectors (magnitude + direction)</h3>
                        <ul style="font-size: 1.15rem; line-height: 1.8; margin-top: 1rem;">
                            <li>Velocity: 60 mph north</li>
                            <li>Force: 10 N at 30 degrees</li>
                            <li>Displacement: 5 m east</li>
                        </ul>
                    </div>
                </div>
                <div class="definition-box" style="margin-top: 1.5rem;">
                    <h3>Key Properties</h3>
                    <p>Component form: \(\vec{v} = \langle a, b \rangle\) | Magnitude: \(|\vec{v}| = \sqrt{a^2 + b^2}\) | Unit vector: \(\vec{v}/|\vec{v}|\)</p>
                </div>
            </div>
        </div>

        <!-- Slide 4: Vector Visualization -->
        <div class="slide slide-visual" data-slide="4" data-section="Review" data-title="Vectors in the Plane">
            <div class="slide-content">
                <h2>Vectors in the Plane</h2>
                <div id="vector-basics-viz" class="viz-container"></div>
                <div class="slider-container">
                    <span>\(a\) = </span>
                    <input type="range" id="vec-a-slider" min="-3" max="3" step="0.5" value="2">
                    <span id="vec-a-value">2</span>
                    <span style="margin-left: 1rem;">\(b\) = </span>
                    <input type="range" id="vec-b-slider" min="-3" max="3" step="0.5" value="1">
                    <span id="vec-b-value">1</span>
                </div>
            </div>
        </div>

        <!-- Slide 5: Vector-Valued Functions Definition -->
        <div class="slide slide-two-part" data-slide="5" data-section="Vector-Valued Functions" data-title="Definition">
            <div class="slide-content">
                <p class="primary">Vector-Valued Function</p>
                <div class="formula-box highlight" style="margin: 1.5rem 0;">
                    <p style="font-size: 1.2rem;">A function that assigns a VECTOR to each value of t</p>
                    <p class="math-display">\[\vec{r}(t) = \langle x(t), y(t) \rangle = x(t)\mathbf{i} + y(t)\mathbf{j}\]</p>
                </div>
                <p class="secondary">As t varies, the tip of \(\vec{r}(t)\) traces a curve.<br>\(\vec{r}(t)\) points FROM origin TO current position.</p>
            </div>
        </div>

        <!-- Slide 6: Example Gallery -->
        <div class="slide slide-list" data-slide="6" data-section="Vector-Valued Functions" data-title="Example Gallery">
            <div class="slide-content">
                <h2>Common Vector Functions</h2>
                <div class="list-wrapper">
                    <ul class="styled-list">
                        <li><span class="math-inline">\(\vec{r}(t) = \langle t, t^2 \rangle\)</span> — Parabola \(y = x^2\)</li>
                        <li><span class="math-inline">\(\vec{r}(t) = \langle \cos t, \sin t \rangle\)</span> — Unit circle (counterclockwise)</li>
                        <li><span class="math-inline">\(\vec{r}(t) = \langle t - \sin t, 1 - \cos t \rangle\)</span> — Cycloid</li>
                        <li><span class="math-inline">\(\vec{r}(t) = \langle 3\cos t, 2\sin t \rangle\)</span> — Ellipse</li>
                    </ul>
                </div>
                <p class="caption" style="margin-top: 1.5rem; font-size: 1.25rem;">Same curves as parametric equations, just packaged as vectors!</p>
            </div>
        </div>

        <!-- Slide 7: Position Vector Animation -->
        <div class="slide slide-visual" data-slide="7" data-section="Vector-Valued Functions" data-title="Tracing a Curve">
            <div class="slide-content">
                <h2>Position Vector: \(\vec{r}(t) = \langle \cos t, \sin t \rangle\)</h2>
                <div id="position-viz" class="viz-container"></div>
                <div class="slider-container">
                    <span>t = </span>
                    <input type="range" id="pos-t-slider" min="0" max="6.28" step="0.05" value="0">
                    <span id="pos-t-value">0.00</span>
                    <span style="margin-left: 1rem;">\(\vec{r}(t)\) = </span>
                    <span id="pos-r-value">(1.00, 0.00)</span>
                </div>
            </div>
        </div>

        <!-- Slide 8: The Big Question -->
        <div class="slide slide-statement" data-slide="8" data-section="Derivatives" data-title="The Big Question">
            <div class="slide-content">
                <p class="statement">How do we differentiate a vector-valued function?</p>
                <p class="secondary" style="margin-top: 2rem; font-size: 1.5rem; color: var(--text-secondary);">What does the derivative even mean geometrically?</p>
            </div>
        </div>

        <!-- Slide 9: Derivative Definition with Animation -->
        <div class="slide slide-visual" data-slide="9" data-section="Derivatives" data-title="Derivative as Tangent">
            <div class="slide-content">
                <h2>The Derivative of a Vector Function</h2>
                <div class="formula-box" style="margin-bottom: 1rem;">
                    <p class="math-display">\[\vec{r}'(t) = \lim_{h \to 0} \frac{\vec{r}(t+h) - \vec{r}(t)}{h}\]</p>
                </div>
                <div id="secant-tangent-viz" class="viz-container" style="height: 380px;"></div>
                <div class="slider-container">
                    <span style="font-size: 1.25rem;">h = </span>
                    <input type="range" id="h-slider" min="0.05" max="1.5" step="0.01" value="1">
                    <span id="h-value" style="font-size: 1.25rem; min-width: 60px;">1.00</span>
                </div>
                <p class="caption" style="font-size: 1.25rem;">As h approaches 0, the secant vector approaches the tangent vector</p>
            </div>
        </div>

        <!-- Slide 10: Component-by-Component Rule -->
        <div class="slide slide-two-part" data-slide="10" data-section="Derivatives" data-title="Component Rule">
            <div class="slide-content">
                <p class="primary">Differentiate Component by Component!</p>
                <div class="formula-box highlight" style="margin: 1.5rem 0;">
                    <p style="font-size: 1.2rem;">If \(\vec{r}(t) = \langle x(t), y(t) \rangle\), then</p>
                    <p class="math-display">\[\vec{r}'(t) = \langle x'(t), y'(t) \rangle\]</p>
                </div>
                <p class="secondary">Why? Vector subtraction and scalar division work component-wise.<br>The limit of a vector = vector of limits.</p>
            </div>
        </div>

        <!-- Slide 11: Velocity vs Speed (with misconception clarification) -->
        <div class="slide slide-comparison" data-slide="11" data-section="Derivatives" data-title="Velocity vs Speed">
            <div class="slide-content">
                <h2>Velocity vs. Speed</h2>
                <div class="columns">
                    <div class="column">
                        <h3 style="color: var(--vector-velocity);">Velocity (Vector)</h3>
                        <p class="math-display" style="font-size: 1.4rem;">\[\vec{v}(t) = \vec{r}'(t) = \langle x'(t), y'(t) \rangle\]</p>
                        <ul style="font-size: 1.15rem; margin-top: 1rem; line-height: 1.8;">
                            <li>Has magnitude AND direction</li>
                            <li>Points in direction of motion</li>
                            <li>Tangent to the curve</li>
                        </ul>
                    </div>
                    <div class="column">
                        <h3 style="color: var(--theme-color);">Speed (Scalar)</h3>
                        <p class="math-display" style="font-size: 1.4rem;">\[|\vec{v}(t)| = \sqrt{(x')^2 + (y')^2}\]</p>
                        <ul style="font-size: 1.15rem; margin-top: 1rem; line-height: 1.8;">
                            <li>Always non-negative</li>
                            <li>How fast, not which way</li>
                            <li>Same as arc length integrand!</li>
                        </ul>
                    </div>
                </div>
                <div class="definition-box" style="margin-top: 1.5rem; border-left-color: #ef4444;">
                    <h3 style="color: #ef4444;">Common Misconception</h3>
                    <p style="font-size: 1.2rem;"><strong>\(|\vec{r}'(t)|\) is SPEED, not slope!</strong></p>
                    <p style="margin-top: 0.5rem;">Slope = \(\dfrac{y'(t)}{x'(t)} = \dfrac{dy/dt}{dx/dt}\). Speed = \(\sqrt{(x')^2 + (y')^2}\). Different quantities!</p>
                </div>
            </div>
        </div>

        <!-- Slide 12: Derivative Example -->
        <div class="slide slide-example" data-slide="12" data-section="Derivatives" data-title="Derivative Example">
            <div class="slide-content">
                <h2>Example: Find the Velocity Vector</h2>
                <div class="two-column">
                    <div>
                        <p><strong>Given:</strong> \(\vec{r}(t) = \langle t^2 - 1, e^t \rangle\)</p>
                        <ul class="step-list" style="margin-top: 1.5rem;">
                            <li>\(x(t) = t^2 - 1 \Rightarrow x'(t) = 2t\)</li>
                            <li>\(y(t) = e^t \Rightarrow y'(t) = e^t\)</li>
                            <li>\(\vec{v}(t) = \langle 2t, e^t \rangle\)</li>
                        </ul>
                        <div style="margin-top: 1rem; padding: 0.75rem; background: var(--bg-tertiary); border-radius: 4px;">
                            <p>At \(t = 1\):</p>
                            <p>\(\vec{v}(1) = \langle 2, e \rangle\)</p>
                            <p>Speed \(= \sqrt{4 + e^2} \approx 2.90\)</p>
                        </div>
                    </div>
                    <div id="example1-viz" class="viz-container" style="height: 300px;"></div>
                </div>
            </div>
        </div>

        <!-- Slide 13: Velocity Visualization -->
        <div class="slide slide-visual" data-slide="13" data-section="Derivatives" data-title="Velocity Visualization">
            <div class="slide-content">
                <h2>Position and Velocity Vectors</h2>
                <div id="velocity-viz" class="viz-container"></div>
                <div class="slider-container">
                    <span>t = </span>
                    <input type="range" id="vel-t-slider" min="0" max="6.28" step="0.05" value="0.785">
                    <span id="vel-t-value">0.79</span>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--vector-position);"></div>
                        <span>Position \(\vec{r}(t)\)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--vector-velocity);"></div>
                        <span>Velocity \(\vec{v}(t)\)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 14: Acceleration Vector -->
        <div class="slide slide-two-part" data-slide="14" data-section="Derivatives" data-title="Acceleration">
            <div class="slide-content">
                <p class="primary">The Acceleration Vector</p>
                <div class="formula-box highlight" style="margin: 1.5rem 0;">
                    <p class="math-display">\[\vec{a}(t) = \vec{v}'(t) = \vec{r}''(t) = \langle x''(t), y''(t) \rangle\]</p>
                </div>
                <div class="three-column" style="margin-top: 1.5rem;">
                    <div class="info-box position">
                        <h4 class="position">Position</h4>
                        <p>\(\vec{r}(t)\)</p>
                        <p style="font-size: 1rem;">Where is it?</p>
                    </div>
                    <div class="info-box velocity">
                        <h4 class="velocity">Velocity</h4>
                        <p>\(\vec{v}(t) = \vec{r}'(t)\)</p>
                        <p style="font-size: 1rem;">How fast and which way?</p>
                    </div>
                    <div class="info-box accel">
                        <h4 class="accel">Acceleration</h4>
                        <p>\(\vec{a}(t) = \vec{r}''(t)\)</p>
                        <p style="font-size: 1rem;">How is velocity changing?</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 15: All Three Vectors -->
        <div class="slide slide-visual" data-slide="15" data-section="Derivatives" data-title="All Three Vectors">
            <div class="slide-content">
                <h2>Position, Velocity, and Acceleration</h2>
                <div id="all-vectors-viz" class="viz-container"></div>
                <div class="slider-container">
                    <span>t = </span>
                    <input type="range" id="all-t-slider" min="0" max="6.28" step="0.05" value="0.785">
                    <span id="all-t-value">0.79</span>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--vector-position);"></div>
                        <span>\(\vec{r}(t)\)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--vector-velocity);"></div>
                        <span>\(\vec{v}(t)\)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--vector-accel);"></div>
                        <span>\(\vec{a}(t)\)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 16: Unit Tangent Vector -->
        <div class="slide slide-two-part" data-slide="16" data-section="Applications" data-title="Unit Tangent Vector">
            <div class="slide-content">
                <p class="primary">The Unit Tangent Vector</p>
                <div class="formula-box highlight" style="margin: 1.5rem 0;">
                    <p class="math-display">\[\mathbf{T}(t) = \frac{\vec{r}'(t)}{|\vec{r}'(t)|}\]</p>
                </div>
                <p class="secondary" style="margin-top: 1rem;">Direction of motion, normalized to length 1</p>
                <div class="example-grid" style="margin-top: 1.5rem;">
                    <div class="example-card">
                        <h4>When to Use</h4>
                        <p style="font-size: 1.1rem;">When you only care about <strong>direction</strong>, not speed</p>
                    </div>
                    <div class="example-card">
                        <h4>Caution</h4>
                        <p style="font-size: 1.1rem;"><strong>Undefined</strong> where \(\vec{r}'(t) = \vec{0}\)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 17: Tangent Lines to Curves -->
        <div class="slide slide-two-part" data-slide="17" data-section="Applications" data-title="Tangent Lines">
            <div class="slide-content">
                <p class="primary">Tangent Line Formula</p>
                <div class="formula-box" style="margin: 1rem 0;">
                    <p style="font-size: 1.15rem;">Point on curve: <strong>P</strong> = \(\vec{r}(t_0)\)</p>
                    <p style="font-size: 1.15rem; margin-top: 0.5rem;">Direction vector: <strong>v</strong> = \(\vec{r}'(t_0)\)</p>
                    <p class="math-display" style="margin-top: 1rem;">\[\mathbf{L}(s) = \vec{r}(t_0) + s \cdot \vec{r}'(t_0)\]</p>
                </div>
                <p class="secondary" style="margin-top: 1rem;"><em>s</em> is a new parameter for points on the tangent line.<br>\(s = 0\) gives the point P.</p>
            </div>
        </div>

        <!-- Slide 18: Tangent Line Example -->
        <div class="slide slide-example" data-slide="18" data-section="Applications" data-title="Tangent Line Example">
            <div class="slide-content">
                <h2>Example: Tangent Line</h2>
                <p style="font-size: 1.3rem; margin-bottom: 1.5rem;"><strong>Find the tangent line to \(\vec{r}(t) = \langle t^2, t^3 \rangle\) at \(t = 1\)</strong></p>
                <ol class="step-list" style="max-width: 700px; margin: 0 auto;">
                    <li><strong>Point:</strong> \(\vec{r}(1) = \langle 1, 1 \rangle\)</li>
                    <li><strong>Derivative:</strong> \(\vec{r}'(t) = \langle 2t, 3t^2 \rangle\), so \(\vec{r}'(1) = \langle 2, 3 \rangle\)</li>
                    <li><strong>Tangent line:</strong> \(\mathbf{L}(s) = \langle 1, 1 \rangle + s\langle 2, 3 \rangle = \langle 1 + 2s, 1 + 3s \rangle\)</li>
                </ol>
                <div class="example-grid" style="margin-top: 1.5rem;">
                    <div class="example-card">
                        <h4>Parametric Form</h4>
                        <p>\(x = 1 + 2s\)</p>
                        <p>\(y = 1 + 3s\)</p>
                    </div>
                    <div class="example-card">
                        <h4>Cartesian Form</h4>
                        <p>\(y - 1 = \frac{3}{2}(x - 1)\)</p>
                        <p>or \(y = \frac{3}{2}x - \frac{1}{2}\)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 19: Integration of Vectors -->
        <div class="slide slide-two-part" data-slide="19" data-section="Integration" data-title="Integration">
            <div class="slide-content">
                <p class="primary">Integrating Vector-Valued Functions</p>
                <div class="formula-box highlight">
                    <p style="font-size: 1.2rem;"><strong>Indefinite Integral</strong></p>
                    <p class="math-display">\[\int \vec{r}(t) \, dt = \left\langle \int x(t) \, dt, \int y(t) \, dt \right\rangle + \vec{C}\]</p>
                </div>
                <div class="definition-box" style="margin-top: 1.5rem;">
                    <h3>Critical Warning!</h3>
                    <p style="font-size: 1.15rem;">The constant of integration is a <strong>VECTOR</strong>!</p>
                    <p>\(\vec{C} = \langle C_1, C_2 \rangle\), not just a number</p>
                </div>
            </div>
        </div>

        <!-- Slide 20: Integration Example -->
        <div class="slide slide-example" data-slide="20" data-section="Integration" data-title="Integration Example">
            <div class="slide-content">
                <h2>Example: Finding Position from Velocity</h2>
                <div class="two-column">
                    <div>
                        <p><strong>Given:</strong> \(\vec{v}(t) = \langle 2t, 3 \rangle\) and \(\vec{r}(0) = \langle 1, 2 \rangle\)</p>
                        <ul class="step-list" style="margin-top: 1rem;">
                            <li>\(\vec{r}(t) = \int \langle 2t, 3 \rangle \, dt\)</li>
                            <li>\(\vec{r}(t) = \langle t^2 + C_1, 3t + C_2 \rangle\)</li>
                            <li>Use \(\vec{r}(0) = \langle 1, 2 \rangle\):<br>
                                \(C_1 = 1, C_2 = 2\)</li>
                            <li>\(\vec{r}(t) = \langle t^2 + 1, 3t + 2 \rangle\)</li>
                        </ul>
                    </div>
                    <div id="integration-viz" class="viz-container" style="height: 300px;"></div>
                </div>
            </div>
        </div>

        <!-- Slide 21: Vector Calculus Summary -->
        <div class="slide slide-visual" data-slide="21" data-section="Summary" data-title="Summary Table">
            <div class="slide-content">
                <h2>Vector Calculus Summary</h2>
                <table class="comparison-table">
                    <tr>
                        <th>Operation</th>
                        <th>Position \(\vec{r}(t)\)</th>
                        <th>Velocity \(\vec{v}(t)\)</th>
                        <th>Acceleration \(\vec{a}(t)\)</th>
                    </tr>
                    <tr>
                        <td>Differentiate</td>
                        <td>\(\vec{r}'(t) = \vec{v}(t)\)</td>
                        <td>\(\vec{v}'(t) = \vec{a}(t)\)</td>
                        <td>--</td>
                    </tr>
                    <tr>
                        <td>Integrate</td>
                        <td>--</td>
                        <td>\(\int \vec{v}(t) \, dt = \vec{r}(t) + \vec{C}\)</td>
                        <td>\(\int \vec{a}(t) \, dt = \vec{v}(t) + \vec{C}\)</td>
                    </tr>
                    <tr>
                        <td>Magnitude</td>
                        <td>Distance from origin</td>
                        <td>Speed</td>
                        <td>Magnitude of accel.</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Slide 22: Practice Problems -->
        <div class="slide slide-exercise" data-slide="22" data-section="Practice" data-title="Practice Problems">
            <div class="slide-content">
                <h2>Practice Problems</h2>
                <div class="exercise-box">
                    <ol style="font-size: 1.1rem; line-height: 2.2;">
                        <li>Find \(\vec{v}(t)\) and \(\vec{a}(t)\) for \(\vec{r}(t) = \langle t^3, \sin t \rangle\)</li>
                        <li>Find speed at \(t = 2\) for \(\vec{r}(t) = \langle e^t, t^2 \rangle\)</li>
                        <li>Evaluate \(\displaystyle \int_0^1 \langle 2t, e^t \rangle \, dt\)</li>
                        <li>Given \(\vec{a}(t) = \langle 0, -10 \rangle\) and \(\vec{v}(0) = \langle 5, 20 \rangle\), find \(\vec{v}(t)\)</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Slide 23: Key Takeaways -->
        <div class="slide slide-list" data-slide="23" data-section="Summary" data-title="Key Takeaways">
            <div class="slide-content">
                <h2>Key Takeaways</h2>
                <div class="list-wrapper">
                    <ul class="styled-list">
                        <li>Vector functions: \(\vec{r}(t) = \langle x(t), y(t) \rangle\) packages parametric equations</li>
                        <li>Differentiate component by component: \(\vec{r}'(t) = \langle x'(t), y'(t) \rangle\)</li>
                        <li>\(\vec{r}'(t)\) is the tangent/velocity vector</li>
                        <li>\(|\vec{r}'(t)|\) is <strong>speed</strong> (always non-negative)</li>
                        <li>Integration is component-wise, with constant <strong>VECTOR</strong></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 24: Exit Ticket -->
        <div class="slide slide-exercise" data-slide="24" data-section="Closing" data-title="Exit Ticket">
            <div class="slide-content">
                <h2>Exit Ticket</h2>
                <div class="exercise-box">
                    <p>Given: \(\vec{r}(t) = \langle \sin t, \cos t \rangle\)</p>
                    <ol style="font-size: 1.2rem; margin-top: 1.5rem;">
                        <li>Find \(\vec{r}'(t)\)</li>
                        <li>What is the speed at any time t?</li>
                        <li>What kind of curve is this?</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Slide 25: Coming Up -->
        <div class="slide slide-statement" data-slide="25" data-section="Closing" data-title="Coming Up">
            <div class="slide-content">
                <p class="statement">Next: Motion in the Plane</p>
                <p class="secondary" style="margin-top: 2rem; font-size: 1.5rem;">Connecting position, velocity, and acceleration vectors to physics</p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>

        <!-- Slide Counter -->
        <div class="slide-counter">1 / 26</div>

        <!-- Keyboard Hint -->
        <div class="keyboard-hint">
            <kbd>←</kbd> <kbd>→</kbd> Navigate | <kbd>T</kbd> TOC | <kbd>S</kbd> Syllabus | <kbd>F</kbd> Fullscreen
        </div>

        <!-- Overlay Backdrop -->
        <div id="overlay-backdrop" class="overlay-backdrop"></div>

        <!-- TOC Overlay -->
        <div id="toc-overlay" class="toc-overlay">
            <button id="toc-close" class="toc-close">&times;</button>
            <div class="toc-header">
                <h3>Table of Contents</h3>
                <div class="class-info">Class 51: Vector-Valued Functions</div>
            </div>
            <div id="toc-content" class="toc-content"></div>
            <div class="toc-footer">
                <a href="../index.html">← Back to Course Syllabus</a>
            </div>
        </div>

        <!-- Appendix Overlay -->
        <div id="appendix-overlay" class="appendix-overlay">
            <div class="appendix-header">
                <h3>Appendix</h3>
                <button id="appendix-close" class="appendix-close">&times;</button>
            </div>
            <div id="appendix-content" class="appendix-content"></div>
            <div class="appendix-nav">
                <button id="appendix-prev" class="appendix-nav-btn">← Prev</button>
                <span id="appendix-counter" class="appendix-counter">1 / 1</span>
                <button id="appendix-next" class="appendix-nav-btn">Next →</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
    <script src="../shared/presentation.js"></script>

    <script>
        const visualizationSlides = {
            4: drawVectorBasicsViz,
            7: drawPositionViz,
            9: drawSecantTangentViz,
            12: drawExample1Viz,
            13: drawVelocityViz,
            15: drawAllVectorsViz,
            20: drawIntegrationViz
        };

        let lastSlide = -1;

        function checkAndDrawVisualization() {
            if (!window.Presentation) return;
            const currentSlide = window.Presentation.getCurrentSlide();
            if (currentSlide !== lastSlide) {
                lastSlide = currentSlide;
                if (visualizationSlides[currentSlide]) {
                    setTimeout(visualizationSlides[currentSlide], 100);
                }
            }
        }

        setInterval(checkAndDrawVisualization, 200);

        // Arrow marker helper
        function addArrowMarker(svg, id, color) {
            svg.append('defs').append('marker')
                .attr('id', id)
                .attr('viewBox', '0 0 10 10')
                .attr('refX', 9)
                .attr('refY', 5)
                .attr('markerWidth', 6)
                .attr('markerHeight', 6)
                .attr('orient', 'auto')
                .append('path')
                .attr('d', 'M 0 0 L 10 5 L 0 10 z')
                .attr('fill', color);
        }

        // Secant-to-Tangent Visualization (Derivative Definition)
        function drawSecantTangentViz() {
            const container = d3.select('#secant-tangent-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 350;
            const margin = { top: 30, right: 40, bottom: 50, left: 60 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Function: r(t) = <t, t^2> (parabola)
            const fx = t => t;
            const fy = t => t * t;
            const t0 = 1; // Fixed point

            // Scales
            const xScale = d3.scaleLinear().domain([-0.5, 3]).range([0, plotWidth]);
            const yScale = d3.scaleLinear().domain([-0.5, 4]).range([plotHeight, 0]);

            // Grid
            g.append('g')
                .selectAll('line.h')
                .data(d3.range(0, 5, 1))
                .enter()
                .append('line')
                .attr('x1', 0)
                .attr('x2', plotWidth)
                .attr('y1', d => yScale(d))
                .attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb')
                .attr('stroke-width', 1);

            g.append('g')
                .selectAll('line.v')
                .data(d3.range(0, 4, 1))
                .enter()
                .append('line')
                .attr('x1', d => xScale(d))
                .attr('x2', d => xScale(d))
                .attr('y1', 0)
                .attr('y2', plotHeight)
                .attr('stroke', '#e5e7eb')
                .attr('stroke-width', 1);

            // Axes
            g.append('line')
                .attr('x1', 0).attr('x2', plotWidth)
                .attr('y1', yScale(0)).attr('y2', yScale(0))
                .attr('stroke', '#333').attr('stroke-width', 2);

            g.append('line')
                .attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', 0).attr('y2', plotHeight)
                .attr('stroke', '#333').attr('stroke-width', 2);

            // Draw curve: r(t) = <t, t^2>
            const tValues = d3.range(0, 2.5, 0.05);
            const curveData = tValues.map(t => ({ x: fx(t), y: fy(t) }));
            const line = d3.line()
                .x(d => xScale(d.x))
                .y(d => yScale(d.y))
                .curve(d3.curveCatmullRom);

            g.append('path')
                .datum(curveData)
                .attr('fill', 'none')
                .attr('stroke', '#60a5fa')
                .attr('stroke-width', 3)
                .attr('d', line);

            // Curve label
            g.append('text')
                .attr('x', xScale(2.3))
                .attr('y', yScale(fy(2.3)) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#60a5fa')
                .text('r(t) = ⟨t, t²⟩');

            // Fixed point r(t0)
            const x0 = fx(t0);
            const y0 = fy(t0);

            g.append('circle')
                .attr('cx', xScale(x0))
                .attr('cy', yScale(y0))
                .attr('r', 8)
                .attr('fill', '#0891b2');

            g.append('text')
                .attr('x', xScale(x0) - 45)
                .attr('y', yScale(y0) - 15)
                .attr('font-size', '1.25rem')
                .attr('fill', '#0891b2')
                .text('r(t)');

            // Arrow markers
            addArrowMarker(svg, 'secant-arrow', '#f97316');
            addArrowMarker(svg, 'tangent-arrow', '#22c55e');

            // Moving point and secant vector (will be updated)
            const movingPoint = g.append('circle')
                .attr('r', 7)
                .attr('fill', '#a78bfa');

            const movingLabel = g.append('text')
                .attr('font-size', '1.25rem')
                .attr('fill', '#a78bfa');

            const secantVector = g.append('line')
                .attr('stroke', '#f97316')
                .attr('stroke-width', 3)
                .attr('marker-end', 'url(#secant-arrow)');

            // Tangent line (reference)
            const slope_tangent = 2 * t0; // derivative of t^2 at t=1 is 2t, so 2
            const tangentLine = g.append('line')
                .attr('stroke', '#22c55e')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '8,4')
                .attr('opacity', 0.5);

            // Show tangent direction
            const tangentX = 0.5;
            const tangentY = tangentX * slope_tangent;
            const tangentLen = Math.sqrt(tangentX * tangentX + tangentY * tangentY);
            const tangentScale = 0.6;

            // Draw extended tangent line
            const tLineXMin = -0.3;
            const tLineXMax = 2.5;
            const tLineYMin = y0 + slope_tangent * (tLineXMin - x0);
            const tLineYMax = y0 + slope_tangent * (tLineXMax - x0);

            tangentLine
                .attr('x1', xScale(tLineXMin))
                .attr('y1', yScale(Math.max(-0.5, tLineYMin)))
                .attr('x2', xScale(tLineXMax))
                .attr('y2', yScale(Math.min(4, tLineYMax)));

            // Info text
            const infoText = g.append('text')
                .attr('x', plotWidth - 10)
                .attr('y', 30)
                .attr('text-anchor', 'end')
                .attr('font-size', '1.25rem')
                .attr('fill', '#333');

            // Legend
            g.append('line')
                .attr('x1', 10).attr('x2', 35)
                .attr('y1', plotHeight - 50).attr('y2', plotHeight - 50)
                .attr('stroke', '#f97316').attr('stroke-width', 3);
            g.append('text')
                .attr('x', 40).attr('y', plotHeight - 45)
                .attr('font-size', '1.25rem').attr('fill', '#f97316')
                .text('Secant: (r(t+h) - r(t))/h');

            g.append('line')
                .attr('x1', 10).attr('x2', 35)
                .attr('y1', plotHeight - 25).attr('y2', plotHeight - 25)
                .attr('stroke', '#22c55e').attr('stroke-width', 2).attr('stroke-dasharray', '5,3');
            g.append('text')
                .attr('x', 40).attr('y', plotHeight - 20)
                .attr('font-size', '1.25rem').attr('fill', '#22c55e')
                .text('Tangent: r\'(t)');

            const slider = document.getElementById('h-slider');
            const hDisplay = document.getElementById('h-value');

            function update() {
                const h = parseFloat(slider.value);
                hDisplay.textContent = h.toFixed(2);

                const t1 = t0 + h;
                const x1 = fx(t1);
                const y1 = fy(t1);

                // Update moving point
                movingPoint
                    .attr('cx', xScale(x1))
                    .attr('cy', yScale(y1));

                movingLabel
                    .attr('x', xScale(x1) + 10)
                    .attr('y', yScale(y1) - 10)
                    .text('r(t+h)');

                // Calculate secant direction: (r(t+h) - r(t))/h
                const dx = (x1 - x0) / h;
                const dy = (y1 - y0) / h;

                // Scale for display
                const vecScale = 0.5;
                secantVector
                    .attr('x1', xScale(x0))
                    .attr('y1', yScale(y0))
                    .attr('x2', xScale(x0 + dx * vecScale))
                    .attr('y2', yScale(y0 + dy * vecScale));

                // Slope of secant
                const secantSlope = dy / dx;
                infoText.text(`Secant slope: ${secantSlope.toFixed(3)} → Tangent slope: 2.000`);

                // Fade tangent line based on h
                tangentLine.attr('opacity', h < 0.3 ? 0.8 : 0.3);
            }

            if (slider) {
                slider.oninput = update;
                update();
            }
        }

        // Visualization 1: Vector Basics
        function drawVectorBasicsViz() {
            const container = d3.select('#vector-basics-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const xScale = d3.scaleLinear().domain([-4, 4]).range([margin.left, width - margin.right]);
            const yScale = d3.scaleLinear().domain([-3, 3]).range([height - margin.bottom, margin.top]);

            // Grid
            svg.append('g').selectAll('line.h').data(d3.range(-3, 4)).enter().append('line')
                .attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            svg.append('g').selectAll('line.v').data(d3.range(-4, 5)).enter().append('line')
                .attr('x1', d => xScale(d)).attr('x2', d => xScale(d))
                .attr('y1', margin.top).attr('y2', height - margin.bottom)
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            // Axes
            svg.append('line').attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', '#333').attr('stroke-width', 2);
            svg.append('line').attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', margin.top).attr('y2', height - margin.bottom).attr('stroke', '#333').attr('stroke-width', 2);

            addArrowMarker(svg, 'vec-arrow', '#06b6d4');
            addArrowMarker(svg, 'i-arrow', '#ef4444');
            addArrowMarker(svg, 'j-arrow', '#10b981');

            const vectorLine = svg.append('line')
                .attr('stroke', '#06b6d4').attr('stroke-width', 4)
                .attr('marker-end', 'url(#vec-arrow)');

            const iComponent = svg.append('line')
                .attr('stroke', '#ef4444').attr('stroke-width', 2).attr('stroke-dasharray', '5,3')
                .attr('marker-end', 'url(#i-arrow)');

            const jComponent = svg.append('line')
                .attr('stroke', '#10b981').attr('stroke-width', 2).attr('stroke-dasharray', '5,3')
                .attr('marker-end', 'url(#j-arrow)');

            const infoText = svg.append('text')
                .attr('x', width - margin.right - 10).attr('y', margin.top + 20)
                .attr('text-anchor', 'end').attr('font-size', '1.25rem');

            const sliderA = document.getElementById('vec-a-slider');
            const sliderB = document.getElementById('vec-b-slider');
            const aDisplay = document.getElementById('vec-a-value');
            const bDisplay = document.getElementById('vec-b-value');

            function update() {
                const a = parseFloat(sliderA.value);
                const b = parseFloat(sliderB.value);

                aDisplay.textContent = a;
                bDisplay.textContent = b;

                vectorLine.attr('x1', xScale(0)).attr('y1', yScale(0))
                    .attr('x2', xScale(a)).attr('y2', yScale(b));

                iComponent.attr('x1', xScale(0)).attr('y1', yScale(0))
                    .attr('x2', xScale(a)).attr('y2', yScale(0));

                jComponent.attr('x1', xScale(a)).attr('y1', yScale(0))
                    .attr('x2', xScale(a)).attr('y2', yScale(b));

                const magnitude = Math.sqrt(a * a + b * b);
                infoText.text(`|v| = ${magnitude.toFixed(2)}`);
            }

            sliderA.oninput = update;
            sliderB.oninput = update;
            update();
        }

        // Visualization 2: Position Vector
        function drawPositionViz() {
            const container = d3.select('#position-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const xScale = d3.scaleLinear().domain([-1.5, 1.5]).range([margin.left, width - margin.right]);
            const yScale = d3.scaleLinear().domain([-1.5, 1.5]).range([height - margin.bottom, margin.top]);

            // Grid
            svg.append('g').selectAll('line.h').data([-1, 0, 1]).enter().append('line')
                .attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            svg.append('g').selectAll('line.v').data([-1, 0, 1]).enter().append('line')
                .attr('x1', d => xScale(d)).attr('x2', d => xScale(d))
                .attr('y1', margin.top).attr('y2', height - margin.bottom)
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            // Axes
            svg.append('line').attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', '#333').attr('stroke-width', 2);
            svg.append('line').attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', margin.top).attr('y2', height - margin.bottom).attr('stroke', '#333').attr('stroke-width', 2);

            // Path
            const tValues = d3.range(0, 2 * Math.PI + 0.01, 0.05);
            const pathData = tValues.map(t => ({ x: Math.cos(t), y: Math.sin(t) }));
            const lineFn = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y));

            svg.append('path').datum(pathData).attr('fill', 'none')
                .attr('stroke', '#e5e7eb').attr('stroke-width', 2).attr('d', lineFn);

            addArrowMarker(svg, 'pos-arrow', '#8b5cf6');

            const posVector = svg.append('line')
                .attr('stroke', '#8b5cf6').attr('stroke-width', 4)
                .attr('marker-end', 'url(#pos-arrow)');

            const point = svg.append('circle').attr('r', 8).attr('fill', '#06b6d4');

            const slider = document.getElementById('pos-t-slider');
            const tDisplay = document.getElementById('pos-t-value');
            const rDisplay = document.getElementById('pos-r-value');

            function update() {
                const t = parseFloat(slider.value);
                const x = Math.cos(t);
                const y = Math.sin(t);

                tDisplay.textContent = t.toFixed(2);
                rDisplay.textContent = `(${x.toFixed(2)}, ${y.toFixed(2)})`;

                posVector.attr('x1', xScale(0)).attr('y1', yScale(0))
                    .attr('x2', xScale(x)).attr('y2', yScale(y));

                point.attr('cx', xScale(x)).attr('cy', yScale(y));
            }

            slider.oninput = update;
            update();
        }

        // Visualization 3: Velocity Vector
        function drawVelocityViz() {
            const container = d3.select('#velocity-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const xScale = d3.scaleLinear().domain([-2, 2]).range([margin.left, width - margin.right]);
            const yScale = d3.scaleLinear().domain([-2, 2]).range([height - margin.bottom, margin.top]);

            // Grid
            svg.append('g').selectAll('line.h').data([-1, 0, 1]).enter().append('line')
                .attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            svg.append('g').selectAll('line.v').data([-1, 0, 1]).enter().append('line')
                .attr('x1', d => xScale(d)).attr('x2', d => xScale(d))
                .attr('y1', margin.top).attr('y2', height - margin.bottom)
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            // Axes
            svg.append('line').attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', '#333').attr('stroke-width', 2);
            svg.append('line').attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', margin.top).attr('y2', height - margin.bottom).attr('stroke', '#333').attr('stroke-width', 2);

            // Path
            const tValues = d3.range(0, 2 * Math.PI + 0.01, 0.05);
            const pathData = tValues.map(t => ({ x: Math.cos(t), y: Math.sin(t) }));
            const lineFn = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y));

            svg.append('path').datum(pathData).attr('fill', 'none')
                .attr('stroke', '#ccc').attr('stroke-width', 2).attr('d', lineFn);

            addArrowMarker(svg, 'pos-arrow2', '#8b5cf6');
            addArrowMarker(svg, 'vel-arrow', '#10b981');

            const posVector = svg.append('line')
                .attr('stroke', '#8b5cf6').attr('stroke-width', 3)
                .attr('marker-end', 'url(#pos-arrow2)');

            const velVector = svg.append('line')
                .attr('stroke', '#10b981').attr('stroke-width', 3)
                .attr('marker-end', 'url(#vel-arrow)');

            const point = svg.append('circle').attr('r', 8).attr('fill', '#06b6d4');

            const slider = document.getElementById('vel-t-slider');
            const tDisplay = document.getElementById('vel-t-value');

            function update() {
                const t = parseFloat(slider.value);
                const x = Math.cos(t);
                const y = Math.sin(t);
                const vx = -Math.sin(t);
                const vy = Math.cos(t);

                tDisplay.textContent = t.toFixed(2);

                posVector.attr('x1', xScale(0)).attr('y1', yScale(0))
                    .attr('x2', xScale(x)).attr('y2', yScale(y));

                const scale = 0.7;
                velVector.attr('x1', xScale(x)).attr('y1', yScale(y))
                    .attr('x2', xScale(x + vx * scale)).attr('y2', yScale(y + vy * scale));

                point.attr('cx', xScale(x)).attr('cy', yScale(y));
            }

            slider.oninput = update;
            update();
        }

        // Visualization 4: Example 1
        function drawExample1Viz() {
            const container = d3.select('#example1-viz');
            container.selectAll('*').remove();

            const width = 300;
            const height = 280;
            const margin = { top: 10, right: 20, bottom: 30, left: 40 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const xScale = d3.scaleLinear().domain([-2, 4]).range([margin.left, width - margin.right]);
            const yScale = d3.scaleLinear().domain([-1, 4]).range([height - margin.bottom, margin.top]);

            // Axes
            svg.append('line').attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', '#333').attr('stroke-width', 1);
            svg.append('line').attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', margin.top).attr('y2', height - margin.bottom).attr('stroke', '#333').attr('stroke-width', 1);

            // Curve: r(t) = <t^2 - 1, e^t> for t in [-1, 1.5]
            const tValues = d3.range(-1, 1.51, 0.05);
            const curveData = tValues.map(t => ({ x: t * t - 1, y: Math.exp(t) }));
            const lineFn = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y)).curve(d3.curveNatural);

            svg.append('path').datum(curveData).attr('fill', 'none')
                .attr('stroke', '#8b5cf6').attr('stroke-width', 2).attr('d', lineFn);

            // Point at t = 1
            const t = 1;
            const x = t * t - 1;
            const y = Math.exp(t);
            svg.append('circle').attr('cx', xScale(x)).attr('cy', yScale(y)).attr('r', 6).attr('fill', '#06b6d4');

            addArrowMarker(svg, 'ex1-arrow', '#10b981');

            // Velocity vector at t = 1
            const vx = 2 * t;
            const vy = Math.exp(t);
            const vscale = 0.3;
            svg.append('line')
                .attr('x1', xScale(x)).attr('y1', yScale(y))
                .attr('x2', xScale(x + vx * vscale)).attr('y2', yScale(y + vy * vscale))
                .attr('stroke', '#10b981').attr('stroke-width', 2)
                .attr('marker-end', 'url(#ex1-arrow)');
        }

        // Visualization 5: All Three Vectors
        function drawAllVectorsViz() {
            const container = d3.select('#all-vectors-viz');
            container.selectAll('*').remove();

            const width = 700;
            const height = 400;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const xScale = d3.scaleLinear().domain([-2.5, 2.5]).range([margin.left, width - margin.right]);
            const yScale = d3.scaleLinear().domain([-2.5, 2.5]).range([height - margin.bottom, margin.top]);

            // Grid
            svg.append('g').selectAll('line.h').data([-2, -1, 0, 1, 2]).enter().append('line')
                .attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', d => yScale(d)).attr('y2', d => yScale(d))
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            svg.append('g').selectAll('line.v').data([-2, -1, 0, 1, 2]).enter().append('line')
                .attr('x1', d => xScale(d)).attr('x2', d => xScale(d))
                .attr('y1', margin.top).attr('y2', height - margin.bottom)
                .attr('stroke', '#e5e7eb').attr('stroke-width', 1);

            // Axes
            svg.append('line').attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', '#333').attr('stroke-width', 2);
            svg.append('line').attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', margin.top).attr('y2', height - margin.bottom).attr('stroke', '#333').attr('stroke-width', 2);

            // Path (ellipse)
            const a = 2, b = 1;
            const tValues = d3.range(0, 2 * Math.PI + 0.01, 0.05);
            const pathData = tValues.map(t => ({ x: a * Math.cos(t), y: b * Math.sin(t) }));
            const lineFn = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y));

            svg.append('path').datum(pathData).attr('fill', 'none')
                .attr('stroke', '#ccc').attr('stroke-width', 2).attr('d', lineFn);

            addArrowMarker(svg, 'all-pos', '#8b5cf6');
            addArrowMarker(svg, 'all-vel', '#10b981');
            addArrowMarker(svg, 'all-acc', '#f59e0b');

            const posVector = svg.append('line')
                .attr('stroke', '#8b5cf6').attr('stroke-width', 3)
                .attr('marker-end', 'url(#all-pos)');

            const velVector = svg.append('line')
                .attr('stroke', '#10b981').attr('stroke-width', 3)
                .attr('marker-end', 'url(#all-vel)');

            const accVector = svg.append('line')
                .attr('stroke', '#f59e0b').attr('stroke-width', 3)
                .attr('marker-end', 'url(#all-acc)');

            const point = svg.append('circle').attr('r', 8).attr('fill', '#06b6d4');

            const slider = document.getElementById('all-t-slider');
            const tDisplay = document.getElementById('all-t-value');

            function update() {
                const t = parseFloat(slider.value);
                const x = a * Math.cos(t);
                const y = b * Math.sin(t);
                const vx = -a * Math.sin(t);
                const vy = b * Math.cos(t);
                const ax = -a * Math.cos(t);
                const ay = -b * Math.sin(t);

                tDisplay.textContent = t.toFixed(2);

                posVector.attr('x1', xScale(0)).attr('y1', yScale(0))
                    .attr('x2', xScale(x)).attr('y2', yScale(y));

                const vscale = 0.5;
                velVector.attr('x1', xScale(x)).attr('y1', yScale(y))
                    .attr('x2', xScale(x + vx * vscale)).attr('y2', yScale(y + vy * vscale));

                const ascale = 0.3;
                accVector.attr('x1', xScale(x)).attr('y1', yScale(y))
                    .attr('x2', xScale(x + ax * ascale)).attr('y2', yScale(y + ay * ascale));

                point.attr('cx', xScale(x)).attr('cy', yScale(y));
            }

            slider.oninput = update;
            update();
        }

        // Visualization 6: Integration Example
        function drawIntegrationViz() {
            const container = d3.select('#integration-viz');
            container.selectAll('*').remove();

            const width = 300;
            const height = 280;
            const margin = { top: 10, right: 20, bottom: 30, left: 40 };

            const svg = container.append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const xScale = d3.scaleLinear().domain([-0.5, 6]).range([margin.left, width - margin.right]);
            const yScale = d3.scaleLinear().domain([-0.5, 10]).range([height - margin.bottom, margin.top]);

            // Axes
            svg.append('line').attr('x1', margin.left).attr('x2', width - margin.right)
                .attr('y1', yScale(0)).attr('y2', yScale(0)).attr('stroke', '#333').attr('stroke-width', 1);
            svg.append('line').attr('x1', xScale(0)).attr('x2', xScale(0))
                .attr('y1', margin.top).attr('y2', height - margin.bottom).attr('stroke', '#333').attr('stroke-width', 1);

            // Curve: r(t) = <t^2 + 1, 3t + 2> for t in [0, 2]
            const tValues = d3.range(0, 2.01, 0.05);
            const curveData = tValues.map(t => ({ x: t * t + 1, y: 3 * t + 2 }));
            const lineFn = d3.line().x(d => xScale(d.x)).y(d => yScale(d.y)).curve(d3.curveNatural);

            svg.append('path').datum(curveData).attr('fill', 'none')
                .attr('stroke', '#8b5cf6').attr('stroke-width', 3).attr('d', lineFn);

            // Initial point
            svg.append('circle').attr('cx', xScale(1)).attr('cy', yScale(2)).attr('r', 6).attr('fill', '#10b981');
            svg.append('text').attr('x', xScale(1) - 10).attr('y', yScale(2) + 20)
                .attr('font-size', '1.25rem').text('t=0');

            // Final point
            svg.append('circle').attr('cx', xScale(5)).attr('cy', yScale(8)).attr('r', 6).attr('fill', '#06b6d4');
            svg.append('text').attr('x', xScale(5) + 5).attr('y', yScale(8) + 5)
                .attr('font-size', '1.25rem').text('t=2');
        }
    </script>
</body>
</html>
